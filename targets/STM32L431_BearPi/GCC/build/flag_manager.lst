ARM GAS  c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"flag_manager.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.flag_init,"ax",%progbits
  18              		.align	1
  19              		.global	flag_init
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	flag_init:
  26              	.LFB0:
  27              		.file 1 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate/flag_ma
   1:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** /*----------------------------------------------------------------------------
   2:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * Copyright (c) <2016-2018>, <Huawei Technologies Co., Ltd>
   3:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * All rights reserved.
   4:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * are permitted provided that the following conditions are met:
   6:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * conditions and the following disclaimer.
   8:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * provided with the distribution.
  11:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * to endorse or promote products derived from this software without specific prior written
  13:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * permission.
  14:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  *---------------------------------------------------------------------------*/
  26:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** /*----------------------------------------------------------------------------
  27:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * Notice of Export Control Law
  28:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * ===============================================
  29:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s 			page 2


  32:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  * applicable export control laws and regulations.
  33:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****  *---------------------------------------------------------------------------*/
  34:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  35:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** #include <stddef.h>
  36:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** #include <string.h>
  37:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** #include "flag_manager.h"
  38:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  39:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** static flag_op_s g_flag_op;
  40:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  41:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** #define FLASH_UNIT_SIZE (256)
  42:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** #define FLASH_FLAG_SIZE (512)
  43:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  44:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** int flag_init(flag_op_s *flag)
  45:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** {
  28              		.loc 1 45 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  46:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     if (NULL == flag
  34              		.loc 1 46 0
  35 0000 40B1     		cbz	r0, .L3
  47:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         || NULL == flag->func_flag_read
  36              		.loc 1 47 0
  37 0002 0268     		ldr	r2, [r0]
  38 0004 4AB1     		cbz	r2, .L4
  48:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         || NULL == flag->func_flag_write)
  39              		.loc 1 48 0
  40 0006 4368     		ldr	r3, [r0, #4]
  41 0008 53B1     		cbz	r3, .L5
  49:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     return -1;
  50:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  51:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     g_flag_op.func_flag_read = flag->func_flag_read;
  42              		.loc 1 51 0
  43 000a 0749     		ldr	r1, .L6
  44 000c 0A60     		str	r2, [r1]
  52:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     g_flag_op.func_flag_write = flag->func_flag_write;
  45              		.loc 1 52 0
  46 000e 4B60     		str	r3, [r1, #4]
  53:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  54:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     return 0;
  47              		.loc 1 54 0
  48 0010 0020     		movs	r0, #0
  49              	.LVL1:
  50 0012 7047     		bx	lr
  51              	.LVL2:
  52              	.L3:
  49:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  53              		.loc 1 49 0
  54 0014 4FF0FF30 		mov	r0, #-1
  55              	.LVL3:
  56 0018 7047     		bx	lr
  57              	.LVL4:
  58              	.L4:
  59 001a 4FF0FF30 		mov	r0, #-1
  60              	.LVL5:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s 			page 3


  61 001e 7047     		bx	lr
  62              	.LVL6:
  63              	.L5:
  64 0020 4FF0FF30 		mov	r0, #-1
  65              	.LVL7:
  55:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** }
  66              		.loc 1 55 0
  67 0024 7047     		bx	lr
  68              	.L7:
  69 0026 00BF     		.align	2
  70              	.L6:
  71 0028 00000000 		.word	.LANCHOR0
  72              		.cfi_endproc
  73              	.LFE0:
  75              		.section	.text.flag_read,"ax",%progbits
  76              		.align	1
  77              		.global	flag_read
  78              		.syntax unified
  79              		.thumb
  80              		.thumb_func
  81              		.fpu fpv4-sp-d16
  83              	flag_read:
  84              	.LFB1:
  56:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  57:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** int flag_read(flag_type_e flag_type, void *buf, int32_t len)
  58:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** {
  85              		.loc 1 58 0
  86              		.cfi_startproc
  87              		@ args = 0, pretend = 0, frame = 512
  88              		@ frame_needed = 0, uses_anonymous_args = 0
  89              	.LVL8:
  90 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  91              	.LCFI0:
  92              		.cfi_def_cfa_offset 20
  93              		.cfi_offset 4, -20
  94              		.cfi_offset 5, -16
  95              		.cfi_offset 6, -12
  96              		.cfi_offset 7, -8
  97              		.cfi_offset 14, -4
  98 0002 ADF5017D 		sub	sp, sp, #516
  99              	.LCFI1:
 100              		.cfi_def_cfa_offset 536
  59:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     uint8_t flag_buf[FLASH_FLAG_SIZE];
  60:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  61:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     if (NULL == buf
 101              		.loc 1 61 0
 102 0006 11B3     		cbz	r1, .L12
 103 0008 0E46     		mov	r6, r1
  62:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         || len < 0
 104              		.loc 1 62 0
 105 000a 002A     		cmp	r2, #0
 106 000c 22DB     		blt	.L13
  63:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         || len > FLASH_UNIT_SIZE
 107              		.loc 1 63 0
 108 000e B2F5807F 		cmp	r2, #256
 109 0012 22DC     		bgt	.L14
 110 0014 1446     		mov	r4, r2
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s 			page 4


 111 0016 0546     		mov	r5, r0
  64:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         || g_flag_op.func_flag_read(flag_buf, FLASH_FLAG_SIZE) != 0)
 112              		.loc 1 64 0
 113 0018 134B     		ldr	r3, .L17
 114 001a 1B68     		ldr	r3, [r3]
 115 001c 4FF40071 		mov	r1, #512
 116              	.LVL9:
 117 0020 6846     		mov	r0, sp
 118              	.LVL10:
 119 0022 9847     		blx	r3
 120              	.LVL11:
 121 0024 0746     		mov	r7, r0
 122 0026 D8B9     		cbnz	r0, .L15
  65:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         return -1;
  66:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  67:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     switch (flag_type)
 123              		.loc 1 67 0
 124 0028 2DB1     		cbz	r5, .L10
 125 002a 012D     		cmp	r5, #1
 126 002c 09D0     		beq	.L11
 127              	.LVL12:
 128              	.L8:
  68:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     {
  69:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     case FLAG_BOOTLOADER:
  70:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         memcpy(buf, flag_buf, len);
  71:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
  72:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     case FLAG_APP:
  73:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         memcpy(buf, flag_buf + FLASH_UNIT_SIZE, len);
  74:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
  75:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     default:
  76:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
  77:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     }
  78:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  79:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     return 0;
  80:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** }
 129              		.loc 1 80 0
 130 002e 3846     		mov	r0, r7
 131 0030 0DF5017D 		add	sp, sp, #516
 132              	.LCFI2:
 133              		.cfi_remember_state
 134              		.cfi_def_cfa_offset 20
 135              		@ sp needed
 136 0034 F0BD     		pop	{r4, r5, r6, r7, pc}
 137              	.LVL13:
 138              	.L10:
 139              	.LCFI3:
 140              		.cfi_restore_state
  70:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
 141              		.loc 1 70 0
 142 0036 2246     		mov	r2, r4
 143 0038 6946     		mov	r1, sp
 144 003a 3046     		mov	r0, r6
 145 003c FFF7FEFF 		bl	memcpy
 146              	.LVL14:
  71:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     case FLAG_APP:
 147              		.loc 1 71 0
 148 0040 F5E7     		b	.L8
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s 			page 5


 149              	.L11:
  73:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
 150              		.loc 1 73 0
 151 0042 2246     		mov	r2, r4
 152 0044 40A9     		add	r1, sp, #256
 153 0046 3046     		mov	r0, r6
 154 0048 FFF7FEFF 		bl	memcpy
 155              	.LVL15:
  74:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     default:
 156              		.loc 1 74 0
 157 004c EFE7     		b	.L8
 158              	.LVL16:
 159              	.L12:
  65:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
 160              		.loc 1 65 0
 161 004e 4FF0FF37 		mov	r7, #-1
 162 0052 ECE7     		b	.L8
 163              	.L13:
 164 0054 4FF0FF37 		mov	r7, #-1
 165 0058 E9E7     		b	.L8
 166              	.L14:
 167 005a 4FF0FF37 		mov	r7, #-1
 168 005e E6E7     		b	.L8
 169              	.LVL17:
 170              	.L15:
 171 0060 4FF0FF37 		mov	r7, #-1
 172 0064 E3E7     		b	.L8
 173              	.L18:
 174 0066 00BF     		.align	2
 175              	.L17:
 176 0068 00000000 		.word	.LANCHOR0
 177              		.cfi_endproc
 178              	.LFE1:
 180              		.section	.text.flag_write,"ax",%progbits
 181              		.align	1
 182              		.global	flag_write
 183              		.syntax unified
 184              		.thumb
 185              		.thumb_func
 186              		.fpu fpv4-sp-d16
 188              	flag_write:
 189              	.LFB2:
  81:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  82:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** int flag_write(flag_type_e flag_type, const void *buf, int32_t len)
  83:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** {
 190              		.loc 1 83 0
 191              		.cfi_startproc
 192              		@ args = 0, pretend = 0, frame = 512
 193              		@ frame_needed = 0, uses_anonymous_args = 0
 194              	.LVL18:
  84:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     uint8_t flag_buf[FLASH_FLAG_SIZE];
  85:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  86:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     if (NULL == buf
 195              		.loc 1 86 0
 196 0000 49B3     		cbz	r1, .L24
  83:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     uint8_t flag_buf[FLASH_FLAG_SIZE];
 197              		.loc 1 83 0
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s 			page 6


 198 0002 70B5     		push	{r4, r5, r6, lr}
 199              	.LCFI4:
 200              		.cfi_def_cfa_offset 16
 201              		.cfi_offset 4, -16
 202              		.cfi_offset 5, -12
 203              		.cfi_offset 6, -8
 204              		.cfi_offset 14, -4
 205 0004 ADF5007D 		sub	sp, sp, #512
 206              	.LCFI5:
 207              		.cfi_def_cfa_offset 528
 208 0008 0E46     		mov	r6, r1
  87:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         || len < 0
 209              		.loc 1 87 0
 210 000a 002A     		cmp	r2, #0
 211 000c 26DB     		blt	.L25
  88:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         || len > FLASH_UNIT_SIZE
 212              		.loc 1 88 0
 213 000e B2F5807F 		cmp	r2, #256
 214 0012 26DC     		bgt	.L26
 215 0014 1446     		mov	r4, r2
 216 0016 0546     		mov	r5, r0
  89:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         || g_flag_op.func_flag_read(flag_buf, FLASH_FLAG_SIZE) != 0)
 217              		.loc 1 89 0
 218 0018 154B     		ldr	r3, .L32
 219 001a 1B68     		ldr	r3, [r3]
 220 001c 4FF40071 		mov	r1, #512
 221              	.LVL19:
 222 0020 6846     		mov	r0, sp
 223              	.LVL20:
 224 0022 9847     		blx	r3
 225              	.LVL21:
 226 0024 00BB     		cbnz	r0, .L27
  90:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         return -1;
  91:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
  92:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     switch (flag_type)
 227              		.loc 1 92 0
 228 0026 55B1     		cbz	r5, .L22
 229 0028 012D     		cmp	r5, #1
 230 002a 0ED0     		beq	.L23
 231              	.L21:
  93:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     {
  94:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     case FLAG_BOOTLOADER:
  95:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         memcpy(flag_buf, buf, len);
  96:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
  97:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     case FLAG_APP:
  98:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         memcpy(flag_buf + FLASH_UNIT_SIZE, buf, len);
  99:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
 100:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     default:
 101:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
 102:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     }
 103:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
 104:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     return g_flag_op.func_flag_write(flag_buf, FLASH_FLAG_SIZE);
 232              		.loc 1 104 0
 233 002c 104B     		ldr	r3, .L32
 234 002e 5B68     		ldr	r3, [r3, #4]
 235 0030 4FF40071 		mov	r1, #512
 236 0034 6846     		mov	r0, sp
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s 			page 7


 237 0036 9847     		blx	r3
 238              	.LVL22:
 239              	.L19:
 105:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** }
 240              		.loc 1 105 0
 241 0038 0DF5007D 		add	sp, sp, #512
 242              	.LCFI6:
 243              		.cfi_remember_state
 244              		.cfi_def_cfa_offset 16
 245              		@ sp needed
 246 003c 70BD     		pop	{r4, r5, r6, pc}
 247              	.LVL23:
 248              	.L22:
 249              	.LCFI7:
 250              		.cfi_restore_state
  95:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
 251              		.loc 1 95 0
 252 003e 2246     		mov	r2, r4
 253 0040 3146     		mov	r1, r6
 254 0042 6846     		mov	r0, sp
 255 0044 FFF7FEFF 		bl	memcpy
 256              	.LVL24:
  96:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     case FLAG_APP:
 257              		.loc 1 96 0
 258 0048 F0E7     		b	.L21
 259              	.L23:
  98:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****         break;
 260              		.loc 1 98 0
 261 004a 2246     		mov	r2, r4
 262 004c 3146     		mov	r1, r6
 263 004e 40A8     		add	r0, sp, #256
 264 0050 FFF7FEFF 		bl	memcpy
 265              	.LVL25:
  99:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c ****     default:
 266              		.loc 1 99 0
 267 0054 EAE7     		b	.L21
 268              	.LVL26:
 269              	.L24:
 270              	.LCFI8:
 271              		.cfi_def_cfa_offset 0
 272              		.cfi_restore 4
 273              		.cfi_restore 5
 274              		.cfi_restore 6
 275              		.cfi_restore 14
  90:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
 276              		.loc 1 90 0
 277 0056 4FF0FF30 		mov	r0, #-1
 278              	.LVL27:
 279              		.loc 1 105 0
 280 005a 7047     		bx	lr
 281              	.LVL28:
 282              	.L25:
 283              	.LCFI9:
 284              		.cfi_def_cfa_offset 528
 285              		.cfi_offset 4, -16
 286              		.cfi_offset 5, -12
 287              		.cfi_offset 6, -8
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s 			page 8


 288              		.cfi_offset 14, -4
  90:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate\flag_manager.c **** 
 289              		.loc 1 90 0
 290 005c 4FF0FF30 		mov	r0, #-1
 291              	.LVL29:
 292 0060 EAE7     		b	.L19
 293              	.LVL30:
 294              	.L26:
 295 0062 4FF0FF30 		mov	r0, #-1
 296              	.LVL31:
 297 0066 E7E7     		b	.L19
 298              	.LVL32:
 299              	.L27:
 300 0068 4FF0FF30 		mov	r0, #-1
 301 006c E4E7     		b	.L19
 302              	.L33:
 303 006e 00BF     		.align	2
 304              	.L32:
 305 0070 00000000 		.word	.LANCHOR0
 306              		.cfi_endproc
 307              	.LFE2:
 309              		.section	.bss.g_flag_op,"aw",%nobits
 310              		.align	2
 311              		.set	.LANCHOR0,. + 0
 314              	g_flag_op:
 315 0000 00000000 		.space	8
 315      00000000 
 316              		.text
 317              	.Letext0:
 318              		.file 2 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 319              		.file 3 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 320              		.file 4 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 321              		.file 5 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\lib\\gcc\\arm-none-eabi
 322              		.file 6 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 323              		.file 7 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 324              		.file 8 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate/flag_ma
 325              		.file 9 "<built-in>"
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 flag_manager.c
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:18     .text.flag_init:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:25     .text.flag_init:00000000 flag_init
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:71     .text.flag_init:00000028 $d
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:76     .text.flag_read:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:83     .text.flag_read:00000000 flag_read
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:176    .text.flag_read:00000068 $d
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:181    .text.flag_write:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:188    .text.flag_write:00000000 flag_write
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:305    .text.flag_write:00000070 $d
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:310    .bss.g_flag_op:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\cc7OVkwV.s:314    .bss.g_flag_op:00000000 g_flag_op

UNDEFINED SYMBOLS
memcpy
