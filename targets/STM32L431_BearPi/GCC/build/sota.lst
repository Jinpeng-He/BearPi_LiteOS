ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"sota.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.chartoint,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	chartoint:
  25              	.LFB3:
  26              		.file 1 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota/sota.c"
   1:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** /*----------------------------------------------------------------------------
   2:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * Copyright (c) <2016-2018>, <Huawei Technologies Co., Ltd>
   3:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * All rights reserved.
   4:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * are permitted provided that the following conditions are met:
   6:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * conditions and the following disclaimer.
   8:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * provided with the distribution.
  11:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * to endorse or promote products derived from this software without specific prior written
  13:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * permission.
  14:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  *---------------------------------------------------------------------------*/
  26:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** /*----------------------------------------------------------------------------
  27:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * Notice of Export Control Law
  28:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * ===============================================
  29:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  * applicable export control laws and regulations.
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 2


  33:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  *---------------------------------------------------------------------------*/
  34:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #include "sota/sota.h"
  35:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #include "sota_hal.h"
  36:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #include "flag_manager.h"
  37:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
  38:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #include<stdio.h>
  39:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #include<string.h>
  40:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #include<stdint.h>
  41:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
  42:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #include "ota/package.h"
  43:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #include "upgrade_flag.h"
  44:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
  45:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #define VER_LEN      16
  46:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #define SEND_BUF_LEN 128
  47:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
  48:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** typedef  uint8_t   BYTE;
  49:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** typedef  uint16_t  WORD;
  50:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
  51:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #ifdef SOTA_DEBUG
  52:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #define SOTA_LOG(fmt, ...) \
  53:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     do \
  54:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     { \
  55:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (NULL != g_flash_op.sota_printf) \
  56:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         { \
  57:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)g_flash_op.sota_printf("[%s:%d][I]"fmt"\n", \
  58:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****                                   __func__, __LINE__, ##__VA_ARGS__); \
  59:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         } \
  60:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     } while (0)
  61:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #else
  62:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #define SOTA_LOG(fmt, ...) ((void)0)
  63:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #endif
  64:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
  65:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** typedef enum
  66:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
  67:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     MSG_GET_VER = 19,
  68:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     MSG_NOTIFY_NEW_VER,
  69:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     MSG_GET_BLOCK,
  70:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     MSG_DOWNLOAD_STATE,
  71:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     MSG_EXC_UPDATE,
  72:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     MSG_NOTIFY_STATE = 24
  73:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }msg_code_e;
  74:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
  75:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** typedef enum
  76:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
  77:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     IDLE = 0,
  78:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DOWNLOADING,
  79:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     UPDATING,
  80:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     UPDATED,
  81:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }sota_state;
  82:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
  83:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** typedef enum
  84:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
  85:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DEV_OK = 0x0,
  86:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DEV_BUSYING = 0x1,
  87:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DEV_WEAK_SIGNAL = 0x2,
  88:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DEV_LATEST_VER = 0x3,
  89:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DEV_LOW_BATTERY = 0x4,
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 3


  90:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DEV_NO_SPACE = 0x5,
  91:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DOWNLOAD_TIME_OUT = 0x6,
  92:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     FIRMWARE_CHECK_ERROR = 0x7,
  93:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     FIRMWARE_NOT_MATCH = 0x8,
  94:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DEV_MEMORY_EXHAUSTED = 0x9,
  95:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     DEV_INNER_ERROR = 0x7f,
  96:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     UPDATE_TASK_EXIT = 0x80,
  97:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     REQUEST_BLOCK_INVALID = 0x81
  98:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }response_code_e;
  99:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 100:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** typedef struct ota_pcp_head_t
 101:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 102:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     WORD ori_id;
 103:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     BYTE ver_num;
 104:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     BYTE msg_code;
 105:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     WORD chk_code;
 106:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     WORD data_len;
 107:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }ota_pcp_head_s;
 108:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 109:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** typedef struct ota_ver_notify
 110:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 111:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     BYTE ver[VER_LEN];
 112:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     WORD block_size;
 113:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     WORD block_totalnum;
 114:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     WORD ver_chk_code;
 115:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }ota_ver_notify_t;
 116:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 117:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** typedef struct sota_update_info
 118:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 119:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint16_t block_size;
 120:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint32_t block_num;
 121:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint32_t block_offset;
 122:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint32_t block_totalnum;
 123:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint32_t block_tolen;
 124:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint32_t ver_chk_code;
 125:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char     ver[VER_LEN];
 126:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint8_t  state;
 127:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** } sota_update_info_t;
 128:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 129:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** sota_arg_s                         g_flash_op;
 130:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static sota_update_info_t          g_at_update_record;
 131:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static pack_storage_device_api_s * g_storage_device;
 132:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 133:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #define LITTLE_DNEIAN
 134:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #ifdef LITTLE_DNEIAN
 135:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #define htons_ota(x) ((((x) & 0x00ff) << 8) | (((x) & 0xff00) >> 8))
 136:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #else
 137:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #define htons_ota(x) (x)
 138:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #endif
 139:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #define PCP_HEAD 0xFFFE
 140:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** #define BLOCK_HEAD 3
 141:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 142:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static int chartoint(const char* port)
 143:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
  27              		.loc 1 143 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 4


  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
  33 0000 10B4     		push	{r4}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 4, -4
  37              	.LVL1:
 144:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 	int tmp=0;
  38              		.loc 1 144 0
  39 0002 0023     		movs	r3, #0
 145:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 	while (*port >= '0' && *port <= '9')
  40              		.loc 1 145 0
  41 0004 05E0     		b	.L2
  42              	.LVL2:
  43              	.L3:
 146:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 	{
 147:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 		tmp = tmp*10+*port-'0';
  44              		.loc 1 147 0
  45 0006 03EB8303 		add	r3, r3, r3, lsl #2
  46              	.LVL3:
  47 000a 5A00     		lsls	r2, r3, #1
  48 000c 1319     		adds	r3, r2, r4
  49 000e 303B     		subs	r3, r3, #48
  50              	.LVL4:
 148:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 		port++;
  51              		.loc 1 148 0
  52 0010 0130     		adds	r0, r0, #1
  53              	.LVL5:
  54              	.L2:
 145:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 	while (*port >= '0' && *port <= '9')
  55              		.loc 1 145 0
  56 0012 0478     		ldrb	r4, [r0]	@ zero_extendqisi2
  57 0014 A4F13001 		sub	r1, r4, #48
  58 0018 C9B2     		uxtb	r1, r1
  59 001a 0929     		cmp	r1, #9
  60 001c F3D9     		bls	.L3
 149:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 	}
 150:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 	return tmp;
 151:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
  61              		.loc 1 151 0
  62 001e 1846     		mov	r0, r3
  63              	.LVL6:
  64 0020 5DF8044B 		ldr	r4, [sp], #4
  65              	.LCFI1:
  66              		.cfi_restore 4
  67              		.cfi_def_cfa_offset 0
  68 0024 7047     		bx	lr
  69              		.cfi_endproc
  70              	.LFE3:
  72              		.section	.text.func_flag_read,"ax",%progbits
  73              		.align	1
  74              		.syntax unified
  75              		.thumb
  76              		.thumb_func
  77              		.fpu fpv4-sp-d16
  79              	func_flag_read:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 5


  80              	.LFB16:
 152:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 153:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** int32_t sota_parse(const int8_t *in_buf, int32_t in_len, int8_t * out_buf,  int32_t out_len)
 154:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 155:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ota_pcp_head_s *phead;
 156:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char *databuf;
 157:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char *rlen;
 158:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int buflen;
 159:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int ret,cmd_crc_num;
 160:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char *buf;
 161:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 162:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (in_buf == NULL || in_len < (sizeof(ota_pcp_head_s) - sizeof(WORD)) || out_buf == NULL)
 163:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 164:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("in_buf:%p len:%d, out_buf:%p",in_buf,(int)in_len, out_buf);
 165:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
 166:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 167:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 168:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     rlen = strstr((const char*)in_buf,":");/*lint !e158*/
 169:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (rlen == NULL)/*lint !e158*/
 170:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 171:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("buflen invalid");
 172:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
 173:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 174:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     buflen = chartoint(rlen+1);
 175:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (out_len < buflen)
 176:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 177:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("out buf not enough");
 178:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END; 
 179:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 180:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 181:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     buflen = buflen * 2;
 182:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     databuf = strstr(rlen,",");
 183:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (databuf == NULL)
 184:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 185:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("buf invalid");
 186:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
 187:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 188:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     buf = databuf + 1;
 189:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 190:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memset(out_buf, 0, out_len);
 191:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     HexStrToByte((const unsigned char *)buf, (unsigned char *)out_buf, buflen);
 192:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     phead = (ota_pcp_head_s *)out_buf;
 193:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 194:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     cmd_crc_num = htons_ota(phead->chk_code);
 195:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     phead->chk_code = 0;
 196:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret = crc_check((const unsigned char *)out_buf, buflen/2);
 197:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     phead->ori_id = htons_ota(phead->ori_id);
 198:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (phead->data_len > BLOCK_HEAD && phead->msg_code == MSG_GET_BLOCK)
 199:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 200:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         phead->data_len = htons_ota(phead->data_len) - BLOCK_HEAD;
 201:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 202:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (phead->ori_id != PCP_HEAD || (ret != cmd_crc_num) || \
 203:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (phead->msg_code < MSG_GET_VER || phead->msg_code > MSG_NOTIFY_STATE))
 204:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 205:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("head wrong! head magic:%X msg_code:%X ver_num:%X ret:%X crc:%X",
 206:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             phead->ori_id,phead->msg_code,phead->ver_num, ret, cmd_crc_num);
 207:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 6


 208:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 209:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 210:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return SOTA_OK;
 211:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** END:
 212:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return SOTA_FAILED;
 213:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 214:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 215:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static int ver_to_hex(const char *bufin, int len, char *bufout)
 216:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 217:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int i = 0;
 218:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (NULL == bufin || len <= 0 || NULL == bufout)
 219:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 220:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return -1;
 221:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 222:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     for (i = 0; i < len; i++)
 223:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 224:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sprintf(bufout + i * 2, "%02X", bufin[i]);
 225:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 226:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return 0;
 227:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 228:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 229:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static int sota_at_send(msg_code_e msg_code, char *buf, int len)
 230:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 231:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint32_t ret;
 232:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char crcretbuf[5] = {0};
 233:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char tmpbuf[SEND_BUF_LEN + VER_LEN] = {0};
 234:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ota_pcp_head_s pcp_head = {0};
 235:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     unsigned char atwbuf[SEND_BUF_LEN + VER_LEN] = {0};
 236:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     unsigned char hbuf[64] = {0};
 237:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (len >= SEND_BUF_LEN)
 238:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 239:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("payload too long");
 240:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_FAILED;
 241:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 242:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pcp_head.ori_id = htons_ota(PCP_HEAD);
 243:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pcp_head.ver_num = 1;
 244:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pcp_head.msg_code = msg_code;
 245:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pcp_head.data_len = htons_ota(len / 2);
 246:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)ver_to_hex((const char *)&pcp_head, sizeof(ota_pcp_head_s), (char *)hbuf);
 247:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 248:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memcpy(atwbuf, hbuf, VER_LEN);
 249:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memcpy(atwbuf + VER_LEN, buf, len);
 250:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 251:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     HexStrToByte(atwbuf, (unsigned char*)tmpbuf, len + VER_LEN); //strlen(atwbuf)
 252:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret = (uint32_t)crc_check((unsigned char*)tmpbuf, (len + VER_LEN) / 2);
 253:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)snprintf(crcretbuf, sizeof(crcretbuf), "%04X", (unsigned int)ret);
 254:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 255:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memcpy(atwbuf + 8, crcretbuf, 4);
 256:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return g_flash_op.sota_send((char *)atwbuf, len + VER_LEN);
 257:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 258:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 259:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static void sota_send_request_block(char *ver)
 260:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 261:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      char ver_ret[VER_LEN + 2] = {0};
 262:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      char sbuf[64] = {0};
 263:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  
 264:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      if (g_flash_op.firmware_download_stage == BOOTLOADER
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 7


 265:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         && g_flash_op.current_run_stage == APPLICATION)
 266:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      {
 267:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return;
 268:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      }
 269:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         
 270:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      memcpy(ver_ret, ver, VER_LEN);
 271:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      ver_ret[VER_LEN] = (g_at_update_record.block_num >> 8) & 0XFF;
 272:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      ver_ret[VER_LEN + 1] = g_at_update_record.block_num & 0XFF;
 273:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      (void)ver_to_hex(ver_ret, (VER_LEN + 2), sbuf);
 274:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      (void)sota_at_send(MSG_GET_BLOCK, sbuf, (VER_LEN + 2) * 2);
 275:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 276:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 277:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static void sota_send_response_code(msg_code_e msg_code, response_code_e code)
 278:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 279:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char ret_buf[1];
 280:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char sbuf[2];
 281:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 282:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret_buf[0] = code;
 283:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)ver_to_hex(ret_buf, 1, (char *)sbuf);
 284:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)sota_at_send(msg_code, (char *)sbuf, 2);
 285:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 286:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 287:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static void sota_reset_record_info(ota_ver_notify_t *notify)
 288:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 289:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_offset = 0;
 290:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_size = htons_ota(notify->block_size);
 291:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_totalnum = htons_ota(notify->block_totalnum);
 292:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_num = 0;
 293:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_tolen = 0;
 294:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.ver_chk_code = notify->ver_chk_code;
 295:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memcpy(g_at_update_record.ver, notify->ver, VER_LEN);
 296:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.state = DOWNLOADING;
 297:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)flag_write(FLAG_APP, (void*)&g_at_update_record, sizeof(sota_update_info_t));  
 298:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 299:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 300:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static int32_t sota_new_ver_process(const ota_pcp_head_s *head, const uint8_t *pbuf)
 301:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 302:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char ver[VER_LEN];
 303:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ota_ver_notify_t *notify = (ota_ver_notify_t *)pbuf;
 304:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 305:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)g_flash_op.get_ver(ver, VER_LEN);
 306:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (strncmp(ver, (const char*)notify->ver, VER_LEN) == 0)
 307:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 308:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("Already latest version %s", notify->ver);
 309:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_NOTIFY_NEW_VER, DEV_LATEST_VER);
 310:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         g_at_update_record.state = IDLE;
 311:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_OK;
 312:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 313:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 314:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     SOTA_LOG("Notify ver %s,%x, record ver:%s,%x", notify->ver, notify->ver_chk_code, 
 315:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         g_at_update_record.ver,g_at_update_record.ver_chk_code);
 316:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if ((strncmp(g_at_update_record.ver, (const char *)notify->ver, VER_LEN) == 0)
 317:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         && (notify->ver_chk_code == g_at_update_record.ver_chk_code))
 318:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 319:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("state %d, downloaded %d blocks", g_at_update_record.state, g_at_update_record.blo
 320:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (g_at_update_record.block_num < g_at_update_record.block_totalnum
 321:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             && g_at_update_record.state == DOWNLOADING)
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 8


 322:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 323:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             sota_send_request_block((char*)notify->ver);
 324:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_DOWNLOADING;
 325:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 326:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         else if (g_at_update_record.block_num == g_at_update_record.block_totalnum
 327:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             && g_at_update_record.state == UPDATING)
 328:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 329:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             sota_send_response_code(MSG_DOWNLOAD_STATE, DEV_OK);
 330:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_UPDATING;
 331:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 332:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         else if (g_at_update_record.block_num == g_at_update_record.block_totalnum
 333:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             && g_at_update_record.state == UPDATED)
 334:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 335:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_UPDATED;
 336:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 337:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 338:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 339:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     sota_reset_record_info(notify);
 340:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     sota_send_request_block((char*)notify->ver);
 341:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return SOTA_DOWNLOADING;
 342:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 343:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 344:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static int32_t sota_data_block_process(const ota_pcp_head_s *head, const uint8_t *pbuf)
 345:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 346:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint16_t block_seq = 0;
 347:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int ret = SOTA_OK;
 348:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 349:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (g_at_update_record.state != DOWNLOADING)
 350:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 351:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****        return SOTA_UNEXPECT_PACKET;
 352:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 353:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 354:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (*pbuf == UPDATE_TASK_EXIT)
 355:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 356:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         g_at_update_record.state = IDLE;
 357:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_EXIT;
 358:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 359:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 360:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     block_seq = ((*(pbuf + 1) << 8) & 0XFF00) | (*(pbuf + 2) & 0XFF);
 361:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (g_at_update_record.block_num != block_seq)
 362:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 363:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("Download wrong,we need block %X, but rx %X:",(int)g_at_update_record.block_num, (
 364:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_UNEXPECT_PACKET;
 365:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 366:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     SOTA_LOG("off:%lx size:%x ",g_at_update_record.block_offset,head->data_len);
 367:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret = g_storage_device->write_software(g_storage_device, g_at_update_record.block_offset,(const
 368:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (ret != SOTA_OK)
 369:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 370:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("write software failed. ret:%d", ret);
 371:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_DOWNLOAD_STATE, DEV_NO_SPACE);
 372:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_WRITE_FLASH_FAILED;
 373:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 374:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 375:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_offset += g_at_update_record.block_size;
 376:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_tolen += head->data_len;
 377:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_num++;
 378:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 9


 379:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if ((g_at_update_record.block_num) < g_at_update_record.block_totalnum)
 380:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 381:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     	SOTA_LOG("Rx total %d bytes downloading\r\n", g_at_update_record.block_tolen);
 382:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     	sota_send_request_block(g_at_update_record.ver);
 383:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_DOWNLOADING;
 384:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     } 
 385:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     else
 386:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     { 
 387:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("Rx total %d bytes, UPDATING...\r\n", g_at_update_record.block_tolen);
 388:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         ret = g_storage_device->write_software_end(g_storage_device, PACK_DOWNLOAD_OK, g_at_update_
 389:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (ret != SOTA_OK)
 390:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 391:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             SOTA_LOG("write software end ret:%d", ret);
 392:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             sota_send_response_code(MSG_DOWNLOAD_STATE, FIRMWARE_CHECK_ERROR);
 393:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_WRITE_FLASH_FAILED;
 394:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 395:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         else
 396:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 397:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             g_at_update_record.state = UPDATING;
 398:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             sota_send_response_code(MSG_DOWNLOAD_STATE, DEV_OK);
 399:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_UPDATING;
 400:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 401:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     } 
 402:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 403:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 404:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static int32_t sota_update_exc_process(const ota_pcp_head_s *head, const uint8_t *pbuf)
 405:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 406:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int ret = SOTA_OK;
 407:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 408:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     SOTA_LOG("Begin excute update");
 409:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (g_at_update_record.state != UPDATING)
 410:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 411:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_UNEXPECT_PACKET;
 412:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 413:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****    
 414:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret = g_storage_device->active_software(g_storage_device);
 415:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (ret != SOTA_OK)
 416:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 417:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("Active software failed ret:%d.", ret);
 418:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DEV_INNER_ERROR);
 419:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_WRITE_FLASH_FAILED;
 420:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 421:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     else
 422:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 423:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         g_at_update_record.state = UPDATED;
 424:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****        (void)flag_write(FLAG_APP, (void*)&g_at_update_record, sizeof(sota_update_info_t));
 425:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DEV_OK);
 426:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_UPDATED;
 427:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 428:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 429:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** int32_t sota_process(void *arg, const int8_t *buf, int32_t buflen)
 430:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 431:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char sbuf[64] = {0};
 432:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     const uint8_t *pbuf = NULL;
 433:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int ret = SOTA_OK;
 434:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ota_pcp_head_s *phead;
 435:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     unsigned char  msg_code;
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 10


 436:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 437:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     phead =(ota_pcp_head_s *)buf;
 438:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     msg_code = phead->msg_code;
 439:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 440:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (phead->data_len > 0)
 441:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 442:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         pbuf = (uint8_t *)buf + VER_LEN/2;
 443:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 444:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 445:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     SOTA_LOG("process sota msg %d", msg_code);
 446:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 447:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     switch (msg_code)
 448:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 449:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         case MSG_GET_VER:
 450:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         { 
 451:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             char ver_ret[VER_LEN + 1] = {0};
 452:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)g_flash_op.get_ver(ver_ret+1, VER_LEN);
 453:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)ver_to_hex(ver_ret, (VER_LEN + 1), (char *)sbuf);
 454:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)sota_at_send(MSG_GET_VER, (char *)sbuf, (VER_LEN + 1) * 2);
 455:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             ret = SOTA_OK;
 456:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             break;
 457:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 458:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         case MSG_NOTIFY_NEW_VER:
 459:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 460:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             if (phead->data_len > sizeof(ota_ver_notify_t))
 461:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             {
 462:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****                ret = sota_new_ver_process(phead, pbuf);
 463:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             }
 464:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             else
 465:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             {
 466:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****                 ret = SOTA_INVALID_PACKET;
 467:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             }
 468:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             break;
 469:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }  
 470:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         case MSG_GET_BLOCK:
 471:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 472:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             if (phead->data_len > 0)
 473:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             {
 474:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****                ret = sota_data_block_process(phead, pbuf);
 475:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             }
 476:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             else
 477:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             {
 478:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****                 ret = SOTA_INVALID_PACKET;
 479:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             }
 480:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             break;
 481:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 482:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         case MSG_EXC_UPDATE:
 483:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 484:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****              ret = sota_update_exc_process(phead, pbuf);
 485:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****              break;
 486:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 487:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         default:
 488:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 489:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             SOTA_LOG("Rx invalid packet");
 490:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             ret = SOTA_INVALID_PACKET;
 491:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             break;
 492:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 11


 493:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 494:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return ret;
 495:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 496:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 497:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** void sota_timeout_handler(void)
 498:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 499:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (g_at_update_record.state == DOWNLOADING)
 500:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 501:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("Download block %d over time", g_at_update_record.block_num);
 502:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DOWNLOAD_TIME_OUT);
 503:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_request_block(g_at_update_record.ver);
 504:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 505:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     else if (g_at_update_record.state == UPDATING)
 506:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 507:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("Download finish. excute over time");
 508:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DOWNLOAD_TIME_OUT);
 509:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_DOWNLOAD_STATE, DEV_OK);
 510:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 511:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 512:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 513:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static int sota_status_check(void)
 514:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 515:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     upgrade_state_e state;
 516:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char sbuf[64] = {0};
 517:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char tmpbuf[VER_LEN+1] = {0};
 518:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 519:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memset(&g_at_update_record, 0, sizeof(sota_update_info_t));
 520:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (flag_read(FLAG_APP, (char*)&g_at_update_record, sizeof(sota_update_info_t)))
 521:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 522:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("flag read err");
 523:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_FAILED;
 524:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 525:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     SOTA_LOG("state:%d flash ver:%s",g_at_update_record.state, g_at_update_record.ver);
 526:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 527:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (g_flash_op.firmware_download_stage == BOOTLOADER
 528:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         && g_flash_op.current_run_stage == BOOTLOADER)
 529:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 530:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (g_at_update_record.state == DOWNLOADING)
 531:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 532:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             sota_send_request_block(g_at_update_record.ver);
 533:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_DOWNLOADING;
 534:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 535:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 536:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     else
 537:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 538:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 	    (void)flag_upgrade_get_result(&state);
 539:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("upgrade result: %d", state);
 540:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (state == OTA_SUCCEED)
 541:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 542:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             SOTA_LOG("Update version %s success", g_at_update_record.ver);
 543:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             memcpy(tmpbuf + 1, g_at_update_record.ver, VER_LEN);
 544:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)ver_to_hex(tmpbuf, VER_LEN+1, sbuf);
 545:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)sota_at_send(MSG_NOTIFY_STATE, sbuf, (VER_LEN+1) * 2);
 546:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 547:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 548:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 549:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memset(&g_at_update_record, 0, sizeof(sota_update_info_t));
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 12


 550:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)flag_write(FLAG_APP, (const void*)&g_at_update_record, sizeof(sota_update_info_t));
 551:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return SOTA_OK;
 552:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 553:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 554:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static int func_flag_read(void *buf, int32_t len)
 555:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
  81              		.loc 1 555 0
  82              		.cfi_startproc
  83              		@ args = 0, pretend = 0, frame = 0
  84              		@ frame_needed = 0, uses_anonymous_args = 0
  85              	.LVL7:
  86 0000 10B5     		push	{r4, lr}
  87              	.LCFI2:
  88              		.cfi_def_cfa_offset 8
  89              		.cfi_offset 4, -8
  90              		.cfi_offset 14, -4
 556:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return g_flash_op.ota_info.read_flash(OTA_UPDATE_INFO,buf, len, 0);
  91              		.loc 1 556 0
  92 0002 044B     		ldr	r3, .L7
  93 0004 9C69     		ldr	r4, [r3, #24]
  94 0006 0023     		movs	r3, #0
  95 0008 0A46     		mov	r2, r1
  96 000a 0146     		mov	r1, r0
  97              	.LVL8:
  98 000c 0220     		movs	r0, #2
  99              	.LVL9:
 100 000e A047     		blx	r4
 101              	.LVL10:
 557:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 102              		.loc 1 557 0
 103 0010 10BD     		pop	{r4, pc}
 104              	.L8:
 105 0012 00BF     		.align	2
 106              	.L7:
 107 0014 00000000 		.word	g_flash_op
 108              		.cfi_endproc
 109              	.LFE16:
 111              		.section	.text.func_flag_write,"ax",%progbits
 112              		.align	1
 113              		.syntax unified
 114              		.thumb
 115              		.thumb_func
 116              		.fpu fpv4-sp-d16
 118              	func_flag_write:
 119              	.LFB17:
 558:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 559:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** static int func_flag_write(const void *buf, int32_t len)
 560:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 120              		.loc 1 560 0
 121              		.cfi_startproc
 122              		@ args = 0, pretend = 0, frame = 0
 123              		@ frame_needed = 0, uses_anonymous_args = 0
 124              	.LVL11:
 125 0000 10B5     		push	{r4, lr}
 126              	.LCFI3:
 127              		.cfi_def_cfa_offset 8
 128              		.cfi_offset 4, -8
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 13


 129              		.cfi_offset 14, -4
 561:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return g_flash_op.ota_info.write_flash(OTA_UPDATE_INFO,buf, len, 0);
 130              		.loc 1 561 0
 131 0002 044B     		ldr	r3, .L11
 132 0004 DC69     		ldr	r4, [r3, #28]
 133 0006 0023     		movs	r3, #0
 134 0008 0A46     		mov	r2, r1
 135 000a 0146     		mov	r1, r0
 136              	.LVL12:
 137 000c 0220     		movs	r0, #2
 138              	.LVL13:
 139 000e A047     		blx	r4
 140              	.LVL14:
 562:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 141              		.loc 1 562 0
 142 0010 10BD     		pop	{r4, pc}
 143              	.L12:
 144 0012 00BF     		.align	2
 145              	.L11:
 146 0014 00000000 		.word	g_flash_op
 147              		.cfi_endproc
 148              	.LFE17:
 150              		.section	.text.ver_to_hex,"ax",%progbits
 151              		.align	1
 152              		.syntax unified
 153              		.thumb
 154              		.thumb_func
 155              		.fpu fpv4-sp-d16
 157              	ver_to_hex:
 158              	.LFB5:
 216:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int i = 0;
 159              		.loc 1 216 0
 160              		.cfi_startproc
 161              		@ args = 0, pretend = 0, frame = 0
 162              		@ frame_needed = 0, uses_anonymous_args = 0
 163              	.LVL15:
 218:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 164              		.loc 1 218 0
 165 0000 98B1     		cbz	r0, .L17
 216:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int i = 0;
 166              		.loc 1 216 0 discriminator 1
 167 0002 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 168              	.LCFI4:
 169              		.cfi_def_cfa_offset 24
 170              		.cfi_offset 3, -24
 171              		.cfi_offset 4, -20
 172              		.cfi_offset 5, -16
 173              		.cfi_offset 6, -12
 174              		.cfi_offset 7, -8
 175              		.cfi_offset 14, -4
 176 0004 0746     		mov	r7, r0
 218:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 177              		.loc 1 218 0 discriminator 1
 178 0006 0029     		cmp	r1, #0
 179 0008 12DD     		ble	.L18
 218:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 180              		.loc 1 218 0 is_stmt 0 discriminator 2
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 14


 181 000a A2B1     		cbz	r2, .L19
 182 000c 1646     		mov	r6, r2
 183 000e 0D46     		mov	r5, r1
 222:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 184              		.loc 1 222 0 is_stmt 1
 185 0010 0024     		movs	r4, #0
 186 0012 06E0     		b	.L15
 187              	.LVL16:
 188              	.L16:
 224:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 189              		.loc 1 224 0 discriminator 3
 190 0014 3A5D     		ldrb	r2, [r7, r4]	@ zero_extendqisi2
 191 0016 0949     		ldr	r1, .L24
 192 0018 06EB4400 		add	r0, r6, r4, lsl #1
 193 001c FFF7FEFF 		bl	sprintf
 194              	.LVL17:
 222:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 195              		.loc 1 222 0 discriminator 3
 196 0020 0134     		adds	r4, r4, #1
 197              	.LVL18:
 198              	.L15:
 222:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 199              		.loc 1 222 0 is_stmt 0 discriminator 1
 200 0022 AC42     		cmp	r4, r5
 201 0024 F6DB     		blt	.L16
 226:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 202              		.loc 1 226 0 is_stmt 1
 203 0026 0020     		movs	r0, #0
 204              	.LVL19:
 205              	.L13:
 227:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 206              		.loc 1 227 0
 207 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 208              	.LVL20:
 209              	.L17:
 210              	.LCFI5:
 211              		.cfi_def_cfa_offset 0
 212              		.cfi_restore 3
 213              		.cfi_restore 4
 214              		.cfi_restore 5
 215              		.cfi_restore 6
 216              		.cfi_restore 7
 217              		.cfi_restore 14
 220:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 218              		.loc 1 220 0
 219 002a 4FF0FF30 		mov	r0, #-1
 220              	.LVL21:
 227:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 221              		.loc 1 227 0
 222 002e 7047     		bx	lr
 223              	.LVL22:
 224              	.L18:
 225              	.LCFI6:
 226              		.cfi_def_cfa_offset 24
 227              		.cfi_offset 3, -24
 228              		.cfi_offset 4, -20
 229              		.cfi_offset 5, -16
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 15


 230              		.cfi_offset 6, -12
 231              		.cfi_offset 7, -8
 232              		.cfi_offset 14, -4
 220:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 233              		.loc 1 220 0
 234 0030 4FF0FF30 		mov	r0, #-1
 235              	.LVL23:
 236 0034 F8E7     		b	.L13
 237              	.LVL24:
 238              	.L19:
 239 0036 4FF0FF30 		mov	r0, #-1
 240              	.LVL25:
 241 003a F5E7     		b	.L13
 242              	.L25:
 243              		.align	2
 244              	.L24:
 245 003c 00000000 		.word	.LC0
 246              		.cfi_endproc
 247              	.LFE5:
 249              		.section	.text.sota_at_send,"ax",%progbits
 250              		.align	1
 251              		.syntax unified
 252              		.thumb
 253              		.thumb_func
 254              		.fpu fpv4-sp-d16
 256              	sota_at_send:
 257              	.LFB6:
 230:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint32_t ret;
 258              		.loc 1 230 0
 259              		.cfi_startproc
 260              		@ args = 0, pretend = 0, frame = 368
 261              		@ frame_needed = 0, uses_anonymous_args = 0
 262              	.LVL26:
 263 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 264              	.LCFI7:
 265              		.cfi_def_cfa_offset 24
 266              		.cfi_offset 4, -24
 267              		.cfi_offset 5, -20
 268              		.cfi_offset 6, -16
 269              		.cfi_offset 7, -12
 270              		.cfi_offset 8, -8
 271              		.cfi_offset 14, -4
 272 0004 DCB0     		sub	sp, sp, #368
 273              	.LCFI8:
 274              		.cfi_def_cfa_offset 392
 275 0006 8046     		mov	r8, r0
 276 0008 0F46     		mov	r7, r1
 277 000a 1546     		mov	r5, r2
 232:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char tmpbuf[SEND_BUF_LEN + VER_LEN] = {0};
 278              		.loc 1 232 0
 279 000c 0024     		movs	r4, #0
 280 000e 5A94     		str	r4, [sp, #360]
 281 0010 8DF86C41 		strb	r4, [sp, #364]
 233:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ota_pcp_head_s pcp_head = {0};
 282              		.loc 1 233 0
 283 0014 9026     		movs	r6, #144
 284 0016 3246     		mov	r2, r6
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 16


 285              	.LVL27:
 286 0018 2146     		mov	r1, r4
 287              	.LVL28:
 288 001a 36A8     		add	r0, sp, #216
 289              	.LVL29:
 290 001c FFF7FEFF 		bl	memset
 291              	.LVL30:
 234:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     unsigned char atwbuf[SEND_BUF_LEN + VER_LEN] = {0};
 292              		.loc 1 234 0
 293 0020 3494     		str	r4, [sp, #208]
 294 0022 3594     		str	r4, [sp, #212]
 235:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     unsigned char hbuf[64] = {0};
 295              		.loc 1 235 0
 296 0024 3246     		mov	r2, r6
 297 0026 2146     		mov	r1, r4
 298 0028 10A8     		add	r0, sp, #64
 299 002a FFF7FEFF 		bl	memset
 300              	.LVL31:
 236:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (len >= SEND_BUF_LEN)
 301              		.loc 1 236 0
 302 002e 4022     		movs	r2, #64
 303 0030 2146     		mov	r1, r4
 304 0032 6846     		mov	r0, sp
 305 0034 FFF7FEFF 		bl	memset
 306              	.LVL32:
 237:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 307              		.loc 1 237 0
 308 0038 7F2D     		cmp	r5, #127
 309 003a 0BDD     		ble	.L27
 239:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_FAILED;
 310              		.loc 1 239 0
 311 003c 244B     		ldr	r3, .L31
 312 003e 1B69     		ldr	r3, [r3, #16]
 313 0040 002B     		cmp	r3, #0
 314 0042 43D0     		beq	.L29
 239:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_FAILED;
 315              		.loc 1 239 0 is_stmt 0 discriminator 1
 316 0044 EF22     		movs	r2, #239
 317 0046 2349     		ldr	r1, .L31+4
 318 0048 2348     		ldr	r0, .L31+8
 319 004a 9847     		blx	r3
 320              	.LVL33:
 240:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 321              		.loc 1 240 0 is_stmt 1 discriminator 1
 322 004c 6520     		movs	r0, #101
 323              	.LVL34:
 324              	.L26:
 257:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 325              		.loc 1 257 0
 326 004e 5CB0     		add	sp, sp, #368
 327              	.LCFI9:
 328              		.cfi_remember_state
 329              		.cfi_def_cfa_offset 24
 330              		@ sp needed
 331 0050 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 332              	.LVL35:
 333              	.L27:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 17


 334              	.LCFI10:
 335              		.cfi_restore_state
 242:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pcp_head.ver_num = 1;
 336              		.loc 1 242 0
 337 0054 4FF6FF63 		movw	r3, #65279
 338 0058 ADF8D030 		strh	r3, [sp, #208]	@ movhi
 243:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pcp_head.msg_code = msg_code;
 339              		.loc 1 243 0
 340 005c 0123     		movs	r3, #1
 341 005e 8DF8D230 		strb	r3, [sp, #210]
 244:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pcp_head.data_len = htons_ota(len / 2);
 342              		.loc 1 244 0
 343 0062 8DF8D380 		strb	r8, [sp, #211]
 245:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)ver_to_hex((const char *)&pcp_head, sizeof(ota_pcp_head_s), (char *)hbuf);
 344              		.loc 1 245 0
 345 0066 05EBD573 		add	r3, r5, r5, lsr #31
 346 006a 5A10     		asrs	r2, r3, #1
 347 006c C3F34723 		ubfx	r3, r3, #9, #8
 348 0070 43EA0223 		orr	r3, r3, r2, lsl #8
 349 0074 ADF8D630 		strh	r3, [sp, #214]	@ movhi
 246:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 350              		.loc 1 246 0
 351 0078 6E46     		mov	r6, sp
 352 007a 3246     		mov	r2, r6
 353 007c 0821     		movs	r1, #8
 354 007e 34A8     		add	r0, sp, #208
 355 0080 FFF7FEFF 		bl	ver_to_hex
 356              	.LVL36:
 248:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memcpy(atwbuf + VER_LEN, buf, len);
 357              		.loc 1 248 0
 358 0084 10AC     		add	r4, sp, #64
 359 0086 96E80F00 		ldm	r6, {r0, r1, r2, r3}
 360 008a 84E80F00 		stm	r4, {r0, r1, r2, r3}
 249:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 361              		.loc 1 249 0
 362 008e 2A46     		mov	r2, r5
 363 0090 3946     		mov	r1, r7
 364 0092 14A8     		add	r0, sp, #80
 365 0094 FFF7FEFF 		bl	memcpy
 366              	.LVL37:
 251:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret = (uint32_t)crc_check((unsigned char*)tmpbuf, (len + VER_LEN) / 2);
 367              		.loc 1 251 0
 368 0098 1035     		adds	r5, r5, #16
 369              	.LVL38:
 370 009a 2A46     		mov	r2, r5
 371 009c 36A9     		add	r1, sp, #216
 372 009e 2046     		mov	r0, r4
 373 00a0 FFF7FEFF 		bl	HexStrToByte
 374              	.LVL39:
 252:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)snprintf(crcretbuf, sizeof(crcretbuf), "%04X", (unsigned int)ret);
 375              		.loc 1 252 0
 376 00a4 05EBD571 		add	r1, r5, r5, lsr #31
 377 00a8 4910     		asrs	r1, r1, #1
 378 00aa 36A8     		add	r0, sp, #216
 379 00ac FFF7FEFF 		bl	crc_check
 380              	.LVL40:
 253:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 18


 381              		.loc 1 253 0
 382 00b0 0346     		mov	r3, r0
 383 00b2 0A4A     		ldr	r2, .L31+12
 384 00b4 0521     		movs	r1, #5
 385 00b6 5AA8     		add	r0, sp, #360
 386              	.LVL41:
 387 00b8 FFF7FEFF 		bl	snprintf
 388              	.LVL42:
 255:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return g_flash_op.sota_send((char *)atwbuf, len + VER_LEN);
 389              		.loc 1 255 0
 390 00bc 5A9B     		ldr	r3, [sp, #360]
 391 00be A360     		str	r3, [r4, #8]
 256:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 392              		.loc 1 256 0
 393 00c0 034B     		ldr	r3, .L31
 394 00c2 5B68     		ldr	r3, [r3, #4]
 395 00c4 2946     		mov	r1, r5
 396 00c6 2046     		mov	r0, r4
 397 00c8 9847     		blx	r3
 398              	.LVL43:
 399 00ca C0E7     		b	.L26
 400              	.LVL44:
 401              	.L29:
 240:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 402              		.loc 1 240 0
 403 00cc 6520     		movs	r0, #101
 404 00ce BEE7     		b	.L26
 405              	.L32:
 406              		.align	2
 407              	.L31:
 408 00d0 00000000 		.word	g_flash_op
 409 00d4 00000000 		.word	.LANCHOR0
 410 00d8 00000000 		.word	.LC1
 411 00dc 1C000000 		.word	.LC2
 412              		.cfi_endproc
 413              	.LFE6:
 415              		.section	.text.sota_send_response_code,"ax",%progbits
 416              		.align	1
 417              		.syntax unified
 418              		.thumb
 419              		.thumb_func
 420              		.fpu fpv4-sp-d16
 422              	sota_send_response_code:
 423              	.LFB8:
 278:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char ret_buf[1];
 424              		.loc 1 278 0
 425              		.cfi_startproc
 426              		@ args = 0, pretend = 0, frame = 8
 427              		@ frame_needed = 0, uses_anonymous_args = 0
 428              	.LVL45:
 429 0000 10B5     		push	{r4, lr}
 430              	.LCFI11:
 431              		.cfi_def_cfa_offset 8
 432              		.cfi_offset 4, -8
 433              		.cfi_offset 14, -4
 434 0002 82B0     		sub	sp, sp, #8
 435              	.LCFI12:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 19


 436              		.cfi_def_cfa_offset 16
 437 0004 0446     		mov	r4, r0
 282:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)ver_to_hex(ret_buf, 1, (char *)sbuf);
 438              		.loc 1 282 0
 439 0006 8DF80410 		strb	r1, [sp, #4]
 283:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)sota_at_send(msg_code, (char *)sbuf, 2);
 440              		.loc 1 283 0
 441 000a 6A46     		mov	r2, sp
 442 000c 0121     		movs	r1, #1
 443              	.LVL46:
 444 000e 01A8     		add	r0, sp, #4
 445              	.LVL47:
 446 0010 FFF7FEFF 		bl	ver_to_hex
 447              	.LVL48:
 284:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 448              		.loc 1 284 0
 449 0014 0222     		movs	r2, #2
 450 0016 6946     		mov	r1, sp
 451 0018 2046     		mov	r0, r4
 452 001a FFF7FEFF 		bl	sota_at_send
 453              	.LVL49:
 285:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 454              		.loc 1 285 0
 455 001e 02B0     		add	sp, sp, #8
 456              	.LCFI13:
 457              		.cfi_def_cfa_offset 8
 458              		@ sp needed
 459 0020 10BD     		pop	{r4, pc}
 460              		.cfi_endproc
 461              	.LFE8:
 463              		.section	.text.sota_send_request_block,"ax",%progbits
 464              		.align	1
 465              		.syntax unified
 466              		.thumb
 467              		.thumb_func
 468              		.fpu fpv4-sp-d16
 470              	sota_send_request_block:
 471              	.LFB7:
 260:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      char ver_ret[VER_LEN + 2] = {0};
 472              		.loc 1 260 0
 473              		.cfi_startproc
 474              		@ args = 0, pretend = 0, frame = 88
 475              		@ frame_needed = 0, uses_anonymous_args = 0
 476              	.LVL50:
 477 0000 30B5     		push	{r4, r5, lr}
 478              	.LCFI14:
 479              		.cfi_def_cfa_offset 12
 480              		.cfi_offset 4, -12
 481              		.cfi_offset 5, -8
 482              		.cfi_offset 14, -4
 483 0002 97B0     		sub	sp, sp, #92
 484              	.LCFI15:
 485              		.cfi_def_cfa_offset 104
 486 0004 0546     		mov	r5, r0
 262:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****  
 487              		.loc 1 262 0
 488 0006 4022     		movs	r2, #64
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 20


 489 0008 0021     		movs	r1, #0
 490 000a 01A8     		add	r0, sp, #4
 491              	.LVL51:
 492 000c FFF7FEFF 		bl	memset
 493              	.LVL52:
 265:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      {
 494              		.loc 1 265 0
 495 0010 0E4B     		ldr	r3, .L40
 496 0012 9B8A     		ldrh	r3, [r3, #20]
 264:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         && g_flash_op.current_run_stage == APPLICATION)
 497              		.loc 1 264 0
 498 0014 012B     		cmp	r3, #1
 499 0016 01D1     		bne	.L39
 500              	.L35:
 275:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 501              		.loc 1 275 0
 502 0018 17B0     		add	sp, sp, #92
 503              	.LCFI16:
 504              		.cfi_remember_state
 505              		.cfi_def_cfa_offset 12
 506              		@ sp needed
 507 001a 30BD     		pop	{r4, r5, pc}
 508              	.LVL53:
 509              	.L39:
 510              	.LCFI17:
 511              		.cfi_restore_state
 270:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      ver_ret[VER_LEN] = (g_at_update_record.block_num >> 8) & 0XFF;
 512              		.loc 1 270 0
 513 001c 11AC     		add	r4, sp, #68
 514 001e 2868     		ldr	r0, [r5]	@ unaligned
 515 0020 6968     		ldr	r1, [r5, #4]	@ unaligned
 516 0022 AA68     		ldr	r2, [r5, #8]	@ unaligned
 517 0024 EB68     		ldr	r3, [r5, #12]	@ unaligned
 518 0026 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 271:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      ver_ret[VER_LEN + 1] = g_at_update_record.block_num & 0XFF;
 519              		.loc 1 271 0
 520 0028 094B     		ldr	r3, .L40+4
 521 002a 5B68     		ldr	r3, [r3, #4]
 522 002c 1A0A     		lsrs	r2, r3, #8
 523 002e 8DF85420 		strb	r2, [sp, #84]
 272:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      (void)ver_to_hex(ver_ret, (VER_LEN + 2), sbuf);
 524              		.loc 1 272 0
 525 0032 8DF85530 		strb	r3, [sp, #85]
 273:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****      (void)sota_at_send(MSG_GET_BLOCK, sbuf, (VER_LEN + 2) * 2);
 526              		.loc 1 273 0
 527 0036 01AA     		add	r2, sp, #4
 528 0038 1221     		movs	r1, #18
 529 003a 11A8     		add	r0, sp, #68
 530 003c FFF7FEFF 		bl	ver_to_hex
 531              	.LVL54:
 274:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 532              		.loc 1 274 0
 533 0040 2422     		movs	r2, #36
 534 0042 01A9     		add	r1, sp, #4
 535 0044 1520     		movs	r0, #21
 536 0046 FFF7FEFF 		bl	sota_at_send
 537              	.LVL55:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 21


 538 004a E5E7     		b	.L35
 539              	.L41:
 540              		.align	2
 541              	.L40:
 542 004c 00000000 		.word	g_flash_op
 543 0050 00000000 		.word	.LANCHOR1
 544              		.cfi_endproc
 545              	.LFE7:
 547              		.section	.text.sota_data_block_process,"ax",%progbits
 548              		.align	1
 549              		.syntax unified
 550              		.thumb
 551              		.thumb_func
 552              		.fpu fpv4-sp-d16
 554              	sota_data_block_process:
 555              	.LFB11:
 345:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint16_t block_seq = 0;
 556              		.loc 1 345 0
 557              		.cfi_startproc
 558              		@ args = 0, pretend = 0, frame = 0
 559              		@ frame_needed = 0, uses_anonymous_args = 0
 560              	.LVL56:
 349:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 561              		.loc 1 349 0
 562 0000 4A4B     		ldr	r3, .L61
 563 0002 93F82830 		ldrb	r3, [r3, #40]	@ zero_extendqisi2
 564 0006 012B     		cmp	r3, #1
 565 0008 40F08B80 		bne	.L54
 354:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 566              		.loc 1 354 0
 567 000c 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 568 000e 802B     		cmp	r3, #128
 569 0010 18D0     		beq	.L59
 345:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     uint16_t block_seq = 0;
 570              		.loc 1 345 0
 571 0012 70B5     		push	{r4, r5, r6, lr}
 572              	.LCFI18:
 573              		.cfi_def_cfa_offset 16
 574              		.cfi_offset 4, -16
 575              		.cfi_offset 5, -12
 576              		.cfi_offset 6, -8
 577              		.cfi_offset 14, -4
 578 0014 82B0     		sub	sp, sp, #8
 579              	.LCFI19:
 580              		.cfi_def_cfa_offset 24
 581 0016 0C46     		mov	r4, r1
 582 0018 0546     		mov	r5, r0
 360:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (g_at_update_record.block_num != block_seq)
 583              		.loc 1 360 0
 584 001a 4B78     		ldrb	r3, [r1, #1]	@ zero_extendqisi2
 585 001c 8A78     		ldrb	r2, [r1, #2]	@ zero_extendqisi2
 586 001e 42EA0322 		orr	r2, r2, r3, lsl #8
 587              	.LVL57:
 361:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 588              		.loc 1 361 0
 589 0022 424B     		ldr	r3, .L61
 590 0024 5B68     		ldr	r3, [r3, #4]
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 22


 591 0026 9342     		cmp	r3, r2
 592 0028 12D0     		beq	.L45
 363:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_UNEXPECT_PACKET;
 593              		.loc 1 363 0
 594 002a 4149     		ldr	r1, .L61+4
 595              	.LVL58:
 596 002c 0C69     		ldr	r4, [r1, #16]
 597              	.LVL59:
 598 002e 002C     		cmp	r4, #0
 599 0030 79D0     		beq	.L55
 363:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_UNEXPECT_PACKET;
 600              		.loc 1 363 0 is_stmt 0 discriminator 1
 601 0032 0092     		str	r2, [sp]
 602 0034 40F26B12 		movw	r2, #363
 603              	.LVL60:
 604 0038 3E49     		ldr	r1, .L61+8
 605 003a 3F48     		ldr	r0, .L61+12
 606              	.LVL61:
 607 003c A047     		blx	r4
 608              	.LVL62:
 364:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 609              		.loc 1 364 0 is_stmt 1 discriminator 1
 610 003e 6820     		movs	r0, #104
 611              	.LVL63:
 612              	.L42:
 402:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 613              		.loc 1 402 0
 614 0040 02B0     		add	sp, sp, #8
 615              	.LCFI20:
 616              		.cfi_def_cfa_offset 16
 617              		@ sp needed
 618 0042 70BD     		pop	{r4, r5, r6, pc}
 619              	.LVL64:
 620              	.L59:
 621              	.LCFI21:
 622              		.cfi_def_cfa_offset 0
 623              		.cfi_restore 4
 624              		.cfi_restore 5
 625              		.cfi_restore 6
 626              		.cfi_restore 14
 356:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_EXIT;
 627              		.loc 1 356 0
 628 0044 394B     		ldr	r3, .L61
 629 0046 0022     		movs	r2, #0
 630 0048 83F82820 		strb	r2, [r3, #40]
 357:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 631              		.loc 1 357 0
 632 004c 6620     		movs	r0, #102
 633              	.LVL65:
 634 004e 7047     		bx	lr
 635              	.LVL66:
 636              	.L45:
 637              	.LCFI22:
 638              		.cfi_def_cfa_offset 24
 639              		.cfi_offset 4, -16
 640              		.cfi_offset 5, -12
 641              		.cfi_offset 6, -8
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 23


 642              		.cfi_offset 14, -4
 366:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret = g_storage_device->write_software(g_storage_device, g_at_update_record.block_offset,(const
 643              		.loc 1 366 0
 644 0050 374B     		ldr	r3, .L61+4
 645 0052 1E69     		ldr	r6, [r3, #16]
 646 0054 46B1     		cbz	r6, .L46
 366:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret = g_storage_device->write_software(g_storage_device, g_at_update_record.block_offset,(const
 647              		.loc 1 366 0 is_stmt 0 discriminator 1
 648 0056 354B     		ldr	r3, .L61
 649 0058 9B68     		ldr	r3, [r3, #8]
 650 005a C288     		ldrh	r2, [r0, #6]
 651              	.LVL67:
 652 005c 0092     		str	r2, [sp]
 653              	.LVL68:
 654 005e 4FF4B772 		mov	r2, #366
 655 0062 3449     		ldr	r1, .L61+8
 656              	.LVL69:
 657 0064 3548     		ldr	r0, .L61+16
 658              	.LVL70:
 659 0066 B047     		blx	r6
 660              	.LVL71:
 661              	.L46:
 367:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (ret != SOTA_OK)
 662              		.loc 1 367 0 is_stmt 1
 663 0068 354B     		ldr	r3, .L61+20
 664 006a 1868     		ldr	r0, [r3]
 665 006c 0668     		ldr	r6, [r0]
 666 006e EB88     		ldrh	r3, [r5, #6]
 667 0070 E21C     		adds	r2, r4, #3
 668 0072 2E49     		ldr	r1, .L61
 669 0074 8968     		ldr	r1, [r1, #8]
 670 0076 B047     		blx	r6
 671              	.LVL72:
 368:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 672              		.loc 1 368 0
 673 0078 0346     		mov	r3, r0
 674 007a D8B9     		cbnz	r0, .L60
 375:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_tolen += head->data_len;
 675              		.loc 1 375 0
 676 007c 2B4A     		ldr	r2, .L61
 677 007e 1188     		ldrh	r1, [r2]
 678 0080 9368     		ldr	r3, [r2, #8]
 679 0082 0B44     		add	r3, r3, r1
 680 0084 9360     		str	r3, [r2, #8]
 376:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_num++;
 681              		.loc 1 376 0
 682 0086 EB88     		ldrh	r3, [r5, #6]
 683 0088 1169     		ldr	r1, [r2, #16]
 684 008a 0B44     		add	r3, r3, r1
 685 008c 1361     		str	r3, [r2, #16]
 377:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 686              		.loc 1 377 0
 687 008e 5168     		ldr	r1, [r2, #4]
 688 0090 0131     		adds	r1, r1, #1
 689 0092 5160     		str	r1, [r2, #4]
 379:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 690              		.loc 1 379 0
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 24


 691 0094 D268     		ldr	r2, [r2, #12]
 692 0096 9142     		cmp	r1, r2
 693 0098 1AD2     		bcs	.L49
 381:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     	sota_send_request_block(g_at_update_record.ver);
 694              		.loc 1 381 0
 695 009a 254A     		ldr	r2, .L61+4
 696 009c 1469     		ldr	r4, [r2, #16]
 697              	.LVL73:
 698 009e 24B1     		cbz	r4, .L50
 381:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     	sota_send_request_block(g_at_update_record.ver);
 699              		.loc 1 381 0 is_stmt 0 discriminator 1
 700 00a0 40F27D12 		movw	r2, #381
 701 00a4 2349     		ldr	r1, .L61+8
 702 00a6 2748     		ldr	r0, .L61+24
 703              	.LVL74:
 704 00a8 A047     		blx	r4
 705              	.LVL75:
 706              	.L50:
 382:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_DOWNLOADING;
 707              		.loc 1 382 0 is_stmt 1
 708 00aa 2748     		ldr	r0, .L61+28
 709 00ac FFF7FEFF 		bl	sota_send_request_block
 710              	.LVL76:
 383:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     } 
 711              		.loc 1 383 0
 712 00b0 0120     		movs	r0, #1
 713 00b2 C5E7     		b	.L42
 714              	.LVL77:
 715              	.L60:
 370:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_DOWNLOAD_STATE, DEV_NO_SPACE);
 716              		.loc 1 370 0
 717 00b4 1E4A     		ldr	r2, .L61+4
 718 00b6 1469     		ldr	r4, [r2, #16]
 719              	.LVL78:
 720 00b8 24B1     		cbz	r4, .L48
 370:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_DOWNLOAD_STATE, DEV_NO_SPACE);
 721              		.loc 1 370 0 is_stmt 0 discriminator 1
 722 00ba 4FF4B972 		mov	r2, #370
 723 00be 1D49     		ldr	r1, .L61+8
 724 00c0 2248     		ldr	r0, .L61+32
 725              	.LVL79:
 726 00c2 A047     		blx	r4
 727              	.LVL80:
 728              	.L48:
 371:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_WRITE_FLASH_FAILED;
 729              		.loc 1 371 0 is_stmt 1
 730 00c4 0521     		movs	r1, #5
 731 00c6 1620     		movs	r0, #22
 732 00c8 FFF7FEFF 		bl	sota_send_response_code
 733              	.LVL81:
 372:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 734              		.loc 1 372 0
 735 00cc 6920     		movs	r0, #105
 736 00ce B7E7     		b	.L42
 737              	.LVL82:
 738              	.L49:
 387:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         ret = g_storage_device->write_software_end(g_storage_device, PACK_DOWNLOAD_OK, g_at_update_
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 25


 739              		.loc 1 387 0
 740 00d0 174A     		ldr	r2, .L61+4
 741 00d2 1469     		ldr	r4, [r2, #16]
 742              	.LVL83:
 743 00d4 24B1     		cbz	r4, .L51
 387:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         ret = g_storage_device->write_software_end(g_storage_device, PACK_DOWNLOAD_OK, g_at_update_
 744              		.loc 1 387 0 is_stmt 0 discriminator 1
 745 00d6 40F28312 		movw	r2, #387
 746 00da 1649     		ldr	r1, .L61+8
 747 00dc 1C48     		ldr	r0, .L61+36
 748              	.LVL84:
 749 00de A047     		blx	r4
 750              	.LVL85:
 751              	.L51:
 388:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (ret != SOTA_OK)
 752              		.loc 1 388 0 is_stmt 1
 753 00e0 174B     		ldr	r3, .L61+20
 754 00e2 1868     		ldr	r0, [r3]
 755 00e4 4368     		ldr	r3, [r0, #4]
 756 00e6 114A     		ldr	r2, .L61
 757 00e8 1269     		ldr	r2, [r2, #16]
 758 00ea 0021     		movs	r1, #0
 759 00ec 9847     		blx	r3
 760              	.LVL86:
 389:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 761              		.loc 1 389 0
 762 00ee 0346     		mov	r3, r0
 763 00f0 68B1     		cbz	r0, .L52
 391:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             sota_send_response_code(MSG_DOWNLOAD_STATE, FIRMWARE_CHECK_ERROR);
 764              		.loc 1 391 0
 765 00f2 0F4A     		ldr	r2, .L61+4
 766 00f4 1469     		ldr	r4, [r2, #16]
 767 00f6 24B1     		cbz	r4, .L53
 391:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             sota_send_response_code(MSG_DOWNLOAD_STATE, FIRMWARE_CHECK_ERROR);
 768              		.loc 1 391 0 is_stmt 0 discriminator 1
 769 00f8 40F28712 		movw	r2, #391
 770 00fc 0D49     		ldr	r1, .L61+8
 771 00fe 1548     		ldr	r0, .L61+40
 772              	.LVL87:
 773 0100 A047     		blx	r4
 774              	.LVL88:
 775              	.L53:
 392:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_WRITE_FLASH_FAILED;
 776              		.loc 1 392 0 is_stmt 1
 777 0102 0721     		movs	r1, #7
 778 0104 1620     		movs	r0, #22
 779 0106 FFF7FEFF 		bl	sota_send_response_code
 780              	.LVL89:
 393:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 781              		.loc 1 393 0
 782 010a 6920     		movs	r0, #105
 783 010c 98E7     		b	.L42
 784              	.LVL90:
 785              	.L52:
 397:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             sota_send_response_code(MSG_DOWNLOAD_STATE, DEV_OK);
 786              		.loc 1 397 0
 787 010e 0224     		movs	r4, #2
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 26


 788 0110 064B     		ldr	r3, .L61
 789 0112 83F82840 		strb	r4, [r3, #40]
 398:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_UPDATING;
 790              		.loc 1 398 0
 791 0116 0021     		movs	r1, #0
 792 0118 1620     		movs	r0, #22
 793              	.LVL91:
 794 011a FFF7FEFF 		bl	sota_send_response_code
 795              	.LVL92:
 399:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 796              		.loc 1 399 0
 797 011e 2046     		mov	r0, r4
 798 0120 8EE7     		b	.L42
 799              	.LVL93:
 800              	.L54:
 801              	.LCFI23:
 802              		.cfi_def_cfa_offset 0
 803              		.cfi_restore 4
 804              		.cfi_restore 5
 805              		.cfi_restore 6
 806              		.cfi_restore 14
 351:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 807              		.loc 1 351 0
 808 0122 6820     		movs	r0, #104
 809              	.LVL94:
 402:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 810              		.loc 1 402 0
 811 0124 7047     		bx	lr
 812              	.LVL95:
 813              	.L55:
 814              	.LCFI24:
 815              		.cfi_def_cfa_offset 24
 816              		.cfi_offset 4, -16
 817              		.cfi_offset 5, -12
 818              		.cfi_offset 6, -8
 819              		.cfi_offset 14, -4
 364:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 820              		.loc 1 364 0
 821 0126 6820     		movs	r0, #104
 822              	.LVL96:
 823 0128 8AE7     		b	.L42
 824              	.L62:
 825 012a 00BF     		.align	2
 826              	.L61:
 827 012c 00000000 		.word	.LANCHOR1
 828 0130 00000000 		.word	g_flash_op
 829 0134 00000000 		.word	.LANCHOR2
 830 0138 00000000 		.word	.LC3
 831 013c 38000000 		.word	.LC4
 832 0140 00000000 		.word	.LANCHOR3
 833 0144 80000000 		.word	.LC6
 834 0148 18000000 		.word	.LANCHOR1+24
 835 014c 54000000 		.word	.LC5
 836 0150 AC000000 		.word	.LC7
 837 0154 D8000000 		.word	.LC8
 838              		.cfi_endproc
 839              	.LFE11:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 27


 841              		.section	.text.sota_reset_record_info,"ax",%progbits
 842              		.align	1
 843              		.syntax unified
 844              		.thumb
 845              		.thumb_func
 846              		.fpu fpv4-sp-d16
 848              	sota_reset_record_info:
 849              	.LFB9:
 288:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_offset = 0;
 850              		.loc 1 288 0
 851              		.cfi_startproc
 852              		@ args = 0, pretend = 0, frame = 0
 853              		@ frame_needed = 0, uses_anonymous_args = 0
 854              	.LVL97:
 855 0000 38B5     		push	{r3, r4, r5, lr}
 856              	.LCFI25:
 857              		.cfi_def_cfa_offset 16
 858              		.cfi_offset 3, -16
 859              		.cfi_offset 4, -12
 860              		.cfi_offset 5, -8
 861              		.cfi_offset 14, -4
 862 0002 0346     		mov	r3, r0
 289:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_size = htons_ota(notify->block_size);
 863              		.loc 1 289 0
 864 0004 104C     		ldr	r4, .L65
 865 0006 0021     		movs	r1, #0
 866 0008 A160     		str	r1, [r4, #8]
 290:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_totalnum = htons_ota(notify->block_totalnum);
 867              		.loc 1 290 0
 868 000a 008A     		ldrh	r0, [r0, #16]
 869              	.LVL98:
 870 000c 020A     		lsrs	r2, r0, #8
 871 000e 42EA0022 		orr	r2, r2, r0, lsl #8
 872 0012 2280     		strh	r2, [r4]	@ movhi
 291:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_num = 0;
 873              		.loc 1 291 0
 874 0014 588A     		ldrh	r0, [r3, #18]
 875 0016 0202     		lsls	r2, r0, #8
 876 0018 92B2     		uxth	r2, r2
 877 001a 42EA1022 		orr	r2, r2, r0, lsr #8
 878 001e E260     		str	r2, [r4, #12]
 292:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.block_tolen = 0;
 879              		.loc 1 292 0
 880 0020 6160     		str	r1, [r4, #4]
 293:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.ver_chk_code = notify->ver_chk_code;
 881              		.loc 1 293 0
 882 0022 2161     		str	r1, [r4, #16]
 294:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memcpy(g_at_update_record.ver, notify->ver, VER_LEN);
 883              		.loc 1 294 0
 884 0024 9A8A     		ldrh	r2, [r3, #20]
 885 0026 6261     		str	r2, [r4, #20]
 295:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_at_update_record.state = DOWNLOADING;
 886              		.loc 1 295 0
 887 0028 04F11805 		add	r5, r4, #24
 888 002c 1868     		ldr	r0, [r3]	@ unaligned
 889 002e 5968     		ldr	r1, [r3, #4]	@ unaligned
 890 0030 9A68     		ldr	r2, [r3, #8]	@ unaligned
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 28


 891 0032 DB68     		ldr	r3, [r3, #12]	@ unaligned
 892              	.LVL99:
 893 0034 0FC5     		stmia	r5!, {r0, r1, r2, r3}
 296:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)flag_write(FLAG_APP, (void*)&g_at_update_record, sizeof(sota_update_info_t));  
 894              		.loc 1 296 0
 895 0036 0120     		movs	r0, #1
 896 0038 84F82800 		strb	r0, [r4, #40]
 297:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 897              		.loc 1 297 0
 898 003c 2C22     		movs	r2, #44
 899 003e 2146     		mov	r1, r4
 900 0040 FFF7FEFF 		bl	flag_write
 901              	.LVL100:
 298:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 902              		.loc 1 298 0
 903 0044 38BD     		pop	{r3, r4, r5, pc}
 904              	.L66:
 905 0046 00BF     		.align	2
 906              	.L65:
 907 0048 00000000 		.word	.LANCHOR1
 908              		.cfi_endproc
 909              	.LFE9:
 911              		.section	.text.sota_new_ver_process,"ax",%progbits
 912              		.align	1
 913              		.syntax unified
 914              		.thumb
 915              		.thumb_func
 916              		.fpu fpv4-sp-d16
 918              	sota_new_ver_process:
 919              	.LFB10:
 301:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char ver[VER_LEN];
 920              		.loc 1 301 0
 921              		.cfi_startproc
 922              		@ args = 0, pretend = 0, frame = 16
 923              		@ frame_needed = 0, uses_anonymous_args = 0
 924              	.LVL101:
 925 0000 30B5     		push	{r4, r5, lr}
 926              	.LCFI26:
 927              		.cfi_def_cfa_offset 12
 928              		.cfi_offset 4, -12
 929              		.cfi_offset 5, -8
 930              		.cfi_offset 14, -4
 931 0002 89B0     		sub	sp, sp, #36
 932              	.LCFI27:
 933              		.cfi_def_cfa_offset 48
 934 0004 0C46     		mov	r4, r1
 935              	.LVL102:
 305:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (strncmp(ver, (const char*)notify->ver, VER_LEN) == 0)
 936              		.loc 1 305 0
 937 0006 3A4B     		ldr	r3, .L81
 938 0008 1B68     		ldr	r3, [r3]
 939 000a 1021     		movs	r1, #16
 940              	.LVL103:
 941 000c 0DEB0100 		add	r0, sp, r1
 942              	.LVL104:
 943 0010 9847     		blx	r3
 944              	.LVL105:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 29


 306:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 945              		.loc 1 306 0
 946 0012 1022     		movs	r2, #16
 947 0014 2146     		mov	r1, r4
 948 0016 0DEB0200 		add	r0, sp, r2
 949 001a FFF7FEFF 		bl	strncmp
 950              	.LVL106:
 951 001e 90B9     		cbnz	r0, .L68
 308:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_NOTIFY_NEW_VER, DEV_LATEST_VER);
 952              		.loc 1 308 0
 953 0020 334B     		ldr	r3, .L81
 954 0022 1D69     		ldr	r5, [r3, #16]
 955 0024 2DB1     		cbz	r5, .L69
 308:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_NOTIFY_NEW_VER, DEV_LATEST_VER);
 956              		.loc 1 308 0 is_stmt 0 discriminator 1
 957 0026 2346     		mov	r3, r4
 958 0028 4FF49A72 		mov	r2, #308
 959 002c 3149     		ldr	r1, .L81+4
 960 002e 3248     		ldr	r0, .L81+8
 961 0030 A847     		blx	r5
 962              	.LVL107:
 963              	.L69:
 309:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         g_at_update_record.state = IDLE;
 964              		.loc 1 309 0 is_stmt 1
 965 0032 0321     		movs	r1, #3
 966 0034 1420     		movs	r0, #20
 967 0036 FFF7FEFF 		bl	sota_send_response_code
 968              	.LVL108:
 310:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_OK;
 969              		.loc 1 310 0
 970 003a 0020     		movs	r0, #0
 971 003c 2F4B     		ldr	r3, .L81+12
 972 003e 83F82800 		strb	r0, [r3, #40]
 973              	.L67:
 342:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 974              		.loc 1 342 0
 975 0042 09B0     		add	sp, sp, #36
 976              	.LCFI28:
 977              		.cfi_remember_state
 978              		.cfi_def_cfa_offset 12
 979              		@ sp needed
 980 0044 30BD     		pop	{r4, r5, pc}
 981              	.LVL109:
 982              	.L68:
 983              	.LCFI29:
 984              		.cfi_restore_state
 314:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         g_at_update_record.ver,g_at_update_record.ver_chk_code);
 985              		.loc 1 314 0
 986 0046 2A4B     		ldr	r3, .L81
 987 0048 1D69     		ldr	r5, [r3, #16]
 988 004a 65B1     		cbz	r5, .L71
 314:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         g_at_update_record.ver,g_at_update_record.ver_chk_code);
 989              		.loc 1 314 0 is_stmt 0 discriminator 1
 990 004c A28A     		ldrh	r2, [r4, #20]
 991 004e 2B4B     		ldr	r3, .L81+12
 992 0050 5969     		ldr	r1, [r3, #20]
 993 0052 0291     		str	r1, [sp, #8]
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 30


 994 0054 1833     		adds	r3, r3, #24
 995 0056 0193     		str	r3, [sp, #4]
 996 0058 0092     		str	r2, [sp]
 997 005a 2346     		mov	r3, r4
 998 005c 40F23B12 		movw	r2, #315
 999 0060 2449     		ldr	r1, .L81+4
 1000 0062 2748     		ldr	r0, .L81+16
 1001 0064 A847     		blx	r5
 1002              	.LVL110:
 1003              	.L71:
 316:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         && (notify->ver_chk_code == g_at_update_record.ver_chk_code))
 1004              		.loc 1 316 0 is_stmt 1
 1005 0066 1022     		movs	r2, #16
 1006 0068 2146     		mov	r1, r4
 1007 006a 2648     		ldr	r0, .L81+20
 1008 006c FFF7FEFF 		bl	strncmp
 1009              	.LVL111:
 1010 0070 20B9     		cbnz	r0, .L72
 317:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1011              		.loc 1 317 0
 1012 0072 A28A     		ldrh	r2, [r4, #20]
 1013 0074 214B     		ldr	r3, .L81+12
 1014 0076 5B69     		ldr	r3, [r3, #20]
 1015 0078 9A42     		cmp	r2, r3
 1016 007a 07D0     		beq	.L78
 1017              	.L72:
 339:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     sota_send_request_block((char*)notify->ver);
 1018              		.loc 1 339 0
 1019 007c 2046     		mov	r0, r4
 1020 007e FFF7FEFF 		bl	sota_reset_record_info
 1021              	.LVL112:
 340:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return SOTA_DOWNLOADING;
 1022              		.loc 1 340 0
 1023 0082 2046     		mov	r0, r4
 1024 0084 FFF7FEFF 		bl	sota_send_request_block
 1025              	.LVL113:
 341:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 1026              		.loc 1 341 0
 1027 0088 0120     		movs	r0, #1
 1028 008a DAE7     		b	.L67
 1029              	.L78:
 319:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (g_at_update_record.block_num < g_at_update_record.block_totalnum
 1030              		.loc 1 319 0
 1031 008c 184B     		ldr	r3, .L81
 1032 008e 1D69     		ldr	r5, [r3, #16]
 1033 0090 4DB1     		cbz	r5, .L73
 319:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (g_at_update_record.block_num < g_at_update_record.block_totalnum
 1034              		.loc 1 319 0 is_stmt 0 discriminator 1
 1035 0092 1A4A     		ldr	r2, .L81+12
 1036 0094 92F82830 		ldrb	r3, [r2, #40]	@ zero_extendqisi2
 1037 0098 5268     		ldr	r2, [r2, #4]
 1038 009a 0092     		str	r2, [sp]
 1039 009c 40F23F12 		movw	r2, #319
 1040 00a0 1449     		ldr	r1, .L81+4
 1041 00a2 1948     		ldr	r0, .L81+24
 1042 00a4 A847     		blx	r5
 1043              	.LVL114:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 31


 1044              	.L73:
 320:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             && g_at_update_record.state == DOWNLOADING)
 1045              		.loc 1 320 0 is_stmt 1
 1046 00a6 154B     		ldr	r3, .L81+12
 1047 00a8 5A68     		ldr	r2, [r3, #4]
 1048 00aa DB68     		ldr	r3, [r3, #12]
 1049 00ac 9A42     		cmp	r2, r3
 1050 00ae 04D2     		bcs	.L74
 321:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 1051              		.loc 1 321 0
 1052 00b0 1249     		ldr	r1, .L81+12
 1053 00b2 91F82810 		ldrb	r1, [r1, #40]	@ zero_extendqisi2
 1054 00b6 0129     		cmp	r1, #1
 1055 00b8 0AD0     		beq	.L79
 1056              	.L74:
 326:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             && g_at_update_record.state == UPDATING)
 1057              		.loc 1 326 0
 1058 00ba 9A42     		cmp	r2, r3
 1059 00bc 0DD0     		beq	.L80
 1060              	.L75:
 332:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             && g_at_update_record.state == UPDATED)
 1061              		.loc 1 332 0
 1062 00be 9A42     		cmp	r2, r3
 1063 00c0 DCD1     		bne	.L72
 333:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 1064              		.loc 1 333 0
 1065 00c2 0E4B     		ldr	r3, .L81+12
 1066 00c4 93F82830 		ldrb	r3, [r3, #40]	@ zero_extendqisi2
 1067 00c8 032B     		cmp	r3, #3
 1068 00ca D7D1     		bne	.L72
 335:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 1069              		.loc 1 335 0
 1070 00cc 0320     		movs	r0, #3
 1071 00ce B8E7     		b	.L67
 1072              	.L79:
 323:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_DOWNLOADING;
 1073              		.loc 1 323 0
 1074 00d0 2046     		mov	r0, r4
 1075 00d2 FFF7FEFF 		bl	sota_send_request_block
 1076              	.LVL115:
 324:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 1077              		.loc 1 324 0
 1078 00d6 0120     		movs	r0, #1
 1079 00d8 B3E7     		b	.L67
 1080              	.L80:
 327:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 1081              		.loc 1 327 0
 1082 00da 0849     		ldr	r1, .L81+12
 1083 00dc 91F82810 		ldrb	r1, [r1, #40]	@ zero_extendqisi2
 1084 00e0 0229     		cmp	r1, #2
 1085 00e2 ECD1     		bne	.L75
 329:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_UPDATING;
 1086              		.loc 1 329 0
 1087 00e4 0021     		movs	r1, #0
 1088 00e6 1620     		movs	r0, #22
 1089 00e8 FFF7FEFF 		bl	sota_send_response_code
 1090              	.LVL116:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 32


 330:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 1091              		.loc 1 330 0
 1092 00ec 0220     		movs	r0, #2
 1093 00ee A8E7     		b	.L67
 1094              	.L82:
 1095              		.align	2
 1096              	.L81:
 1097 00f0 00000000 		.word	g_flash_op
 1098 00f4 00000000 		.word	.LANCHOR4
 1099 00f8 00000000 		.word	.LC9
 1100 00fc 00000000 		.word	.LANCHOR1
 1101 0100 28000000 		.word	.LC10
 1102 0104 18000000 		.word	.LANCHOR1+24
 1103 0108 58000000 		.word	.LC11
 1104              		.cfi_endproc
 1105              	.LFE10:
 1107              		.section	.text.sota_update_exc_process,"ax",%progbits
 1108              		.align	1
 1109              		.syntax unified
 1110              		.thumb
 1111              		.thumb_func
 1112              		.fpu fpv4-sp-d16
 1114              	sota_update_exc_process:
 1115              	.LFB12:
 405:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int ret = SOTA_OK;
 1116              		.loc 1 405 0
 1117              		.cfi_startproc
 1118              		@ args = 0, pretend = 0, frame = 0
 1119              		@ frame_needed = 0, uses_anonymous_args = 0
 1120              	.LVL117:
 1121 0000 10B5     		push	{r4, lr}
 1122              	.LCFI30:
 1123              		.cfi_def_cfa_offset 8
 1124              		.cfi_offset 4, -8
 1125              		.cfi_offset 14, -4
 1126              	.LVL118:
 408:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (g_at_update_record.state != UPDATING)
 1127              		.loc 1 408 0
 1128 0002 184B     		ldr	r3, .L90
 1129 0004 1B69     		ldr	r3, [r3, #16]
 1130 0006 23B1     		cbz	r3, .L84
 408:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (g_at_update_record.state != UPDATING)
 1131              		.loc 1 408 0 is_stmt 0 discriminator 1
 1132 0008 4FF4CC72 		mov	r2, #408
 1133 000c 1649     		ldr	r1, .L90+4
 1134              	.LVL119:
 1135 000e 1748     		ldr	r0, .L90+8
 1136              	.LVL120:
 1137 0010 9847     		blx	r3
 1138              	.LVL121:
 1139              	.L84:
 409:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1140              		.loc 1 409 0 is_stmt 1
 1141 0012 174B     		ldr	r3, .L90+12
 1142 0014 93F82830 		ldrb	r3, [r3, #40]	@ zero_extendqisi2
 1143 0018 022B     		cmp	r3, #2
 1144 001a 21D1     		bne	.L88
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 33


 414:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (ret != SOTA_OK)
 1145              		.loc 1 414 0
 1146 001c 154B     		ldr	r3, .L90+16
 1147 001e 1868     		ldr	r0, [r3]
 1148 0020 8368     		ldr	r3, [r0, #8]
 1149 0022 9847     		blx	r3
 1150              	.LVL122:
 415:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1151              		.loc 1 415 0
 1152 0024 0346     		mov	r3, r0
 1153 0026 68B1     		cbz	r0, .L86
 417:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DEV_INNER_ERROR);
 1154              		.loc 1 417 0
 1155 0028 0E4A     		ldr	r2, .L90
 1156 002a 1469     		ldr	r4, [r2, #16]
 1157 002c 24B1     		cbz	r4, .L87
 417:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DEV_INNER_ERROR);
 1158              		.loc 1 417 0 is_stmt 0 discriminator 1
 1159 002e 40F2A112 		movw	r2, #417
 1160 0032 0D49     		ldr	r1, .L90+4
 1161 0034 1048     		ldr	r0, .L90+20
 1162              	.LVL123:
 1163 0036 A047     		blx	r4
 1164              	.LVL124:
 1165              	.L87:
 418:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_WRITE_FLASH_FAILED;
 1166              		.loc 1 418 0 is_stmt 1
 1167 0038 7F21     		movs	r1, #127
 1168 003a 1720     		movs	r0, #23
 1169 003c FFF7FEFF 		bl	sota_send_response_code
 1170              	.LVL125:
 419:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 1171              		.loc 1 419 0
 1172 0040 6920     		movs	r0, #105
 1173              	.L83:
 428:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** int32_t sota_process(void *arg, const int8_t *buf, int32_t buflen)
 1174              		.loc 1 428 0
 1175 0042 10BD     		pop	{r4, pc}
 1176              	.LVL126:
 1177              	.L86:
 423:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****        (void)flag_write(FLAG_APP, (void*)&g_at_update_record, sizeof(sota_update_info_t));
 1178              		.loc 1 423 0
 1179 0044 0A49     		ldr	r1, .L90+12
 1180 0046 0324     		movs	r4, #3
 1181 0048 81F82840 		strb	r4, [r1, #40]
 424:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DEV_OK);
 1182              		.loc 1 424 0
 1183 004c 2C22     		movs	r2, #44
 1184 004e 0120     		movs	r0, #1
 1185              	.LVL127:
 1186 0050 FFF7FEFF 		bl	flag_write
 1187              	.LVL128:
 425:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_UPDATED;
 1188              		.loc 1 425 0
 1189 0054 0021     		movs	r1, #0
 1190 0056 1720     		movs	r0, #23
 1191 0058 FFF7FEFF 		bl	sota_send_response_code
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 34


 1192              	.LVL129:
 426:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 1193              		.loc 1 426 0
 1194 005c 2046     		mov	r0, r4
 1195 005e F0E7     		b	.L83
 1196              	.LVL130:
 1197              	.L88:
 411:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 1198              		.loc 1 411 0
 1199 0060 6820     		movs	r0, #104
 1200 0062 EEE7     		b	.L83
 1201              	.L91:
 1202              		.align	2
 1203              	.L90:
 1204 0064 00000000 		.word	g_flash_op
 1205 0068 00000000 		.word	.LANCHOR5
 1206 006c 00000000 		.word	.LC12
 1207 0070 00000000 		.word	.LANCHOR1
 1208 0074 00000000 		.word	.LANCHOR3
 1209 0078 20000000 		.word	.LC13
 1210              		.cfi_endproc
 1211              	.LFE12:
 1213              		.section	.text.sota_status_check,"ax",%progbits
 1214              		.align	1
 1215              		.syntax unified
 1216              		.thumb
 1217              		.thumb_func
 1218              		.fpu fpv4-sp-d16
 1220              	sota_status_check:
 1221              	.LFB15:
 514:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     upgrade_state_e state;
 1222              		.loc 1 514 0
 1223              		.cfi_startproc
 1224              		@ args = 0, pretend = 0, frame = 88
 1225              		@ frame_needed = 0, uses_anonymous_args = 0
 1226 0000 70B5     		push	{r4, r5, r6, lr}
 1227              	.LCFI31:
 1228              		.cfi_def_cfa_offset 16
 1229              		.cfi_offset 4, -16
 1230              		.cfi_offset 5, -12
 1231              		.cfi_offset 6, -8
 1232              		.cfi_offset 14, -4
 1233 0002 98B0     		sub	sp, sp, #96
 1234              	.LCFI32:
 1235              		.cfi_def_cfa_offset 112
 516:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char tmpbuf[VER_LEN+1] = {0};
 1236              		.loc 1 516 0
 1237 0004 4022     		movs	r2, #64
 1238 0006 0021     		movs	r1, #0
 1239 0008 07A8     		add	r0, sp, #28
 1240 000a FFF7FEFF 		bl	memset
 1241              	.LVL131:
 517:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1242              		.loc 1 517 0
 1243 000e 0021     		movs	r1, #0
 1244 0010 0291     		str	r1, [sp, #8]
 1245 0012 0391     		str	r1, [sp, #12]
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 35


 1246 0014 0491     		str	r1, [sp, #16]
 1247 0016 0591     		str	r1, [sp, #20]
 1248 0018 8DF81810 		strb	r1, [sp, #24]
 519:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (flag_read(FLAG_APP, (char*)&g_at_update_record, sizeof(sota_update_info_t)))
 1249              		.loc 1 519 0
 1250 001c 3A4C     		ldr	r4, .L103
 1251 001e 2C25     		movs	r5, #44
 1252 0020 2A46     		mov	r2, r5
 1253 0022 2046     		mov	r0, r4
 1254 0024 FFF7FEFF 		bl	memset
 1255              	.LVL132:
 520:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1256              		.loc 1 520 0
 1257 0028 2A46     		mov	r2, r5
 1258 002a 2146     		mov	r1, r4
 1259 002c 0120     		movs	r0, #1
 1260 002e FFF7FEFF 		bl	flag_read
 1261              	.LVL133:
 1262 0032 60B1     		cbz	r0, .L93
 522:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_FAILED;
 1263              		.loc 1 522 0
 1264 0034 354B     		ldr	r3, .L103+4
 1265 0036 1B69     		ldr	r3, [r3, #16]
 1266 0038 002B     		cmp	r3, #0
 1267 003a 63D0     		beq	.L100
 522:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_FAILED;
 1268              		.loc 1 522 0 is_stmt 0 discriminator 1
 1269 003c 40F20A22 		movw	r2, #522
 1270 0040 3349     		ldr	r1, .L103+8
 1271 0042 3448     		ldr	r0, .L103+12
 1272 0044 9847     		blx	r3
 1273              	.LVL134:
 523:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 1274              		.loc 1 523 0 is_stmt 1 discriminator 1
 1275 0046 6524     		movs	r4, #101
 1276              	.L92:
 552:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1277              		.loc 1 552 0
 1278 0048 2046     		mov	r0, r4
 1279 004a 18B0     		add	sp, sp, #96
 1280              	.LCFI33:
 1281              		.cfi_remember_state
 1282              		.cfi_def_cfa_offset 16
 1283              		@ sp needed
 1284 004c 70BD     		pop	{r4, r5, r6, pc}
 1285              	.L93:
 1286              	.LCFI34:
 1287              		.cfi_restore_state
 1288 004e 0446     		mov	r4, r0
 525:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1289              		.loc 1 525 0
 1290 0050 2E4B     		ldr	r3, .L103+4
 1291 0052 1D69     		ldr	r5, [r3, #16]
 1292 0054 4DB1     		cbz	r5, .L95
 525:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1293              		.loc 1 525 0 is_stmt 0 discriminator 1
 1294 0056 2C4A     		ldr	r2, .L103
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 36


 1295 0058 92F82830 		ldrb	r3, [r2, #40]	@ zero_extendqisi2
 1296 005c 1832     		adds	r2, r2, #24
 1297 005e 0092     		str	r2, [sp]
 1298 0060 40F20D22 		movw	r2, #525
 1299 0064 2A49     		ldr	r1, .L103+8
 1300 0066 2C48     		ldr	r0, .L103+16
 1301 0068 A847     		blx	r5
 1302              	.LVL135:
 1303              	.L95:
 528:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1304              		.loc 1 528 0 is_stmt 1
 1305 006a 284B     		ldr	r3, .L103+4
 1306 006c 9A8A     		ldrh	r2, [r3, #20]
 527:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         && g_flash_op.current_run_stage == BOOTLOADER)
 1307              		.loc 1 527 0
 1308 006e 40F20113 		movw	r3, #257
 1309 0072 9A42     		cmp	r2, r3
 1310 0074 16D1     		bne	.L96
 530:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 1311              		.loc 1 530 0
 1312 0076 244B     		ldr	r3, .L103
 1313 0078 93F82830 		ldrb	r3, [r3, #40]	@ zero_extendqisi2
 1314 007c 012B     		cmp	r3, #1
 1315 007e 0CD0     		beq	.L102
 1316              	.L97:
 549:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)flag_write(FLAG_APP, (const void*)&g_at_update_record, sizeof(sota_update_info_t));
 1317              		.loc 1 549 0
 1318 0080 214D     		ldr	r5, .L103
 1319 0082 2C26     		movs	r6, #44
 1320 0084 3246     		mov	r2, r6
 1321 0086 0021     		movs	r1, #0
 1322 0088 2846     		mov	r0, r5
 1323 008a FFF7FEFF 		bl	memset
 1324              	.LVL136:
 550:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return SOTA_OK;
 1325              		.loc 1 550 0
 1326 008e 3246     		mov	r2, r6
 1327 0090 2946     		mov	r1, r5
 1328 0092 0120     		movs	r0, #1
 1329 0094 FFF7FEFF 		bl	flag_write
 1330              	.LVL137:
 551:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 1331              		.loc 1 551 0
 1332 0098 D6E7     		b	.L92
 1333              	.L102:
 532:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             return SOTA_DOWNLOADING;
 1334              		.loc 1 532 0
 1335 009a 2048     		ldr	r0, .L103+20
 1336 009c FFF7FEFF 		bl	sota_send_request_block
 1337              	.LVL138:
 533:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 1338              		.loc 1 533 0
 1339 00a0 0124     		movs	r4, #1
 1340 00a2 D1E7     		b	.L92
 1341              	.L96:
 538:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         SOTA_LOG("upgrade result: %d", state);
 1342              		.loc 1 538 0
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 37


 1343 00a4 0DF15F00 		add	r0, sp, #95
 1344 00a8 FFF7FEFF 		bl	flag_upgrade_get_result
 1345              	.LVL139:
 539:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (state == OTA_SUCCEED)
 1346              		.loc 1 539 0
 1347 00ac 174B     		ldr	r3, .L103+4
 1348 00ae 1D69     		ldr	r5, [r3, #16]
 1349 00b0 35B1     		cbz	r5, .L98
 539:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         if (state == OTA_SUCCEED)
 1350              		.loc 1 539 0 is_stmt 0 discriminator 1
 1351 00b2 9DF85F30 		ldrb	r3, [sp, #95]	@ zero_extendqisi2
 1352 00b6 40F21B22 		movw	r2, #539
 1353 00ba 1549     		ldr	r1, .L103+8
 1354 00bc 1848     		ldr	r0, .L103+24
 1355 00be A847     		blx	r5
 1356              	.LVL140:
 1357              	.L98:
 540:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         {
 1358              		.loc 1 540 0 is_stmt 1
 1359 00c0 9DF85F30 		ldrb	r3, [sp, #95]	@ zero_extendqisi2
 1360 00c4 022B     		cmp	r3, #2
 1361 00c6 DBD1     		bne	.L97
 542:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             memcpy(tmpbuf + 1, g_at_update_record.ver, VER_LEN);
 1362              		.loc 1 542 0
 1363 00c8 104B     		ldr	r3, .L103+4
 1364 00ca 1D69     		ldr	r5, [r3, #16]
 1365 00cc 2DB1     		cbz	r5, .L99
 542:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             memcpy(tmpbuf + 1, g_at_update_record.ver, VER_LEN);
 1366              		.loc 1 542 0 is_stmt 0 discriminator 1
 1367 00ce 134B     		ldr	r3, .L103+20
 1368 00d0 40F21E22 		movw	r2, #542
 1369 00d4 0E49     		ldr	r1, .L103+8
 1370 00d6 1348     		ldr	r0, .L103+28
 1371 00d8 A847     		blx	r5
 1372              	.LVL141:
 1373              	.L99:
 543:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)ver_to_hex(tmpbuf, VER_LEN+1, sbuf);
 1374              		.loc 1 543 0 is_stmt 1
 1375 00da 104D     		ldr	r5, .L103+20
 1376 00dc 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 1377 00de CDF80900 		str	r0, [sp, #9]	@ unaligned
 1378 00e2 CDF80D10 		str	r1, [sp, #13]	@ unaligned
 1379 00e6 CDF81120 		str	r2, [sp, #17]	@ unaligned
 1380 00ea CDF81530 		str	r3, [sp, #21]	@ unaligned
 544:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)sota_at_send(MSG_NOTIFY_STATE, sbuf, (VER_LEN+1) * 2);
 1381              		.loc 1 544 0
 1382 00ee 07AA     		add	r2, sp, #28
 1383 00f0 1121     		movs	r1, #17
 1384 00f2 02A8     		add	r0, sp, #8
 1385 00f4 FFF7FEFF 		bl	ver_to_hex
 1386              	.LVL142:
 545:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
 1387              		.loc 1 545 0
 1388 00f8 2222     		movs	r2, #34
 1389 00fa 07A9     		add	r1, sp, #28
 1390 00fc 1820     		movs	r0, #24
 1391 00fe FFF7FEFF 		bl	sota_at_send
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 38


 1392              	.LVL143:
 1393 0102 BDE7     		b	.L97
 1394              	.L100:
 523:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 1395              		.loc 1 523 0
 1396 0104 6524     		movs	r4, #101
 1397 0106 9FE7     		b	.L92
 1398              	.L104:
 1399              		.align	2
 1400              	.L103:
 1401 0108 00000000 		.word	.LANCHOR1
 1402 010c 00000000 		.word	g_flash_op
 1403 0110 00000000 		.word	.LANCHOR6
 1404 0114 00000000 		.word	.LC14
 1405 0118 1C000000 		.word	.LC15
 1406 011c 18000000 		.word	.LANCHOR1+24
 1407 0120 40000000 		.word	.LC16
 1408 0124 60000000 		.word	.LC17
 1409              		.cfi_endproc
 1410              	.LFE15:
 1412              		.section	.text.sota_parse,"ax",%progbits
 1413              		.align	1
 1414              		.global	sota_parse
 1415              		.syntax unified
 1416              		.thumb
 1417              		.thumb_func
 1418              		.fpu fpv4-sp-d16
 1420              	sota_parse:
 1421              	.LFB4:
 154:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ota_pcp_head_s *phead;
 1422              		.loc 1 154 0
 1423              		.cfi_startproc
 1424              		@ args = 0, pretend = 0, frame = 0
 1425              		@ frame_needed = 0, uses_anonymous_args = 0
 1426              	.LVL144:
 1427 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1428              	.LCFI35:
 1429              		.cfi_def_cfa_offset 20
 1430              		.cfi_offset 4, -20
 1431              		.cfi_offset 5, -16
 1432              		.cfi_offset 6, -12
 1433              		.cfi_offset 7, -8
 1434              		.cfi_offset 14, -4
 1435 0002 85B0     		sub	sp, sp, #20
 1436              	.LCFI36:
 1437              		.cfi_def_cfa_offset 40
 1438 0004 1446     		mov	r4, r2
 1439 0006 1D46     		mov	r5, r3
 162:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1440              		.loc 1 162 0
 1441 0008 0346     		mov	r3, r0
 1442              	.LVL145:
 1443 000a B0B1     		cbz	r0, .L106
 162:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1444              		.loc 1 162 0 is_stmt 0 discriminator 1
 1445 000c 0529     		cmp	r1, #5
 1446 000e 14D9     		bls	.L106
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 39


 162:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1447              		.loc 1 162 0 discriminator 2
 1448 0010 9AB1     		cbz	r2, .L106
 168:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (rlen == NULL)/*lint !e158*/
 1449              		.loc 1 168 0 is_stmt 1
 1450 0012 3A21     		movs	r1, #58
 1451              	.LVL146:
 1452 0014 FFF7FEFF 		bl	strchr
 1453              	.LVL147:
 169:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1454              		.loc 1 169 0
 1455 0018 0646     		mov	r6, r0
 1456 001a D8B1     		cbz	r0, .L121
 174:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (out_len < buflen)
 1457              		.loc 1 174 0
 1458 001c 0130     		adds	r0, r0, #1
 1459              	.LVL148:
 1460 001e FFF7FEFF 		bl	chartoint
 1461              	.LVL149:
 175:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1462              		.loc 1 175 0
 1463 0022 A842     		cmp	r0, r5
 1464 0024 20DD     		ble	.L110
 177:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END; 
 1465              		.loc 1 177 0
 1466 0026 404B     		ldr	r3, .L125
 1467 0028 1B69     		ldr	r3, [r3, #16]
 1468 002a 002B     		cmp	r3, #0
 1469 002c 76D0     		beq	.L116
 177:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END; 
 1470              		.loc 1 177 0 is_stmt 0 discriminator 1
 1471 002e B122     		movs	r2, #177
 1472 0030 3E49     		ldr	r1, .L125+4
 1473 0032 3F48     		ldr	r0, .L125+8
 1474              	.LVL150:
 1475 0034 9847     		blx	r3
 1476              	.LVL151:
 212:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 1477              		.loc 1 212 0 is_stmt 1 discriminator 1
 1478 0036 6520     		movs	r0, #101
 1479 0038 0AE0     		b	.L105
 1480              	.LVL152:
 1481              	.L106:
 164:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
 1482              		.loc 1 164 0
 1483 003a 3B4A     		ldr	r2, .L125
 1484              	.LVL153:
 1485 003c 1569     		ldr	r5, [r2, #16]
 1486              	.LVL154:
 1487 003e 002D     		cmp	r5, #0
 1488 0040 68D0     		beq	.L114
 164:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
 1489              		.loc 1 164 0 is_stmt 0 discriminator 1
 1490 0042 0194     		str	r4, [sp, #4]
 1491 0044 0091     		str	r1, [sp]
 1492 0046 A422     		movs	r2, #164
 1493 0048 3849     		ldr	r1, .L125+4
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 40


 1494              	.LVL155:
 1495 004a 3A48     		ldr	r0, .L125+12
 1496              	.LVL156:
 1497 004c A847     		blx	r5
 1498              	.LVL157:
 212:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 1499              		.loc 1 212 0 is_stmt 1 discriminator 1
 1500 004e 6520     		movs	r0, #101
 1501              	.L105:
 213:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1502              		.loc 1 213 0
 1503 0050 05B0     		add	sp, sp, #20
 1504              	.LCFI37:
 1505              		.cfi_remember_state
 1506              		.cfi_def_cfa_offset 20
 1507              		@ sp needed
 1508 0052 F0BD     		pop	{r4, r5, r6, r7, pc}
 1509              	.LVL158:
 1510              	.L121:
 1511              	.LCFI38:
 1512              		.cfi_restore_state
 171:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
 1513              		.loc 1 171 0
 1514 0054 344B     		ldr	r3, .L125
 1515 0056 1B69     		ldr	r3, [r3, #16]
 1516 0058 002B     		cmp	r3, #0
 1517 005a 5DD0     		beq	.L115
 171:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
 1518              		.loc 1 171 0 is_stmt 0 discriminator 1
 1519 005c AB22     		movs	r2, #171
 1520 005e 3349     		ldr	r1, .L125+4
 1521 0060 3548     		ldr	r0, .L125+16
 1522              	.LVL159:
 1523 0062 9847     		blx	r3
 1524              	.LVL160:
 212:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 1525              		.loc 1 212 0 is_stmt 1 discriminator 1
 1526 0064 6520     		movs	r0, #101
 1527 0066 F3E7     		b	.L105
 1528              	.LVL161:
 1529              	.L110:
 181:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     databuf = strstr(rlen,",");
 1530              		.loc 1 181 0
 1531 0068 4700     		lsls	r7, r0, #1
 1532              	.LVL162:
 182:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (databuf == NULL)
 1533              		.loc 1 182 0
 1534 006a 2C21     		movs	r1, #44
 1535 006c 3046     		mov	r0, r6
 1536 006e FFF7FEFF 		bl	strchr
 1537              	.LVL163:
 183:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1538              		.loc 1 183 0
 1539 0072 0646     		mov	r6, r0
 1540              	.LVL164:
 1541 0074 0028     		cmp	r0, #0
 1542 0076 34D0     		beq	.L122
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 41


 188:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1543              		.loc 1 188 0
 1544 0078 0136     		adds	r6, r6, #1
 1545              	.LVL165:
 190:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     HexStrToByte((const unsigned char *)buf, (unsigned char *)out_buf, buflen);
 1546              		.loc 1 190 0
 1547 007a 2A46     		mov	r2, r5
 1548 007c 0021     		movs	r1, #0
 1549 007e 2046     		mov	r0, r4
 1550              	.LVL166:
 1551 0080 FFF7FEFF 		bl	memset
 1552              	.LVL167:
 191:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     phead = (ota_pcp_head_s *)out_buf;
 1553              		.loc 1 191 0
 1554 0084 3A46     		mov	r2, r7
 1555 0086 2146     		mov	r1, r4
 1556 0088 3046     		mov	r0, r6
 1557 008a FFF7FEFF 		bl	HexStrToByte
 1558              	.LVL168:
 194:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     phead->chk_code = 0;
 1559              		.loc 1 194 0
 1560 008e A388     		ldrh	r3, [r4, #4]
 1561 0090 1D02     		lsls	r5, r3, #8
 1562              	.LVL169:
 1563 0092 ADB2     		uxth	r5, r5
 1564 0094 45EA1325 		orr	r5, r5, r3, lsr #8
 1565              	.LVL170:
 195:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret = crc_check((const unsigned char *)out_buf, buflen/2);
 1566              		.loc 1 195 0
 1567 0098 0023     		movs	r3, #0
 1568 009a A380     		strh	r3, [r4, #4]	@ movhi
 196:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     phead->ori_id = htons_ota(phead->ori_id);
 1569              		.loc 1 196 0
 1570 009c 7910     		asrs	r1, r7, #1
 1571 009e 2046     		mov	r0, r4
 1572 00a0 FFF7FEFF 		bl	crc_check
 1573              	.LVL171:
 197:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (phead->data_len > BLOCK_HEAD && phead->msg_code == MSG_GET_BLOCK)
 1574              		.loc 1 197 0
 1575 00a4 2288     		ldrh	r2, [r4]
 1576 00a6 130A     		lsrs	r3, r2, #8
 1577 00a8 43EA0223 		orr	r3, r3, r2, lsl #8
 1578 00ac 9BB2     		uxth	r3, r3
 1579 00ae 2380     		strh	r3, [r4]	@ movhi
 198:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1580              		.loc 1 198 0
 1581 00b0 E288     		ldrh	r2, [r4, #6]
 1582 00b2 032A     		cmp	r2, #3
 1583 00b4 02D9     		bls	.L112
 198:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1584              		.loc 1 198 0 is_stmt 0 discriminator 1
 1585 00b6 E178     		ldrb	r1, [r4, #3]	@ zero_extendqisi2
 1586 00b8 1529     		cmp	r1, #21
 1587 00ba 1BD0     		beq	.L123
 1588              	.L112:
 202:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (phead->msg_code < MSG_GET_VER || phead->msg_code > MSG_NOTIFY_STATE))
 1589              		.loc 1 202 0 is_stmt 1
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 42


 1590 00bc 4FF6FE72 		movw	r2, #65534
 1591 00c0 9342     		cmp	r3, r2
 1592 00c2 1ED0     		beq	.L124
 1593              	.L113:
 205:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             phead->ori_id,phead->msg_code,phead->ver_num, ret, cmd_crc_num);
 1594              		.loc 1 205 0
 1595 00c4 184A     		ldr	r2, .L125
 1596 00c6 1669     		ldr	r6, [r2, #16]
 1597              	.LVL172:
 1598 00c8 66B3     		cbz	r6, .L119
 205:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             phead->ori_id,phead->msg_code,phead->ver_num, ret, cmd_crc_num);
 1599              		.loc 1 205 0 is_stmt 0 discriminator 1
 1600 00ca E278     		ldrb	r2, [r4, #3]	@ zero_extendqisi2
 1601 00cc A178     		ldrb	r1, [r4, #2]	@ zero_extendqisi2
 1602 00ce 0395     		str	r5, [sp, #12]
 1603 00d0 0290     		str	r0, [sp, #8]
 1604 00d2 0191     		str	r1, [sp, #4]
 1605 00d4 0092     		str	r2, [sp]
 1606 00d6 CE22     		movs	r2, #206
 1607 00d8 1449     		ldr	r1, .L125+4
 1608 00da 1848     		ldr	r0, .L125+20
 1609              	.LVL173:
 1610 00dc B047     		blx	r6
 1611              	.LVL174:
 212:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 1612              		.loc 1 212 0 is_stmt 1 discriminator 1
 1613 00de 6520     		movs	r0, #101
 1614 00e0 B6E7     		b	.L105
 1615              	.LVL175:
 1616              	.L122:
 185:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
 1617              		.loc 1 185 0
 1618 00e2 114B     		ldr	r3, .L125
 1619 00e4 1B69     		ldr	r3, [r3, #16]
 1620 00e6 DBB1     		cbz	r3, .L117
 185:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         goto END;
 1621              		.loc 1 185 0 is_stmt 0 discriminator 1
 1622 00e8 B922     		movs	r2, #185
 1623 00ea 1049     		ldr	r1, .L125+4
 1624 00ec 1448     		ldr	r0, .L125+24
 1625              	.LVL176:
 1626 00ee 9847     		blx	r3
 1627              	.LVL177:
 212:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 1628              		.loc 1 212 0 is_stmt 1 discriminator 1
 1629 00f0 6520     		movs	r0, #101
 1630 00f2 ADE7     		b	.L105
 1631              	.LVL178:
 1632              	.L123:
 200:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 1633              		.loc 1 200 0
 1634 00f4 110A     		lsrs	r1, r2, #8
 1635 00f6 41EA0222 		orr	r2, r1, r2, lsl #8
 1636 00fa 92B2     		uxth	r2, r2
 1637 00fc 033A     		subs	r2, r2, #3
 1638 00fe E280     		strh	r2, [r4, #6]	@ movhi
 1639 0100 DCE7     		b	.L112
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 43


 1640              	.L124:
 202:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (phead->msg_code < MSG_GET_VER || phead->msg_code > MSG_NOTIFY_STATE))
 1641              		.loc 1 202 0 discriminator 1
 1642 0102 8542     		cmp	r5, r0
 1643 0104 DED1     		bne	.L113
 203:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1644              		.loc 1 203 0 discriminator 2
 1645 0106 E278     		ldrb	r2, [r4, #3]	@ zero_extendqisi2
 1646 0108 133A     		subs	r2, r2, #19
 1647 010a D2B2     		uxtb	r2, r2
 202:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (phead->msg_code < MSG_GET_VER || phead->msg_code > MSG_NOTIFY_STATE))
 1648              		.loc 1 202 0 discriminator 2
 1649 010c 052A     		cmp	r2, #5
 1650 010e D9D8     		bhi	.L113
 210:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** END:
 1651              		.loc 1 210 0
 1652 0110 0020     		movs	r0, #0
 1653              	.LVL179:
 1654 0112 9DE7     		b	.L105
 1655              	.LVL180:
 1656              	.L114:
 212:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 1657              		.loc 1 212 0
 1658 0114 6520     		movs	r0, #101
 1659              	.LVL181:
 1660 0116 9BE7     		b	.L105
 1661              	.LVL182:
 1662              	.L115:
 1663 0118 6520     		movs	r0, #101
 1664              	.LVL183:
 1665 011a 99E7     		b	.L105
 1666              	.LVL184:
 1667              	.L116:
 1668 011c 6520     		movs	r0, #101
 1669              	.LVL185:
 1670 011e 97E7     		b	.L105
 1671              	.LVL186:
 1672              	.L117:
 1673 0120 6520     		movs	r0, #101
 1674              	.LVL187:
 1675 0122 95E7     		b	.L105
 1676              	.LVL188:
 1677              	.L119:
 1678 0124 6520     		movs	r0, #101
 1679              	.LVL189:
 1680 0126 93E7     		b	.L105
 1681              	.L126:
 1682              		.align	2
 1683              	.L125:
 1684 0128 00000000 		.word	g_flash_op
 1685 012c 00000000 		.word	.LANCHOR7
 1686 0130 44000000 		.word	.LC20
 1687 0134 00000000 		.word	.LC18
 1688 0138 28000000 		.word	.LC19
 1689 013c 7C000000 		.word	.LC22
 1690 0140 64000000 		.word	.LC21
 1691              		.cfi_endproc
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 44


 1692              	.LFE4:
 1694              		.section	.text.sota_process,"ax",%progbits
 1695              		.align	1
 1696              		.global	sota_process
 1697              		.syntax unified
 1698              		.thumb
 1699              		.thumb_func
 1700              		.fpu fpv4-sp-d16
 1702              	sota_process:
 1703              	.LFB13:
 430:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     char sbuf[64] = {0};
 1704              		.loc 1 430 0
 1705              		.cfi_startproc
 1706              		@ args = 0, pretend = 0, frame = 88
 1707              		@ frame_needed = 0, uses_anonymous_args = 0
 1708              	.LVL190:
 1709 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1710              	.LCFI39:
 1711              		.cfi_def_cfa_offset 20
 1712              		.cfi_offset 4, -20
 1713              		.cfi_offset 5, -16
 1714              		.cfi_offset 6, -12
 1715              		.cfi_offset 7, -8
 1716              		.cfi_offset 14, -4
 1717 0002 97B0     		sub	sp, sp, #92
 1718              	.LCFI40:
 1719              		.cfi_def_cfa_offset 112
 1720 0004 0D46     		mov	r5, r1
 431:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     const uint8_t *pbuf = NULL;
 1721              		.loc 1 431 0
 1722 0006 4022     		movs	r2, #64
 1723              	.LVL191:
 1724 0008 0021     		movs	r1, #0
 1725              	.LVL192:
 1726 000a 06A8     		add	r0, sp, #24
 1727              	.LVL193:
 1728 000c FFF7FEFF 		bl	memset
 1729              	.LVL194:
 438:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1730              		.loc 1 438 0
 1731 0010 EC78     		ldrb	r4, [r5, #3]	@ zero_extendqisi2
 1732              	.LVL195:
 440:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1733              		.loc 1 440 0
 1734 0012 EB88     		ldrh	r3, [r5, #6]
 1735 0014 9BB1     		cbz	r3, .L137
 442:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 1736              		.loc 1 442 0
 1737 0016 05F10807 		add	r7, r5, #8
 1738              	.LVL196:
 1739              	.L128:
 445:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
 1740              		.loc 1 445 0
 1741 001a 294B     		ldr	r3, .L142
 1742 001c 1E69     		ldr	r6, [r3, #16]
 1743 001e 2EB1     		cbz	r6, .L129
 445:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 45


 1744              		.loc 1 445 0 is_stmt 0 discriminator 1
 1745 0020 2346     		mov	r3, r4
 1746 0022 40F2BD12 		movw	r2, #445
 1747 0026 2749     		ldr	r1, .L142+4
 1748 0028 2748     		ldr	r0, .L142+8
 1749 002a B047     		blx	r6
 1750              	.LVL197:
 1751              	.L129:
 447:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1752              		.loc 1 447 0 is_stmt 1
 1753 002c A4F11303 		sub	r3, r4, #19
 1754 0030 042B     		cmp	r3, #4
 1755 0032 34D8     		bhi	.L130
 1756 0034 DFE803F0 		tbb	[pc, r3]
 1757              	.L132:
 1758 0038 05       		.byte	(.L131-.L132)/2
 1759 0039 1F       		.byte	(.L133-.L132)/2
 1760 003a 27       		.byte	(.L134-.L132)/2
 1761 003b 33       		.byte	(.L130-.L132)/2
 1762 003c 2E       		.byte	(.L135-.L132)/2
 1763              	.LVL198:
 1764 003d 00       		.p2align 1
 1765              	.L137:
 432:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int ret = SOTA_OK;
 1766              		.loc 1 432 0
 1767 003e 0027     		movs	r7, #0
 1768 0040 EBE7     		b	.L128
 1769              	.LVL199:
 1770              	.L131:
 1771              	.LBB2:
 451:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)g_flash_op.get_ver(ver_ret+1, VER_LEN);
 1772              		.loc 1 451 0
 1773 0042 0024     		movs	r4, #0
 1774              	.LVL200:
 1775 0044 0194     		str	r4, [sp, #4]
 1776 0046 0294     		str	r4, [sp, #8]
 1777 0048 0394     		str	r4, [sp, #12]
 1778 004a 0494     		str	r4, [sp, #16]
 1779 004c 8DF81440 		strb	r4, [sp, #20]
 452:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)ver_to_hex(ver_ret, (VER_LEN + 1), (char *)sbuf);
 1780              		.loc 1 452 0
 1781 0050 1B4B     		ldr	r3, .L142
 1782              	.LVL201:
 1783 0052 1B68     		ldr	r3, [r3]
 1784 0054 1021     		movs	r1, #16
 1785 0056 0DF10500 		add	r0, sp, #5
 1786 005a 9847     		blx	r3
 1787              	.LVL202:
 453:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             (void)sota_at_send(MSG_GET_VER, (char *)sbuf, (VER_LEN + 1) * 2);
 1788              		.loc 1 453 0
 1789 005c 06AA     		add	r2, sp, #24
 1790 005e 1121     		movs	r1, #17
 1791 0060 01A8     		add	r0, sp, #4
 1792 0062 FFF7FEFF 		bl	ver_to_hex
 1793              	.LVL203:
 454:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             ret = SOTA_OK;
 1794              		.loc 1 454 0
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 46


 1795 0066 2222     		movs	r2, #34
 1796 0068 06A9     		add	r1, sp, #24
 1797 006a 1320     		movs	r0, #19
 1798 006c FFF7FEFF 		bl	sota_at_send
 1799              	.LVL204:
 455:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             break;
 1800              		.loc 1 455 0
 1801 0070 2046     		mov	r0, r4
 1802              	.LVL205:
 1803              	.L127:
 1804              	.LBE2:
 495:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1805              		.loc 1 495 0
 1806 0072 17B0     		add	sp, sp, #92
 1807              	.LCFI41:
 1808              		.cfi_remember_state
 1809              		.cfi_def_cfa_offset 20
 1810              		@ sp needed
 1811 0074 F0BD     		pop	{r4, r5, r6, r7, pc}
 1812              	.LVL206:
 1813              	.L133:
 1814              	.LCFI42:
 1815              		.cfi_restore_state
 460:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             {
 1816              		.loc 1 460 0
 1817 0076 EB88     		ldrh	r3, [r5, #6]
 1818 0078 162B     		cmp	r3, #22
 1819 007a 1AD9     		bls	.L138
 462:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             }
 1820              		.loc 1 462 0
 1821 007c 3946     		mov	r1, r7
 1822 007e 2846     		mov	r0, r5
 1823 0080 FFF7FEFF 		bl	sota_new_ver_process
 1824              	.LVL207:
 1825 0084 F5E7     		b	.L127
 1826              	.LVL208:
 1827              	.L134:
 472:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             {
 1828              		.loc 1 472 0
 1829 0086 EB88     		ldrh	r3, [r5, #6]
 1830 0088 ABB1     		cbz	r3, .L139
 474:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             }
 1831              		.loc 1 474 0
 1832 008a 3946     		mov	r1, r7
 1833 008c 2846     		mov	r0, r5
 1834 008e FFF7FEFF 		bl	sota_data_block_process
 1835              	.LVL209:
 1836 0092 EEE7     		b	.L127
 1837              	.LVL210:
 1838              	.L135:
 484:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****              break;
 1839              		.loc 1 484 0
 1840 0094 3946     		mov	r1, r7
 1841 0096 2846     		mov	r0, r5
 1842 0098 FFF7FEFF 		bl	sota_update_exc_process
 1843              	.LVL211:
 485:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         }
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 47


 1844              		.loc 1 485 0
 1845 009c E9E7     		b	.L127
 1846              	.LVL212:
 1847              	.L130:
 489:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             ret = SOTA_INVALID_PACKET;
 1848              		.loc 1 489 0
 1849 009e 084B     		ldr	r3, .L142
 1850 00a0 1B69     		ldr	r3, [r3, #16]
 1851 00a2 53B1     		cbz	r3, .L140
 489:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             ret = SOTA_INVALID_PACKET;
 1852              		.loc 1 489 0 is_stmt 0 discriminator 1
 1853 00a4 40F2E912 		movw	r2, #489
 1854 00a8 0649     		ldr	r1, .L142+4
 1855 00aa 0848     		ldr	r0, .L142+12
 1856 00ac 9847     		blx	r3
 1857              	.LVL213:
 490:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             break;
 1858              		.loc 1 490 0 is_stmt 1 discriminator 1
 1859 00ae 6720     		movs	r0, #103
 1860 00b0 DFE7     		b	.L127
 1861              	.L138:
 466:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             }
 1862              		.loc 1 466 0
 1863 00b2 6720     		movs	r0, #103
 1864 00b4 DDE7     		b	.L127
 1865              	.L139:
 478:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             }
 1866              		.loc 1 478 0
 1867 00b6 6720     		movs	r0, #103
 1868 00b8 DBE7     		b	.L127
 1869              	.L140:
 490:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****             break;
 1870              		.loc 1 490 0
 1871 00ba 6720     		movs	r0, #103
 1872              	.LVL214:
 494:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 1873              		.loc 1 494 0
 1874 00bc D9E7     		b	.L127
 1875              	.L143:
 1876 00be 00BF     		.align	2
 1877              	.L142:
 1878 00c0 00000000 		.word	g_flash_op
 1879 00c4 00000000 		.word	.LANCHOR8
 1880 00c8 00000000 		.word	.LC23
 1881 00cc 20000000 		.word	.LC24
 1882              		.cfi_endproc
 1883              	.LFE13:
 1885              		.section	.text.sota_timeout_handler,"ax",%progbits
 1886              		.align	1
 1887              		.global	sota_timeout_handler
 1888              		.syntax unified
 1889              		.thumb
 1890              		.thumb_func
 1891              		.fpu fpv4-sp-d16
 1893              	sota_timeout_handler:
 1894              	.LFB14:
 498:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (g_at_update_record.state == DOWNLOADING)
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 48


 1895              		.loc 1 498 0
 1896              		.cfi_startproc
 1897              		@ args = 0, pretend = 0, frame = 0
 1898              		@ frame_needed = 0, uses_anonymous_args = 0
 1899 0000 10B5     		push	{r4, lr}
 1900              	.LCFI43:
 1901              		.cfi_def_cfa_offset 8
 1902              		.cfi_offset 4, -8
 1903              		.cfi_offset 14, -4
 499:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1904              		.loc 1 499 0
 1905 0002 154B     		ldr	r3, .L152
 1906 0004 93F82830 		ldrb	r3, [r3, #40]	@ zero_extendqisi2
 1907 0008 012B     		cmp	r3, #1
 1908 000a 02D0     		beq	.L150
 505:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 1909              		.loc 1 505 0
 1910 000c 022B     		cmp	r3, #2
 1911 000e 12D0     		beq	.L151
 1912              	.L144:
 511:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1913              		.loc 1 511 0
 1914 0010 10BD     		pop	{r4, pc}
 1915              	.L150:
 501:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DOWNLOAD_TIME_OUT);
 1916              		.loc 1 501 0
 1917 0012 124B     		ldr	r3, .L152+4
 1918 0014 1C69     		ldr	r4, [r3, #16]
 1919 0016 34B1     		cbz	r4, .L146
 501:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DOWNLOAD_TIME_OUT);
 1920              		.loc 1 501 0 is_stmt 0 discriminator 1
 1921 0018 0F4B     		ldr	r3, .L152
 1922 001a 5B68     		ldr	r3, [r3, #4]
 1923 001c 40F2F512 		movw	r2, #501
 1924 0020 0F49     		ldr	r1, .L152+8
 1925 0022 1048     		ldr	r0, .L152+12
 1926 0024 A047     		blx	r4
 1927              	.LVL215:
 1928              	.L146:
 502:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_request_block(g_at_update_record.ver);
 1929              		.loc 1 502 0 is_stmt 1
 1930 0026 0621     		movs	r1, #6
 1931 0028 1720     		movs	r0, #23
 1932 002a FFF7FEFF 		bl	sota_send_response_code
 1933              	.LVL216:
 503:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 1934              		.loc 1 503 0
 1935 002e 0E48     		ldr	r0, .L152+16
 1936 0030 FFF7FEFF 		bl	sota_send_request_block
 1937              	.LVL217:
 1938 0034 ECE7     		b	.L144
 1939              	.L151:
 507:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DOWNLOAD_TIME_OUT);
 1940              		.loc 1 507 0
 1941 0036 094B     		ldr	r3, .L152+4
 1942 0038 1B69     		ldr	r3, [r3, #16]
 1943 003a 23B1     		cbz	r3, .L148
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 49


 507:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_EXC_UPDATE, DOWNLOAD_TIME_OUT);
 1944              		.loc 1 507 0 is_stmt 0 discriminator 1
 1945 003c 40F2FB12 		movw	r2, #507
 1946 0040 0749     		ldr	r1, .L152+8
 1947 0042 0A48     		ldr	r0, .L152+20
 1948 0044 9847     		blx	r3
 1949              	.LVL218:
 1950              	.L148:
 508:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         sota_send_response_code(MSG_DOWNLOAD_STATE, DEV_OK);
 1951              		.loc 1 508 0 is_stmt 1
 1952 0046 0621     		movs	r1, #6
 1953 0048 1720     		movs	r0, #23
 1954 004a FFF7FEFF 		bl	sota_send_response_code
 1955              	.LVL219:
 509:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 1956              		.loc 1 509 0
 1957 004e 0021     		movs	r1, #0
 1958 0050 1620     		movs	r0, #22
 1959 0052 FFF7FEFF 		bl	sota_send_response_code
 1960              	.LVL220:
 511:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 1961              		.loc 1 511 0
 1962 0056 DBE7     		b	.L144
 1963              	.L153:
 1964              		.align	2
 1965              	.L152:
 1966 0058 00000000 		.word	.LANCHOR1
 1967 005c 00000000 		.word	g_flash_op
 1968 0060 00000000 		.word	.LANCHOR9
 1969 0064 00000000 		.word	.LC25
 1970 0068 18000000 		.word	.LANCHOR1+24
 1971 006c 28000000 		.word	.LC26
 1972              		.cfi_endproc
 1973              	.LFE14:
 1975              		.section	.text.sota_init,"ax",%progbits
 1976              		.align	1
 1977              		.global	sota_init
 1978              		.syntax unified
 1979              		.thumb
 1980              		.thumb_func
 1981              		.fpu fpv4-sp-d16
 1983              	sota_init:
 1984              	.LFB18:
 563:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 564:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** int32_t sota_init(const sota_arg_s* sota_arg)
 565:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** {
 1985              		.loc 1 565 0
 1986              		.cfi_startproc
 1987              		@ args = 0, pretend = 0, frame = 40
 1988              		@ frame_needed = 0, uses_anonymous_args = 0
 1989              	.LVL221:
 566:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int  ret;
 567:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     flag_op_s flag_op;
 568:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pack_params_s pack_param;
 569:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 570:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (sota_arg == NULL || sota_arg->sota_malloc == NULL || sota_arg->sota_free == NULL)
 1990              		.loc 1 570 0
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 50


 1991 0000 0028     		cmp	r0, #0
 1992 0002 3DD0     		beq	.L157
 565:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     int  ret;
 1993              		.loc 1 565 0 discriminator 1
 1994 0004 F0B5     		push	{r4, r5, r6, r7, lr}
 1995              	.LCFI44:
 1996              		.cfi_def_cfa_offset 20
 1997              		.cfi_offset 4, -20
 1998              		.cfi_offset 5, -16
 1999              		.cfi_offset 6, -12
 2000              		.cfi_offset 7, -8
 2001              		.cfi_offset 14, -4
 2002 0006 8BB0     		sub	sp, sp, #44
 2003              	.LCFI45:
 2004              		.cfi_def_cfa_offset 64
 2005 0008 0446     		mov	r4, r0
 2006              		.loc 1 570 0 discriminator 1
 2007 000a 8368     		ldr	r3, [r0, #8]
 2008 000c 002B     		cmp	r3, #0
 2009 000e 39D0     		beq	.L158
 2010              		.loc 1 570 0 is_stmt 0 discriminator 2
 2011 0010 C368     		ldr	r3, [r0, #12]
 2012 0012 002B     		cmp	r3, #0
 2013 0014 38D0     		beq	.L159
 571:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 572:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_FAILED;
 573:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 574:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 575:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memcpy(&pack_param.ota_opt, &sota_arg->ota_info, sizeof(pack_param.ota_opt));
 2014              		.loc 1 575 0 is_stmt 1
 2015 0016 0646     		mov	r6, r0
 2016 0018 6D46     		mov	r5, sp
 2017 001a 56F8180F 		ldr	r0, [r6, #24]!	@ unaligned
 2018              	.LVL222:
 2019 001e 7168     		ldr	r1, [r6, #4]	@ unaligned
 2020 0020 B268     		ldr	r2, [r6, #8]	@ unaligned
 2021 0022 F368     		ldr	r3, [r6, #12]	@ unaligned
 2022 0024 0FC5     		stmia	r5!, {r0, r1, r2, r3}
 2023 0026 3069     		ldr	r0, [r6, #16]	@ unaligned
 2024 0028 2860     		str	r0, [r5]
 576:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pack_param.malloc = sota_arg->sota_malloc;
 2025              		.loc 1 576 0
 2026 002a A368     		ldr	r3, [r4, #8]
 2027 002c 0593     		str	r3, [sp, #20]
 577:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pack_param.free = sota_arg->sota_free;
 2028              		.loc 1 577 0
 2029 002e E368     		ldr	r3, [r4, #12]
 2030 0030 0693     		str	r3, [sp, #24]
 578:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     pack_param.printf = sota_arg->sota_printf;
 2031              		.loc 1 578 0
 2032 0032 2369     		ldr	r3, [r4, #16]
 2033 0034 0793     		str	r3, [sp, #28]
 579:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     ret = pack_init_device(&pack_param);
 2034              		.loc 1 579 0
 2035 0036 6846     		mov	r0, sp
 2036 0038 FFF7FEFF 		bl	pack_init_device
 2037              	.LVL223:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 51


 580:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     if (ret != SOTA_OK)
 2038              		.loc 1 580 0
 2039 003c 30BB     		cbnz	r0, .L160
 581:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     {
 582:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****         return SOTA_FAILED;
 583:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 584:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 585:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     g_storage_device = pack_get_device();
 2040              		.loc 1 585 0
 2041 003e FFF7FEFF 		bl	pack_get_device
 2042              	.LVL224:
 2043 0042 144B     		ldr	r3, .L165
 2044 0044 1860     		str	r0, [r3]
 586:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 587:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     memcpy(&g_flash_op, sota_arg, sizeof(sota_arg_s));
 2045              		.loc 1 587 0
 2046 0046 2546     		mov	r5, r4
 2047 0048 134F     		ldr	r7, .L165+4
 2048 004a 2034     		adds	r4, r4, #32
 2049              	.LVL225:
 2050              	.L156:
 2051 004c 3E46     		mov	r6, r7
 2052 004e 2868     		ldr	r0, [r5]	@ unaligned
 2053 0050 6968     		ldr	r1, [r5, #4]	@ unaligned
 2054 0052 AA68     		ldr	r2, [r5, #8]	@ unaligned
 2055 0054 EB68     		ldr	r3, [r5, #12]	@ unaligned
 2056 0056 0FC6     		stmia	r6!, {r0, r1, r2, r3}
 2057 0058 1035     		adds	r5, r5, #16
 2058 005a 3746     		mov	r7, r6
 2059 005c A542     		cmp	r5, r4
 2060 005e F5D1     		bne	.L156
 2061 0060 2868     		ldr	r0, [r5]	@ unaligned
 2062 0062 6968     		ldr	r1, [r5, #4]	@ unaligned
 2063 0064 AA68     		ldr	r2, [r5, #8]	@ unaligned
 2064 0066 07C7     		stmia	r7!, {r0, r1, r2}
 588:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 589:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     flag_op.func_flag_read = func_flag_read;
 2065              		.loc 1 589 0
 2066 0068 0C4B     		ldr	r3, .L165+8
 2067 006a 0893     		str	r3, [sp, #32]
 590:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     flag_op.func_flag_write = func_flag_write;
 2068              		.loc 1 590 0
 2069 006c 0C4B     		ldr	r3, .L165+12
 2070 006e 0993     		str	r3, [sp, #36]
 591:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)flag_init(&flag_op);
 2071              		.loc 1 591 0
 2072 0070 08A8     		add	r0, sp, #32
 2073 0072 FFF7FEFF 		bl	flag_init
 2074              	.LVL226:
 592:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     (void)flag_upgrade_init();
 2075              		.loc 1 592 0
 2076 0076 FFF7FEFF 		bl	flag_upgrade_init
 2077              	.LVL227:
 593:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** 
 594:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     return sota_status_check();
 2078              		.loc 1 594 0
 2079 007a FFF7FEFF 		bl	sota_status_check
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 52


 2080              	.LVL228:
 2081 007e 06E0     		b	.L154
 2082              	.LVL229:
 2083              	.L157:
 2084              	.LCFI46:
 2085              		.cfi_def_cfa_offset 0
 2086              		.cfi_restore 4
 2087              		.cfi_restore 5
 2088              		.cfi_restore 6
 2089              		.cfi_restore 7
 2090              		.cfi_restore 14
 572:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 2091              		.loc 1 572 0
 2092 0080 6520     		movs	r0, #101
 2093              	.LVL230:
 595:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c **** }
 2094              		.loc 1 595 0
 2095 0082 7047     		bx	lr
 2096              	.LVL231:
 2097              	.L158:
 2098              	.LCFI47:
 2099              		.cfi_def_cfa_offset 64
 2100              		.cfi_offset 4, -20
 2101              		.cfi_offset 5, -16
 2102              		.cfi_offset 6, -12
 2103              		.cfi_offset 7, -8
 2104              		.cfi_offset 14, -4
 572:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 2105              		.loc 1 572 0
 2106 0084 6520     		movs	r0, #101
 2107              	.LVL232:
 2108 0086 02E0     		b	.L154
 2109              	.LVL233:
 2110              	.L159:
 2111 0088 6520     		movs	r0, #101
 2112              	.LVL234:
 2113 008a 00E0     		b	.L154
 2114              	.LVL235:
 2115              	.L160:
 582:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota\sota.c ****     }
 2116              		.loc 1 582 0
 2117 008c 6520     		movs	r0, #101
 2118              	.LVL236:
 2119              	.L154:
 2120              		.loc 1 595 0
 2121 008e 0BB0     		add	sp, sp, #44
 2122              	.LCFI48:
 2123              		.cfi_def_cfa_offset 20
 2124              		@ sp needed
 2125 0090 F0BD     		pop	{r4, r5, r6, r7, pc}
 2126              	.L166:
 2127 0092 00BF     		.align	2
 2128              	.L165:
 2129 0094 00000000 		.word	.LANCHOR3
 2130 0098 00000000 		.word	g_flash_op
 2131 009c 00000000 		.word	func_flag_read
 2132 00a0 00000000 		.word	func_flag_write
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 53


 2133              		.cfi_endproc
 2134              	.LFE18:
 2136              		.comm	g_flash_op,44,4
 2137              		.section	.bss.g_at_update_record,"aw",%nobits
 2138              		.align	2
 2139              		.set	.LANCHOR1,. + 0
 2142              	g_at_update_record:
 2143 0000 00000000 		.space	44
 2143      00000000 
 2143      00000000 
 2143      00000000 
 2143      00000000 
 2144              		.section	.bss.g_storage_device,"aw",%nobits
 2145              		.align	2
 2146              		.set	.LANCHOR3,. + 0
 2149              	g_storage_device:
 2150 0000 00000000 		.space	4
 2151              		.section	.rodata.__func__.6893,"a",%progbits
 2152              		.align	2
 2153              		.set	.LANCHOR7,. + 0
 2156              	__func__.6893:
 2157 0000 736F7461 		.ascii	"sota_parse\000"
 2157      5F706172 
 2157      736500
 2158              		.section	.rodata.__func__.6915,"a",%progbits
 2159              		.align	2
 2160              		.set	.LANCHOR0,. + 0
 2163              	__func__.6915:
 2164 0000 736F7461 		.ascii	"sota_at_send\000"
 2164      5F61745F 
 2164      73656E64 
 2164      00
 2165              		.section	.rodata.__func__.6936,"a",%progbits
 2166              		.align	2
 2167              		.set	.LANCHOR4,. + 0
 2170              	__func__.6936:
 2171 0000 736F7461 		.ascii	"sota_new_ver_process\000"
 2171      5F6E6577 
 2171      5F766572 
 2171      5F70726F 
 2171      63657373 
 2172              		.section	.rodata.__func__.6943,"a",%progbits
 2173              		.align	2
 2174              		.set	.LANCHOR2,. + 0
 2177              	__func__.6943:
 2178 0000 736F7461 		.ascii	"sota_data_block_process\000"
 2178      5F646174 
 2178      615F626C 
 2178      6F636B5F 
 2178      70726F63 
 2179              		.section	.rodata.__func__.6949,"a",%progbits
 2180              		.align	2
 2181              		.set	.LANCHOR5,. + 0
 2184              	__func__.6949:
 2185 0000 736F7461 		.ascii	"sota_update_exc_process\000"
 2185      5F757064 
 2185      6174655F 
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 54


 2185      6578635F 
 2185      70726F63 
 2186              		.section	.rodata.__func__.6960,"a",%progbits
 2187              		.align	2
 2188              		.set	.LANCHOR8,. + 0
 2191              	__func__.6960:
 2192 0000 736F7461 		.ascii	"sota_process\000"
 2192      5F70726F 
 2192      63657373 
 2192      00
 2193              		.section	.rodata.__func__.6971,"a",%progbits
 2194              		.align	2
 2195              		.set	.LANCHOR9,. + 0
 2198              	__func__.6971:
 2199 0000 736F7461 		.ascii	"sota_timeout_handler\000"
 2199      5F74696D 
 2199      656F7574 
 2199      5F68616E 
 2199      646C6572 
 2200              		.section	.rodata.__func__.6978,"a",%progbits
 2201              		.align	2
 2202              		.set	.LANCHOR6,. + 0
 2205              	__func__.6978:
 2206 0000 736F7461 		.ascii	"sota_status_check\000"
 2206      5F737461 
 2206      7475735F 
 2206      63686563 
 2206      6B00
 2207              		.section	.rodata.sota_at_send.str1.4,"aMS",%progbits,1
 2208              		.align	2
 2209              	.LC1:
 2210 0000 5B25733A 		.ascii	"[%s:%d][I]payload too long\012\000"
 2210      25645D5B 
 2210      495D7061 
 2210      796C6F61 
 2210      6420746F 
 2211              	.LC2:
 2212 001c 25303458 		.ascii	"%04X\000"
 2212      00
 2213              		.section	.rodata.sota_data_block_process.str1.4,"aMS",%progbits,1
 2214              		.align	2
 2215              	.LC3:
 2216 0000 5B25733A 		.ascii	"[%s:%d][I]Download wrong,we need block %X, but rx %"
 2216      25645D5B 
 2216      495D446F 
 2216      776E6C6F 
 2216      61642077 
 2217 0033 583A0A00 		.ascii	"X:\012\000"
 2218 0037 00       		.space	1
 2219              	.LC4:
 2220 0038 5B25733A 		.ascii	"[%s:%d][I]off:%lx size:%x \012\000"
 2220      25645D5B 
 2220      495D6F66 
 2220      663A256C 
 2220      78207369 
 2221              	.LC5:
 2222 0054 5B25733A 		.ascii	"[%s:%d][I]write software failed. ret:%d\012\000"
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 55


 2222      25645D5B 
 2222      495D7772 
 2222      69746520 
 2222      736F6674 
 2223 007d 000000   		.space	3
 2224              	.LC6:
 2225 0080 5B25733A 		.ascii	"[%s:%d][I]Rx total %d bytes downloading\015\012\012"
 2225      25645D5B 
 2225      495D5278 
 2225      20746F74 
 2225      616C2025 
 2226 00aa 00       		.ascii	"\000"
 2227 00ab 00       		.space	1
 2228              	.LC7:
 2229 00ac 5B25733A 		.ascii	"[%s:%d][I]Rx total %d bytes, UPDATING...\015\012\012"
 2229      25645D5B 
 2229      495D5278 
 2229      20746F74 
 2229      616C2025 
 2230 00d7 00       		.ascii	"\000"
 2231              	.LC8:
 2232 00d8 5B25733A 		.ascii	"[%s:%d][I]write software end ret:%d\012\000"
 2232      25645D5B 
 2232      495D7772 
 2232      69746520 
 2232      736F6674 
 2233              		.section	.rodata.sota_new_ver_process.str1.4,"aMS",%progbits,1
 2234              		.align	2
 2235              	.LC9:
 2236 0000 5B25733A 		.ascii	"[%s:%d][I]Already latest version %s\012\000"
 2236      25645D5B 
 2236      495D416C 
 2236      72656164 
 2236      79206C61 
 2237 0025 000000   		.space	3
 2238              	.LC10:
 2239 0028 5B25733A 		.ascii	"[%s:%d][I]Notify ver %s,%x, record ver:%s,%x\012\000"
 2239      25645D5B 
 2239      495D4E6F 
 2239      74696679 
 2239      20766572 
 2240 0056 0000     		.space	2
 2241              	.LC11:
 2242 0058 5B25733A 		.ascii	"[%s:%d][I]state %d, downloaded %d blocks\012\000"
 2242      25645D5B 
 2242      495D7374 
 2242      61746520 
 2242      25642C20 
 2243              		.section	.rodata.sota_parse.str1.4,"aMS",%progbits,1
 2244              		.align	2
 2245              	.LC18:
 2246 0000 5B25733A 		.ascii	"[%s:%d][I]in_buf:%p len:%d, out_buf:%p\012\000"
 2246      25645D5B 
 2246      495D696E 
 2246      5F627566 
 2246      3A257020 
 2247              	.LC19:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 56


 2248 0028 5B25733A 		.ascii	"[%s:%d][I]buflen invalid\012\000"
 2248      25645D5B 
 2248      495D6275 
 2248      666C656E 
 2248      20696E76 
 2249 0042 0000     		.space	2
 2250              	.LC20:
 2251 0044 5B25733A 		.ascii	"[%s:%d][I]out buf not enough\012\000"
 2251      25645D5B 
 2251      495D6F75 
 2251      74206275 
 2251      66206E6F 
 2252 0062 0000     		.space	2
 2253              	.LC21:
 2254 0064 5B25733A 		.ascii	"[%s:%d][I]buf invalid\012\000"
 2254      25645D5B 
 2254      495D6275 
 2254      6620696E 
 2254      76616C69 
 2255 007b 00       		.space	1
 2256              	.LC22:
 2257 007c 5B25733A 		.ascii	"[%s:%d][I]head wrong! head magic:%X msg_code:%X ver"
 2257      25645D5B 
 2257      495D6865 
 2257      61642077 
 2257      726F6E67 
 2258 00af 5F6E756D 		.ascii	"_num:%X ret:%X crc:%X\012\000"
 2258      3A255820 
 2258      7265743A 
 2258      25582063 
 2258      72633A25 
 2259              		.section	.rodata.sota_process.str1.4,"aMS",%progbits,1
 2260              		.align	2
 2261              	.LC23:
 2262 0000 5B25733A 		.ascii	"[%s:%d][I]process sota msg %d\012\000"
 2262      25645D5B 
 2262      495D7072 
 2262      6F636573 
 2262      7320736F 
 2263 001f 00       		.space	1
 2264              	.LC24:
 2265 0020 5B25733A 		.ascii	"[%s:%d][I]Rx invalid packet\012\000"
 2265      25645D5B 
 2265      495D5278 
 2265      20696E76 
 2265      616C6964 
 2266              		.section	.rodata.sota_status_check.str1.4,"aMS",%progbits,1
 2267              		.align	2
 2268              	.LC14:
 2269 0000 5B25733A 		.ascii	"[%s:%d][I]flag read err\012\000"
 2269      25645D5B 
 2269      495D666C 
 2269      61672072 
 2269      65616420 
 2270 0019 000000   		.space	3
 2271              	.LC15:
 2272 001c 5B25733A 		.ascii	"[%s:%d][I]state:%d flash ver:%s\012\000"
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 57


 2272      25645D5B 
 2272      495D7374 
 2272      6174653A 
 2272      25642066 
 2273 003d 000000   		.space	3
 2274              	.LC16:
 2275 0040 5B25733A 		.ascii	"[%s:%d][I]upgrade result: %d\012\000"
 2275      25645D5B 
 2275      495D7570 
 2275      67726164 
 2275      65207265 
 2276 005e 0000     		.space	2
 2277              	.LC17:
 2278 0060 5B25733A 		.ascii	"[%s:%d][I]Update version %s success\012\000"
 2278      25645D5B 
 2278      495D5570 
 2278      64617465 
 2278      20766572 
 2279              		.section	.rodata.sota_timeout_handler.str1.4,"aMS",%progbits,1
 2280              		.align	2
 2281              	.LC25:
 2282 0000 5B25733A 		.ascii	"[%s:%d][I]Download block %d over time\012\000"
 2282      25645D5B 
 2282      495D446F 
 2282      776E6C6F 
 2282      61642062 
 2283 0027 00       		.space	1
 2284              	.LC26:
 2285 0028 5B25733A 		.ascii	"[%s:%d][I]Download finish. excute over time\012\000"
 2285      25645D5B 
 2285      495D446F 
 2285      776E6C6F 
 2285      61642066 
 2286              		.section	.rodata.sota_update_exc_process.str1.4,"aMS",%progbits,1
 2287              		.align	2
 2288              	.LC12:
 2289 0000 5B25733A 		.ascii	"[%s:%d][I]Begin excute update\012\000"
 2289      25645D5B 
 2289      495D4265 
 2289      67696E20 
 2289      65786375 
 2290 001f 00       		.space	1
 2291              	.LC13:
 2292 0020 5B25733A 		.ascii	"[%s:%d][I]Active software failed ret:%d.\012\000"
 2292      25645D5B 
 2292      495D4163 
 2292      74697665 
 2292      20736F66 
 2293              		.section	.rodata.ver_to_hex.str1.4,"aMS",%progbits,1
 2294              		.align	2
 2295              	.LC0:
 2296 0000 25303258 		.ascii	"%02X\000"
 2296      00
 2297              		.text
 2298              	.Letext0:
 2299              		.file 2 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 2300              		.file 3 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 58


 2301              		.file 4 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/include/ota/ota_api.h"
 2302              		.file 5 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\lib\\gcc\\arm-none-eabi
 2303              		.file 6 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/include/sota/sota.h"
 2304              		.file 7 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate/flag_ma
 2305              		.file 8 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 2306              		.file 9 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 2307              		.file 10 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include
 2308              		.file 11 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/include/ota/package.h"
 2309              		.file 12 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate/upgrad
 2310              		.file 13 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include
 2311              		.file 14 "<built-in>"
 2312              		.file 15 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/sota/sota_hal.h"
 2313              		.file 16 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 59


DEFINED SYMBOLS
                            *ABS*:00000000 sota.c
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:18     .text.chartoint:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:24     .text.chartoint:00000000 chartoint
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:73     .text.func_flag_read:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:79     .text.func_flag_read:00000000 func_flag_read
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:107    .text.func_flag_read:00000014 $d
                            *COM*:0000002c g_flash_op
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:112    .text.func_flag_write:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:118    .text.func_flag_write:00000000 func_flag_write
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:146    .text.func_flag_write:00000014 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:151    .text.ver_to_hex:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:157    .text.ver_to_hex:00000000 ver_to_hex
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:245    .text.ver_to_hex:0000003c $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:250    .text.sota_at_send:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:256    .text.sota_at_send:00000000 sota_at_send
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:408    .text.sota_at_send:000000d0 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:416    .text.sota_send_response_code:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:422    .text.sota_send_response_code:00000000 sota_send_response_code
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:464    .text.sota_send_request_block:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:470    .text.sota_send_request_block:00000000 sota_send_request_block
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:542    .text.sota_send_request_block:0000004c $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:548    .text.sota_data_block_process:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:554    .text.sota_data_block_process:00000000 sota_data_block_process
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:827    .text.sota_data_block_process:0000012c $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:842    .text.sota_reset_record_info:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:848    .text.sota_reset_record_info:00000000 sota_reset_record_info
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:907    .text.sota_reset_record_info:00000048 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:912    .text.sota_new_ver_process:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:918    .text.sota_new_ver_process:00000000 sota_new_ver_process
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1097   .text.sota_new_ver_process:000000f0 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1108   .text.sota_update_exc_process:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1114   .text.sota_update_exc_process:00000000 sota_update_exc_process
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1204   .text.sota_update_exc_process:00000064 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1214   .text.sota_status_check:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1220   .text.sota_status_check:00000000 sota_status_check
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1401   .text.sota_status_check:00000108 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1413   .text.sota_parse:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1420   .text.sota_parse:00000000 sota_parse
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1684   .text.sota_parse:00000128 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1695   .text.sota_process:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1702   .text.sota_process:00000000 sota_process
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1758   .text.sota_process:00000038 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1878   .text.sota_process:000000c0 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1886   .text.sota_timeout_handler:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1893   .text.sota_timeout_handler:00000000 sota_timeout_handler
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1966   .text.sota_timeout_handler:00000058 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1976   .text.sota_init:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1983   .text.sota_init:00000000 sota_init
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2129   .text.sota_init:00000094 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2138   .bss.g_at_update_record:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2142   .bss.g_at_update_record:00000000 g_at_update_record
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2145   .bss.g_storage_device:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2149   .bss.g_storage_device:00000000 g_storage_device
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2152   .rodata.__func__.6893:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2156   .rodata.__func__.6893:00000000 __func__.6893
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2159   .rodata.__func__.6915:00000000 $d
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s 			page 60


c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2163   .rodata.__func__.6915:00000000 __func__.6915
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2166   .rodata.__func__.6936:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2170   .rodata.__func__.6936:00000000 __func__.6936
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2173   .rodata.__func__.6943:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2177   .rodata.__func__.6943:00000000 __func__.6943
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2180   .rodata.__func__.6949:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2184   .rodata.__func__.6949:00000000 __func__.6949
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2187   .rodata.__func__.6960:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2191   .rodata.__func__.6960:00000000 __func__.6960
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2194   .rodata.__func__.6971:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2198   .rodata.__func__.6971:00000000 __func__.6971
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2201   .rodata.__func__.6978:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2205   .rodata.__func__.6978:00000000 __func__.6978
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2208   .rodata.sota_at_send.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2214   .rodata.sota_data_block_process.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2234   .rodata.sota_new_ver_process.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2244   .rodata.sota_parse.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2260   .rodata.sota_process.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2267   .rodata.sota_status_check.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2280   .rodata.sota_timeout_handler.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2287   .rodata.sota_update_exc_process.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:2294   .rodata.ver_to_hex.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1764   .text.sota_process:0000003d $d
c:\Users\lenovo\AppData\Local\Temp\ccf6iqMh.s:1764   .text.sota_process:0000003e $t

UNDEFINED SYMBOLS
sprintf
memset
memcpy
HexStrToByte
crc_check
snprintf
flag_write
strncmp
flag_read
flag_upgrade_get_result
strchr
pack_init_device
pack_get_device
flag_init
flag_upgrade_init
