ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"board.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.set_msp,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	set_msp:
  25              	.LFB133:
  26              		.file 1 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src/board.
   1:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** /*----------------------------------------------------------------------------
   2:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * Copyright (c) <2016-2018>, <Huawei Technologies Co., Ltd>
   3:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * All rights reserved.
   4:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * are permitted provided that the following conditions are met:
   6:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * conditions and the following disclaimer.
   8:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * provided with the distribution.
  11:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * to endorse or promote products derived from this software without specific prior written
  13:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * permission.
  14:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  *---------------------------------------------------------------------------*/
  26:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** /*----------------------------------------------------------------------------
  27:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * Notice of Export Control Law
  28:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * ===============================================
  29:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  * applicable export control laws and regulations.
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 2


  33:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****  *---------------------------------------------------------------------------*/
  34:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  35:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #include "stm32l4xx.h"
  36:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #include "board.h"
  37:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #include "hal_flash.h"
  38:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #include "hal_qspi_flash.h"
  39:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  40:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #define OTA_DEBUG
  41:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  42:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #ifdef OTA_DEBUG
  43:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  44:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #define OTA_LOG(fmt, ...) \
  45:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     do \
  46:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     { \
  47:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         printf("[OTA][%s:%d] " fmt "\r\n", \
  48:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****                __FUNCTION__, __LINE__, ##__VA_ARGS__); \
  49:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     } while (0)
  50:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #else
  51:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #define OTA_LOG(fmt, ...)
  52:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #endif
  53:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  54:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #define OTA_FLASH_BASE             0x08000000
  55:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #define OTA_MEMORY_BASE            0x20000000
  56:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  57:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #define OTA_PC_MASK                0xFF000000
  58:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #define OTA_STACK_MASK             0x2FF00000
  59:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  60:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** #define OTA_COPY_BUF_SIZE          0x1000
  61:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  62:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** typedef void (*jump_func)(void);
  63:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  64:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** static void set_msp(uint32_t stack)
  65:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** {
  27              		.loc 1 65 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
  66:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     __asm volatile ("MSR MSP, r0; BX r14");
  33              		.loc 1 66 0
  34              		.syntax unified
  35              	@ 66 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src/board.c" 1
  36 0000 80F30888 		MSR MSP, r0; BX r14
  36      7047
  37              	@ 0 "" 2
  67:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** }
  38              		.loc 1 67 0
  39              		.thumb
  40              		.syntax unified
  41 0006 7047     		bx	lr
  42              		.cfi_endproc
  43              	.LFE133:
  45              		.section	.text.prv_inner2spi_copy,"ax",%progbits
  46              		.align	1
  47              		.syntax unified
  48              		.thumb
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 3


  49              		.thumb_func
  50              		.fpu fpv4-sp-d16
  52              	prv_inner2spi_copy:
  53              	.LFB135:
  68:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  69:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** static int prv_spi2inner_copy(uint32_t addr_source, int32_t image_len)
  70:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** {
  71:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     int ret;
  72:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     int32_t copy_len;
  73:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     uint8_t buf[OTA_COPY_BUF_SIZE];
  74:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     uint32_t addr_dest = OTA_DEFAULT_IMAGE_ADDR;
  75:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  76:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     ret = hal_flash_erase(addr_dest, image_len);
  77:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     if (ret != 0)
  78:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
  79:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("write inner flash failed");
  80:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_INNER_FLASH_WRITE;
  81:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
  82:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  83:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     while (image_len > 0)
  84:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
  85:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         copy_len = image_len > OTA_COPY_BUF_SIZE ? OTA_COPY_BUF_SIZE : image_len;
  86:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  87:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         ret = hal_spi_flash_read(buf, copy_len, addr_source);
  88:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         if (ret != 0)
  89:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         {
  90:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             (void)hal_flash_lock();
  91:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             OTA_LOG("read spi flash failed");
  92:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_SPI_FLASH_READ;
  93:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
  94:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         addr_source += copy_len;
  95:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
  96:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         ret = hal_flash_write(buf, copy_len, &addr_dest);
  97:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         if (ret != 0)
  98:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         {
  99:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             (void)hal_flash_lock();
 100:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             OTA_LOG("write inner flash failed");
 101:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_INNER_FLASH_WRITE;
 102:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 103:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 104:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         image_len -= copy_len;
 105:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 106:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 107:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     (void)hal_flash_lock();
 108:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 109:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     return OTA_ERRNO_OK;
 110:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** }
 111:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 112:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** static int prv_inner2spi_copy(int32_t image_len)
 113:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** {
  54              		.loc 1 113 0
  55              		.cfi_startproc
  56              		@ args = 0, pretend = 0, frame = 4104
  57              		@ frame_needed = 0, uses_anonymous_args = 0
  58              	.LVL1:
  59 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  60              	.LCFI0:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 4


  61              		.cfi_def_cfa_offset 20
  62              		.cfi_offset 4, -20
  63              		.cfi_offset 5, -16
  64              		.cfi_offset 6, -12
  65              		.cfi_offset 7, -8
  66              		.cfi_offset 14, -4
  67 0002 ADF5805D 		sub	sp, sp, #4096
  68              	.LCFI1:
  69              		.cfi_def_cfa_offset 4116
  70 0006 83B0     		sub	sp, sp, #12
  71              	.LCFI2:
  72              		.cfi_def_cfa_offset 4128
  73 0008 0546     		mov	r5, r0
  74              	.LVL2:
 114:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     int ret;
 115:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     int32_t copy_len;
 116:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     uint8_t buf[OTA_COPY_BUF_SIZE];
 117:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     uint32_t addr_source = OTA_DEFAULT_IMAGE_ADDR;
 118:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     uint32_t addr_dest = OTA_IMAGE_BCK_ADDR;
  75              		.loc 1 118 0
  76 000a 4FF4A020 		mov	r0, #327680
  77              	.LVL3:
  78 000e 0190     		str	r0, [sp, #4]
 119:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 120:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     ret = hal_spi_flash_erase(addr_dest, image_len);
  79              		.loc 1 120 0
  80 0010 2946     		mov	r1, r5
  81 0012 FFF7FEFF 		bl	hal_spi_flash_erase
  82              	.LVL4:
 121:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     if (ret != 0)
  83              		.loc 1 121 0
  84 0016 C8B9     		cbnz	r0, .L10
  85 0018 0746     		mov	r7, r0
 117:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     uint32_t addr_dest = OTA_IMAGE_BCK_ADDR;
  86              		.loc 1 117 0
  87 001a 1A4E     		ldr	r6, .L13
  88              	.LVL5:
  89              	.L3:
 122:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 123:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("write spi flash failed");
 124:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_SPI_FLASH_WRITE;
 125:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 126:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 127:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     while (image_len > 0)
  90              		.loc 1 127 0
  91 001c 002D     		cmp	r5, #0
  92 001e 24DD     		ble	.L2
 128:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 129:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         copy_len = image_len > OTA_COPY_BUF_SIZE ? OTA_COPY_BUF_SIZE : image_len;
  93              		.loc 1 129 0
  94 0020 2C46     		mov	r4, r5
  95 0022 B5F5805F 		cmp	r5, #4096
  96 0026 A8BF     		it	ge
  97 0028 4FF48054 		movge	r4, #4096
  98              	.LVL6:
 130:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 131:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         ret = hal_flash_read(buf, copy_len, addr_source);
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 5


  99              		.loc 1 131 0
 100 002c 3246     		mov	r2, r6
 101 002e 2146     		mov	r1, r4
 102 0030 02A8     		add	r0, sp, #8
 103              	.LVL7:
 104 0032 FFF7FEFF 		bl	hal_flash_read
 105              	.LVL8:
 132:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         if (ret != 0)
 106              		.loc 1 132 0
 107 0036 88B9     		cbnz	r0, .L11
 133:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         {
 134:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             OTA_LOG("read inner flash failed");
 135:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_INNER_FLASH_READ;
 136:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 137:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         addr_source += copy_len;
 108              		.loc 1 137 0
 109 0038 2644     		add	r6, r6, r4
 110              	.LVL9:
 138:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 139:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         ret = hal_spi_flash_write(buf, copy_len, &addr_dest);
 111              		.loc 1 139 0
 112 003a 02AB     		add	r3, sp, #8
 113 003c 01AA     		add	r2, sp, #4
 114 003e 2146     		mov	r1, r4
 115 0040 1846     		mov	r0, r3
 116              	.LVL10:
 117 0042 FFF7FEFF 		bl	hal_spi_flash_write
 118              	.LVL11:
 140:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         if (ret != 0)
 119              		.loc 1 140 0
 120 0046 A8B9     		cbnz	r0, .L12
 141:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         {
 142:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             OTA_LOG("write spi flash failed");
 143:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_SPI_FLASH_WRITE;
 144:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 145:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 146:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         image_len -= copy_len;
 121              		.loc 1 146 0
 122 0048 2D1B     		subs	r5, r5, r4
 123              	.LVL12:
 124 004a E7E7     		b	.L3
 125              	.LVL13:
 126              	.L10:
 123:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_SPI_FLASH_WRITE;
 127              		.loc 1 123 0
 128 004c 7B22     		movs	r2, #123
 129 004e 0E49     		ldr	r1, .L13+4
 130 0050 0E48     		ldr	r0, .L13+8
 131              	.LVL14:
 132 0052 FFF7FEFF 		bl	printf
 133              	.LVL15:
 124:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 134              		.loc 1 124 0
 135 0056 6FF00307 		mvn	r7, #3
 136 005a 06E0     		b	.L2
 137              	.LVL16:
 138              	.L11:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 6


 134:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_INNER_FLASH_READ;
 139              		.loc 1 134 0
 140 005c 8622     		movs	r2, #134
 141 005e 0A49     		ldr	r1, .L13+4
 142 0060 0B48     		ldr	r0, .L13+12
 143              	.LVL17:
 144 0062 FFF7FEFF 		bl	printf
 145              	.LVL18:
 135:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 146              		.loc 1 135 0
 147 0066 6FF00407 		mvn	r7, #4
 148              	.LVL19:
 149              	.L2:
 147:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 148:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 149:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     return OTA_ERRNO_OK;
 150:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** }
 150              		.loc 1 150 0
 151 006a 3846     		mov	r0, r7
 152 006c 0DF5805D 		add	sp, sp, #4096
 153 0070 03B0     		add	sp, sp, #12
 154              	.LCFI3:
 155              		.cfi_remember_state
 156              		.cfi_def_cfa_offset 20
 157              		@ sp needed
 158 0072 F0BD     		pop	{r4, r5, r6, r7, pc}
 159              	.LVL20:
 160              	.L12:
 161              	.LCFI4:
 162              		.cfi_restore_state
 142:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_SPI_FLASH_WRITE;
 163              		.loc 1 142 0
 164 0074 8E22     		movs	r2, #142
 165 0076 0449     		ldr	r1, .L13+4
 166 0078 0448     		ldr	r0, .L13+8
 167              	.LVL21:
 168 007a FFF7FEFF 		bl	printf
 169              	.LVL22:
 143:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 170              		.loc 1 143 0
 171 007e 6FF00307 		mvn	r7, #3
 172 0082 F2E7     		b	.L2
 173              	.L14:
 174              		.align	2
 175              	.L13:
 176 0084 00000108 		.word	134283264
 177 0088 00000000 		.word	.LANCHOR0
 178 008c 00000000 		.word	.LC0
 179 0090 28000000 		.word	.LC1
 180              		.cfi_endproc
 181              	.LFE135:
 183              		.section	.text.prv_spi2inner_copy,"ax",%progbits
 184              		.align	1
 185              		.syntax unified
 186              		.thumb
 187              		.thumb_func
 188              		.fpu fpv4-sp-d16
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 7


 190              	prv_spi2inner_copy:
 191              	.LFB134:
  70:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     int ret;
 192              		.loc 1 70 0
 193              		.cfi_startproc
 194              		@ args = 0, pretend = 0, frame = 4104
 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196              	.LVL23:
 197 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 198              	.LCFI5:
 199              		.cfi_def_cfa_offset 20
 200              		.cfi_offset 4, -20
 201              		.cfi_offset 5, -16
 202              		.cfi_offset 6, -12
 203              		.cfi_offset 7, -8
 204              		.cfi_offset 14, -4
 205 0002 ADF5805D 		sub	sp, sp, #4096
 206              	.LCFI6:
 207              		.cfi_def_cfa_offset 4116
 208 0006 83B0     		sub	sp, sp, #12
 209              	.LCFI7:
 210              		.cfi_def_cfa_offset 4128
 211 0008 0646     		mov	r6, r0
 212 000a 0D46     		mov	r5, r1
  74:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 213              		.loc 1 74 0
 214 000c 2048     		ldr	r0, .L26
 215              	.LVL24:
 216 000e 0190     		str	r0, [sp, #4]
  76:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     if (ret != 0)
 217              		.loc 1 76 0
 218 0010 FFF7FEFF 		bl	hal_flash_erase
 219              	.LVL25:
  77:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 220              		.loc 1 77 0
 221 0014 0746     		mov	r7, r0
 222 0016 B8B9     		cbnz	r0, .L22
 223              	.L16:
  83:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 224              		.loc 1 83 0
 225 0018 002D     		cmp	r5, #0
 226 001a 31DD     		ble	.L23
  85:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 227              		.loc 1 85 0
 228 001c 2C46     		mov	r4, r5
 229 001e B5F5805F 		cmp	r5, #4096
 230 0022 A8BF     		it	ge
 231 0024 4FF48054 		movge	r4, #4096
 232              	.LVL26:
  87:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         if (ret != 0)
 233              		.loc 1 87 0
 234 0028 3246     		mov	r2, r6
 235 002a 2146     		mov	r1, r4
 236 002c 02A8     		add	r0, sp, #8
 237              	.LVL27:
 238 002e FFF7FEFF 		bl	hal_spi_flash_read
 239              	.LVL28:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 8


  88:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         {
 240              		.loc 1 88 0
 241 0032 88B9     		cbnz	r0, .L24
  94:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 242              		.loc 1 94 0
 243 0034 2644     		add	r6, r6, r4
 244              	.LVL29:
  96:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         if (ret != 0)
 245              		.loc 1 96 0
 246 0036 02AB     		add	r3, sp, #8
 247 0038 01AA     		add	r2, sp, #4
 248 003a 2146     		mov	r1, r4
 249 003c 1846     		mov	r0, r3
 250              	.LVL30:
 251 003e FFF7FEFF 		bl	hal_flash_write
 252              	.LVL31:
  97:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         {
 253              		.loc 1 97 0
 254 0042 98B9     		cbnz	r0, .L25
 104:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 255              		.loc 1 104 0
 256 0044 2D1B     		subs	r5, r5, r4
 257              	.LVL32:
 258 0046 E7E7     		b	.L16
 259              	.LVL33:
 260              	.L22:
  79:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_INNER_FLASH_WRITE;
 261              		.loc 1 79 0
 262 0048 4F22     		movs	r2, #79
 263 004a 1249     		ldr	r1, .L26+4
 264 004c 1248     		ldr	r0, .L26+8
 265              	.LVL34:
 266 004e FFF7FEFF 		bl	printf
 267              	.LVL35:
  80:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 268              		.loc 1 80 0
 269 0052 6FF00507 		mvn	r7, #5
 270              	.LVL36:
 271 0056 15E0     		b	.L15
 272              	.LVL37:
 273              	.L24:
  90:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             OTA_LOG("read spi flash failed");
 274              		.loc 1 90 0
 275 0058 FFF7FEFF 		bl	hal_flash_lock
 276              	.LVL38:
  91:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_SPI_FLASH_READ;
 277              		.loc 1 91 0
 278 005c 5B22     		movs	r2, #91
 279 005e 0D49     		ldr	r1, .L26+4
 280 0060 0E48     		ldr	r0, .L26+12
 281 0062 FFF7FEFF 		bl	printf
 282              	.LVL39:
  92:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 283              		.loc 1 92 0
 284 0066 6FF00207 		mvn	r7, #2
 285 006a 0BE0     		b	.L15
 286              	.LVL40:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 9


 287              	.L25:
  99:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             OTA_LOG("write inner flash failed");
 288              		.loc 1 99 0
 289 006c FFF7FEFF 		bl	hal_flash_lock
 290              	.LVL41:
 100:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_INNER_FLASH_WRITE;
 291              		.loc 1 100 0
 292 0070 6422     		movs	r2, #100
 293 0072 0849     		ldr	r1, .L26+4
 294 0074 0848     		ldr	r0, .L26+8
 295 0076 FFF7FEFF 		bl	printf
 296              	.LVL42:
 101:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 297              		.loc 1 101 0
 298 007a 6FF00507 		mvn	r7, #5
 299 007e 01E0     		b	.L15
 300              	.LVL43:
 301              	.L23:
 107:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 302              		.loc 1 107 0
 303 0080 FFF7FEFF 		bl	hal_flash_lock
 304              	.LVL44:
 305              	.L15:
 110:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 306              		.loc 1 110 0
 307 0084 3846     		mov	r0, r7
 308 0086 0DF5805D 		add	sp, sp, #4096
 309 008a 03B0     		add	sp, sp, #12
 310              	.LCFI8:
 311              		.cfi_def_cfa_offset 20
 312              		@ sp needed
 313 008c F0BD     		pop	{r4, r5, r6, r7, pc}
 314              	.LVL45:
 315              	.L27:
 316 008e 00BF     		.align	2
 317              	.L26:
 318 0090 00000108 		.word	134283264
 319 0094 00000000 		.word	.LANCHOR1
 320 0098 00000000 		.word	.LC2
 321 009c 28000000 		.word	.LC3
 322              		.cfi_endproc
 323              	.LFE134:
 325              		.section	.text.board_jump2app,"ax",%progbits
 326              		.align	1
 327              		.global	board_jump2app
 328              		.syntax unified
 329              		.thumb
 330              		.thumb_func
 331              		.fpu fpv4-sp-d16
 333              	board_jump2app:
 334              	.LFB136:
 151:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 152:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** int board_jump2app(void)
 153:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** {
 335              		.loc 1 153 0
 336              		.cfi_startproc
 337              		@ args = 0, pretend = 0, frame = 0
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 10


 338              		@ frame_needed = 0, uses_anonymous_args = 0
 339 0000 10B5     		push	{r4, lr}
 340              	.LCFI9:
 341              		.cfi_def_cfa_offset 8
 342              		.cfi_offset 4, -8
 343              		.cfi_offset 14, -4
 154:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     jump_func jump;
 155:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     uint32_t pc = *(__IO uint32_t *)(OTA_DEFAULT_IMAGE_ADDR + 4);
 344              		.loc 1 155 0
 345 0002 124B     		ldr	r3, .L33
 346 0004 1C68     		ldr	r4, [r3]
 347              	.LVL46:
 156:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     uint32_t stack = *(__IO uint32_t *)(OTA_DEFAULT_IMAGE_ADDR);
 348              		.loc 1 156 0
 349 0006 043B     		subs	r3, r3, #4
 350 0008 1868     		ldr	r0, [r3]
 351              	.LVL47:
 157:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 158:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     if ((pc & OTA_PC_MASK) == OTA_FLASH_BASE)
 352              		.loc 1 158 0
 353 000a 04F07F43 		and	r3, r4, #-16777216
 354 000e B3F1006F 		cmp	r3, #134217728
 355 0012 12D1     		bne	.L29
 159:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 160:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         if ((stack & OTA_STACK_MASK) == OTA_MEMORY_BASE)
 356              		.loc 1 160 0
 357 0014 0E4A     		ldr	r2, .L33+4
 358 0016 0240     		ands	r2, r2, r0
 359 0018 B2F1005F 		cmp	r2, #536870912
 360 001c 04D1     		bne	.L30
 361              	.LVL48:
 161:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         {
 162:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             jump = (jump_func)pc;
 163:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             set_msp(stack);
 362              		.loc 1 163 0
 363 001e FFF7FEFF 		bl	set_msp
 364              	.LVL49:
 164:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             jump();
 365              		.loc 1 164 0
 366 0022 A047     		blx	r4
 367              	.LVL50:
 165:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 166:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         else
 167:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         {
 168:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             OTA_LOG("stack value(%lx) of the image is ilegal", stack);
 169:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_ILEGAL_STACK;
 170:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 171:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 172:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     else
 173:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 174:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("PC value(%lx) of the image is ilegal", pc);
 175:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_ILEGAL_PC;
 176:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 177:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 178:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     return OTA_ERRNO_OK;
 368              		.loc 1 178 0
 369 0024 0020     		movs	r0, #0
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 11


 370              	.LVL51:
 371              	.L28:
 179:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** }
 372              		.loc 1 179 0
 373 0026 10BD     		pop	{r4, pc}
 374              	.LVL52:
 375              	.L30:
 168:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****             return OTA_ERRNO_ILEGAL_STACK;
 376              		.loc 1 168 0
 377 0028 0346     		mov	r3, r0
 378 002a A822     		movs	r2, #168
 379 002c 0949     		ldr	r1, .L33+8
 380 002e 0A48     		ldr	r0, .L33+12
 381              	.LVL53:
 382 0030 FFF7FEFF 		bl	printf
 383              	.LVL54:
 169:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         }
 384              		.loc 1 169 0
 385 0034 6FF00700 		mvn	r0, #7
 386 0038 F5E7     		b	.L28
 387              	.LVL55:
 388              	.L29:
 174:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_ILEGAL_PC;
 389              		.loc 1 174 0
 390 003a 2346     		mov	r3, r4
 391 003c AE22     		movs	r2, #174
 392 003e 0549     		ldr	r1, .L33+8
 393 0040 0648     		ldr	r0, .L33+16
 394              	.LVL56:
 395 0042 FFF7FEFF 		bl	printf
 396              	.LVL57:
 175:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 397              		.loc 1 175 0
 398 0046 6FF00600 		mvn	r0, #6
 399 004a ECE7     		b	.L28
 400              	.L34:
 401              		.align	2
 402              	.L33:
 403 004c 04000108 		.word	134283268
 404 0050 0000F02F 		.word	804257792
 405 0054 00000000 		.word	.LANCHOR2
 406 0058 00000000 		.word	.LC4
 407 005c 38000000 		.word	.LC5
 408              		.cfi_endproc
 409              	.LFE136:
 411              		.section	.text.board_update_copy,"ax",%progbits
 412              		.align	1
 413              		.global	board_update_copy
 414              		.syntax unified
 415              		.thumb
 416              		.thumb_func
 417              		.fpu fpv4-sp-d16
 419              	board_update_copy:
 420              	.LFB137:
 180:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 181:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** int board_update_copy(int32_t old_image_len, int32_t new_image_len, uint32_t new_image_addr)
 182:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** {
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 12


 421              		.loc 1 182 0
 422              		.cfi_startproc
 423              		@ args = 0, pretend = 0, frame = 0
 424              		@ frame_needed = 0, uses_anonymous_args = 0
 425              	.LVL58:
 426 0000 70B5     		push	{r4, r5, r6, lr}
 427              	.LCFI10:
 428              		.cfi_def_cfa_offset 16
 429              		.cfi_offset 4, -16
 430              		.cfi_offset 5, -12
 431              		.cfi_offset 6, -8
 432              		.cfi_offset 14, -4
 433 0002 82B0     		sub	sp, sp, #8
 434              	.LCFI11:
 435              		.cfi_def_cfa_offset 24
 436 0004 0C46     		mov	r4, r1
 183:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     int ret;
 184:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 185:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     if (old_image_len < 0 || new_image_len < 0)
 437              		.loc 1 185 0
 438 0006 0028     		cmp	r0, #0
 439 0008 12DB     		blt	.L36
 440 000a 1646     		mov	r6, r2
 441              		.loc 1 185 0 is_stmt 0 discriminator 1
 442 000c 0029     		cmp	r1, #0
 443 000e 0FDB     		blt	.L36
 186:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 187:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("ilegal old_image_len(%ld) or new_image_len(%ld)", old_image_len, new_image_len);
 188:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_ILEGAL_PARAM;
 189:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 190:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 191:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     ret = prv_inner2spi_copy(old_image_len);
 444              		.loc 1 191 0 is_stmt 1
 445 0010 FFF7FEFF 		bl	prv_inner2spi_copy
 446              	.LVL59:
 192:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     if (ret != 0)
 447              		.loc 1 192 0
 448 0014 0546     		mov	r5, r0
 449 0016 A8B9     		cbnz	r0, .L41
 193:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 194:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("back up old image failed");
 195:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return ret;
 196:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 197:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 198:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     ret = prv_spi2inner_copy(new_image_addr, new_image_len);
 450              		.loc 1 198 0
 451 0018 2146     		mov	r1, r4
 452 001a 3046     		mov	r0, r6
 453              	.LVL60:
 454 001c FFF7FEFF 		bl	prv_spi2inner_copy
 455              	.LVL61:
 199:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     if (ret != 0)
 456              		.loc 1 199 0
 457 0020 0546     		mov	r5, r0
 458 0022 A0B1     		cbz	r0, .L35
 200:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 201:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("update image failed");
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 13


 459              		.loc 1 201 0
 460 0024 C922     		movs	r2, #201
 461 0026 0B49     		ldr	r1, .L42
 462 0028 0B48     		ldr	r0, .L42+4
 463              	.LVL62:
 464 002a FFF7FEFF 		bl	printf
 465              	.LVL63:
 202:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return ret;
 466              		.loc 1 202 0
 467 002e 0EE0     		b	.L35
 468              	.LVL64:
 469              	.L36:
 187:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_ILEGAL_PARAM;
 470              		.loc 1 187 0
 471 0030 0094     		str	r4, [sp]
 472 0032 0346     		mov	r3, r0
 473 0034 BB22     		movs	r2, #187
 474              	.LVL65:
 475 0036 0749     		ldr	r1, .L42
 476              	.LVL66:
 477 0038 0848     		ldr	r0, .L42+8
 478              	.LVL67:
 479 003a FFF7FEFF 		bl	printf
 480              	.LVL68:
 188:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 481              		.loc 1 188 0
 482 003e 4FF0FF35 		mov	r5, #-1
 483 0042 04E0     		b	.L35
 484              	.LVL69:
 485              	.L41:
 194:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return ret;
 486              		.loc 1 194 0
 487 0044 C222     		movs	r2, #194
 488 0046 0349     		ldr	r1, .L42
 489 0048 0548     		ldr	r0, .L42+12
 490              	.LVL70:
 491 004a FFF7FEFF 		bl	printf
 492              	.LVL71:
 493              	.L35:
 203:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 204:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 205:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     return OTA_ERRNO_OK;
 206:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** }
 494              		.loc 1 206 0
 495 004e 2846     		mov	r0, r5
 496 0050 02B0     		add	sp, sp, #8
 497              	.LCFI12:
 498              		.cfi_def_cfa_offset 16
 499              		@ sp needed
 500 0052 70BD     		pop	{r4, r5, r6, pc}
 501              	.LVL72:
 502              	.L43:
 503              		.align	2
 504              	.L42:
 505 0054 00000000 		.word	.LANCHOR3
 506 0058 68000000 		.word	.LC8
 507 005c 00000000 		.word	.LC6
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 14


 508 0060 40000000 		.word	.LC7
 509              		.cfi_endproc
 510              	.LFE137:
 512              		.section	.text.board_rollback_copy,"ax",%progbits
 513              		.align	1
 514              		.global	board_rollback_copy
 515              		.syntax unified
 516              		.thumb
 517              		.thumb_func
 518              		.fpu fpv4-sp-d16
 520              	board_rollback_copy:
 521              	.LFB138:
 207:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 208:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** int board_rollback_copy(int32_t image_len)
 209:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** {
 522              		.loc 1 209 0
 523              		.cfi_startproc
 524              		@ args = 0, pretend = 0, frame = 0
 525              		@ frame_needed = 0, uses_anonymous_args = 0
 526              	.LVL73:
 527 0000 10B5     		push	{r4, lr}
 528              	.LCFI13:
 529              		.cfi_def_cfa_offset 8
 530              		.cfi_offset 4, -8
 531              		.cfi_offset 14, -4
 210:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     int ret;
 211:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 212:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     if (image_len < 0)
 532              		.loc 1 212 0
 533 0002 011E     		subs	r1, r0, #0
 534 0004 07DB     		blt	.L48
 213:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 214:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("ilegal image_len:%ld", image_len);
 215:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_ILEGAL_PARAM;
 216:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 217:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 218:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     ret = prv_spi2inner_copy(OTA_IMAGE_BCK_ADDR, image_len);
 535              		.loc 1 218 0
 536 0006 4FF4A020 		mov	r0, #327680
 537              	.LVL74:
 538 000a FFF7FEFF 		bl	prv_spi2inner_copy
 539              	.LVL75:
 219:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     if (ret != 0)
 540              		.loc 1 219 0
 541 000e 0446     		mov	r4, r0
 542 0010 50B9     		cbnz	r0, .L49
 543              	.LVL76:
 544              	.L44:
 220:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     {
 221:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("rollback image failed");
 222:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return ret;
 223:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     }
 224:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** 
 225:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****     return 0;
 226:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c **** }...
 545              		.loc 1 226 0
 546 0012 2046     		mov	r0, r4
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 15


 547 0014 10BD     		pop	{r4, pc}
 548              	.LVL77:
 549              	.L48:
 214:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("ilegal image_len:%ld", image_len);
 550              		.loc 1 214 0
 551 0016 0B46     		mov	r3, r1
 552 0018 D622     		movs	r2, #214
 553 001a 0649     		ldr	r1, .L50
 554 001c 0648     		ldr	r0, .L50+4
 555              	.LVL78:
 556 001e FFF7FEFF 		bl	printf
 557              	.LVL79:
 215:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return OTA_ERRNO_ILEGAL_PARAM;
 558              		.loc 1 215 0
 559 0022 4FF0FF34 		mov	r4, #-1
 560 0026 F4E7     		b	.L44
 561              	.LVL80:
 562              	.L49:
 221:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         OTA_LOG("rollback image failed");
 563              		.loc 1 221 0
 564 0028 DD22     		movs	r2, #221
 565 002a 0249     		ldr	r1, .L50
 566 002c 0348     		ldr	r0, .L50+8
 567              	.LVL81:
 568 002e FFF7FEFF 		bl	printf
 569              	.LVL82:
 222:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Src\board.c ****         return ret;
 570              		.loc 1 222 0
 571 0032 EEE7     		b	.L44
 572              	.L51:
 573              		.align	2
 574              	.L50:
 575 0034 00000000 		.word	.LANCHOR4
 576 0038 00000000 		.word	.LC9
 577 003c 24000000 		.word	.LC10
 578              		.cfi_endproc
 579              	.LFE138:
 581              		.section	.rodata.__FUNCTION__.9882,"a",%progbits
 582              		.align	2
 583              		.set	.LANCHOR1,. + 0
 586              	__FUNCTION__.9882:
 587 0000 7072765F 		.ascii	"prv_spi2inner_copy\000"
 587      73706932 
 587      696E6E65 
 587      725F636F 
 587      707900
 588              		.section	.rodata.__FUNCTION__.9894,"a",%progbits
 589              		.align	2
 590              		.set	.LANCHOR0,. + 0
 593              	__FUNCTION__.9894:
 594 0000 7072765F 		.ascii	"prv_inner2spi_copy\000"
 594      696E6E65 
 594      72327370 
 594      695F636F 
 594      707900
 595              		.section	.rodata.__FUNCTION__.9904,"a",%progbits
 596              		.align	2
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 16


 597              		.set	.LANCHOR2,. + 0
 600              	__FUNCTION__.9904:
 601 0000 626F6172 		.ascii	"board_jump2app\000"
 601      645F6A75 
 601      6D703261 
 601      707000
 602              		.section	.rodata.__FUNCTION__.9911,"a",%progbits
 603              		.align	2
 604              		.set	.LANCHOR3,. + 0
 607              	__FUNCTION__.9911:
 608 0000 626F6172 		.ascii	"board_update_copy\000"
 608      645F7570 
 608      64617465 
 608      5F636F70 
 608      7900
 609              		.section	.rodata.__FUNCTION__.9916,"a",%progbits
 610              		.align	2
 611              		.set	.LANCHOR4,. + 0
 614              	__FUNCTION__.9916:
 615 0000 626F6172 		.ascii	"board_rollback_copy\000"
 615      645F726F 
 615      6C6C6261 
 615      636B5F63 
 615      6F707900 
 616              		.section	.rodata.board_jump2app.str1.4,"aMS",%progbits,1
 617              		.align	2
 618              	.LC4:
 619 0000 5B4F5441 		.ascii	"[OTA][%s:%d] stack value(%lx) of the image is ilega"
 619      5D5B2573 
 619      3A25645D 
 619      20737461 
 619      636B2076 
 620 0033 6C0D0A00 		.ascii	"l\015\012\000"
 621 0037 00       		.space	1
 622              	.LC5:
 623 0038 5B4F5441 		.ascii	"[OTA][%s:%d] PC value(%lx) of the image is ilegal\015"
 623      5D5B2573 
 623      3A25645D 
 623      20504320 
 623      76616C75 
 624 006a 0A00     		.ascii	"\012\000"
 625              		.section	.rodata.board_rollback_copy.str1.4,"aMS",%progbits,1
 626              		.align	2
 627              	.LC9:
 628 0000 5B4F5441 		.ascii	"[OTA][%s:%d] ilegal image_len:%ld\015\012\000"
 628      5D5B2573 
 628      3A25645D 
 628      20696C65 
 628      67616C20 
 629              	.LC10:
 630 0024 5B4F5441 		.ascii	"[OTA][%s:%d] rollback image failed\015\012\000"
 630      5D5B2573 
 630      3A25645D 
 630      20726F6C 
 630      6C626163 
 631              		.section	.rodata.board_update_copy.str1.4,"aMS",%progbits,1
 632              		.align	2
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 17


 633              	.LC6:
 634 0000 5B4F5441 		.ascii	"[OTA][%s:%d] ilegal old_image_len(%ld) or new_image"
 634      5D5B2573 
 634      3A25645D 
 634      20696C65 
 634      67616C20 
 635 0033 5F6C656E 		.ascii	"_len(%ld)\015\012\000"
 635      28256C64 
 635      290D0A00 
 636 003f 00       		.space	1
 637              	.LC7:
 638 0040 5B4F5441 		.ascii	"[OTA][%s:%d] back up old image failed\015\012\000"
 638      5D5B2573 
 638      3A25645D 
 638      20626163 
 638      6B207570 
 639              	.LC8:
 640 0068 5B4F5441 		.ascii	"[OTA][%s:%d] update image failed\015\012\000"
 640      5D5B2573 
 640      3A25645D 
 640      20757064 
 640      61746520 
 641              		.section	.rodata.prv_inner2spi_copy.str1.4,"aMS",%progbits,1
 642              		.align	2
 643              	.LC0:
 644 0000 5B4F5441 		.ascii	"[OTA][%s:%d] write spi flash failed\015\012\000"
 644      5D5B2573 
 644      3A25645D 
 644      20777269 
 644      74652073 
 645 0026 0000     		.space	2
 646              	.LC1:
 647 0028 5B4F5441 		.ascii	"[OTA][%s:%d] read inner flash failed\015\012\000"
 647      5D5B2573 
 647      3A25645D 
 647      20726561 
 647      6420696E 
 648              		.section	.rodata.prv_spi2inner_copy.str1.4,"aMS",%progbits,1
 649              		.align	2
 650              	.LC2:
 651 0000 5B4F5441 		.ascii	"[OTA][%s:%d] write inner flash failed\015\012\000"
 651      5D5B2573 
 651      3A25645D 
 651      20777269 
 651      74652069 
 652              	.LC3:
 653 0028 5B4F5441 		.ascii	"[OTA][%s:%d] read spi flash failed\015\012\000"
 653      5D5B2573 
 653      3A25645D 
 653      20726561 
 653      64207370 
 654              		.text
 655              	.Letext0:
 656              		.file 2 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 657              		.file 3 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 658              		.file 4 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/arch/arm/common/cmsis/core_cm4.h"
 659              		.file 5 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Inc/system
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 18


 660              		.file 6 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 661              		.file 7 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 662              		.file 8 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\lib\\gcc\\arm-none-eabi
 663              		.file 9 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 664              		.file 10 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/kernel/include/los_typedef.h"
 665              		.file 11 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/OS_CONFIG
 666              		.file 12 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/kernel/include/los_config.h"
 667              		.file 13 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/kernel/include/los_list.h"
 668              		.file 14 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/kernel/include/los_err.h"
 669              		.file 15 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/arch/arm/arm-m/include/los_hwi.h"
 670              		.file 16 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/kernel/include/los_tick.h"
 671              		.file 17 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/kernel/include/los_event.h"
 672              		.file 18 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/kernel/include/los_task.h"
 673              		.file 19 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/kernel/base/include/los_task.ph"
 674              		.file 20 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Inc/main.
 675              		.file 21 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include
 676              		.file 22 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Hardware/
 677              		.file 23 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/targets/STM32L431_BearPi/Hardware/
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s 			page 19


DEFINED SYMBOLS
                            *ABS*:00000000 board.c
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:18     .text.set_msp:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:24     .text.set_msp:00000000 set_msp
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:46     .text.prv_inner2spi_copy:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:52     .text.prv_inner2spi_copy:00000000 prv_inner2spi_copy
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:176    .text.prv_inner2spi_copy:00000084 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:184    .text.prv_spi2inner_copy:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:190    .text.prv_spi2inner_copy:00000000 prv_spi2inner_copy
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:318    .text.prv_spi2inner_copy:00000090 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:326    .text.board_jump2app:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:333    .text.board_jump2app:00000000 board_jump2app
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:403    .text.board_jump2app:0000004c $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:412    .text.board_update_copy:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:419    .text.board_update_copy:00000000 board_update_copy
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:505    .text.board_update_copy:00000054 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:513    .text.board_rollback_copy:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:520    .text.board_rollback_copy:00000000 board_rollback_copy
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:575    .text.board_rollback_copy:00000034 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:582    .rodata.__FUNCTION__.9882:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:586    .rodata.__FUNCTION__.9882:00000000 __FUNCTION__.9882
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:589    .rodata.__FUNCTION__.9894:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:593    .rodata.__FUNCTION__.9894:00000000 __FUNCTION__.9894
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:596    .rodata.__FUNCTION__.9904:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:600    .rodata.__FUNCTION__.9904:00000000 __FUNCTION__.9904
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:603    .rodata.__FUNCTION__.9911:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:607    .rodata.__FUNCTION__.9911:00000000 __FUNCTION__.9911
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:610    .rodata.__FUNCTION__.9916:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:614    .rodata.__FUNCTION__.9916:00000000 __FUNCTION__.9916
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:617    .rodata.board_jump2app.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:626    .rodata.board_rollback_copy.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:632    .rodata.board_update_copy.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:642    .rodata.prv_inner2spi_copy.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccJsgMs1.s:649    .rodata.prv_spi2inner_copy.str1.4:00000000 $d

UNDEFINED SYMBOLS
hal_spi_flash_erase
hal_flash_read
hal_spi_flash_write
printf
hal_flash_erase
hal_spi_flash_read
hal_flash_write
hal_flash_lock
