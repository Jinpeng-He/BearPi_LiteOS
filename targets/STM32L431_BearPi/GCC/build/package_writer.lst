ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"package_writer.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.pack_write_data,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	pack_write_data:
  25              	.LFB8:
  26              		.file 1 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package/package_writ
   1:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** /*----------------------------------------------------------------------------
   2:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * Copyright (c) <2016-2018>, <Huawei Technologies Co., Ltd>
   3:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * All rights reserved.
   4:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * Redistribution and use in source and binary forms, with or without modification,
   5:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * are permitted provided that the following conditions are met:
   6:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * 1. Redistributions of source code must retain the above copyright notice, this list of
   7:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * conditions and the following disclaimer.
   8:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice, this list
   9:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * of conditions and the following disclaimer in the documentation and/or other materials
  10:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * provided with the distribution.
  11:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * 3. Neither the name of the copyright holder nor the names of its contributors may be used
  12:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * to endorse or promote products derived from this software without specific prior written
  13:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * permission.
  14:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
  15:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  16:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  17:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR
  18:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  19:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  20:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  21:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  22:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  23:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
  24:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  25:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  *---------------------------------------------------------------------------*/
  26:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** /*----------------------------------------------------------------------------
  27:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * Notice of Export Control Law
  28:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * ===============================================
  29:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * Huawei LiteOS may be subject to applicable export control laws and regulations, which might
  30:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * include those applicable to Huawei LiteOS of U.S. and the country in which you are located.
  31:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * Import, export and usage of Huawei LiteOS in any manner by you shall be in compliance with such
  32:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  * applicable export control laws and regulations.
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 2


  33:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****  *---------------------------------------------------------------------------*/
  34:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  35:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** #include "package_writer.h"
  36:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** #include "package_head.h"
  37:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** #include "upgrade_flag.h"
  38:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  39:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  40:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** void pack_wr_init(pack_writer_s *writer)
  41:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
  42:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     (void)memset(writer, 0, sizeof(*writer));
  43:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
  44:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** void pack_wr_free_save_buffer(pack_writer_s *writer)
  45:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
  46:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if(writer->buffer)
  47:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
  48:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         PACK_FREE(writer->buffer);
  49:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         writer->buffer = NULL;
  50:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
  51:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->buffer_stored_len = 0;
  52:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->block_size = 0;
  53:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
  54:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  55:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** void pack_wr_destroy(pack_writer_s *writer)
  56:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
  57:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->offset_flag = false;
  58:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     pack_wr_free_save_buffer(writer);
  59:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  60:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
  61:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  62:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  63:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** void pack_wr_set_device(pack_writer_s *writer, pack_hardware_s *hardware)
  64:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
  65:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->hardware = hardware;
  66:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
  67:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  68:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** int pack_wr_check(pack_writer_s *writer)
  69:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
  70:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if(NULL == writer->hardware)
  71:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
  72:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         PACK_LOG("null poiter");
  73:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
  74:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
  75:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     return PACK_OK;
  76:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
  77:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  78:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** static int pack_write_data(pack_writer_s *writer, uint32_t offset, const uint8_t *buffer, uint32_t 
  79:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
  27              		.loc 1 79 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              	.LVL0:
  32 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 24
  35              		.cfi_offset 3, -24
  36              		.cfi_offset 4, -20
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 3


  37              		.cfi_offset 5, -16
  38              		.cfi_offset 6, -12
  39              		.cfi_offset 7, -8
  40              		.cfi_offset 14, -4
  41 0002 0D46     		mov	r5, r1
  42 0004 1646     		mov	r6, r2
  43 0006 1F46     		mov	r7, r3
  80:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  81:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     int ret = writer->hardware->write_software(writer->hardware,  offset, buffer, len);
  44              		.loc 1 81 0
  45 0008 0069     		ldr	r0, [r0, #16]
  46              	.LVL1:
  47 000a 4468     		ldr	r4, [r0, #4]
  48 000c A047     		blx	r4
  49              	.LVL2:
  50 000e 0446     		mov	r4, r0
  51              	.LVL3:
  82:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
  83:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if (0 == offset)
  52              		.loc 1 83 0
  53 0010 0DB1     		cbz	r5, .L4
  54              	.LVL4:
  55              	.L1:
  84:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
  85:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         (void)flag_enable_hwpatch(buffer, len);
  86:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
  87:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     return ret;
  88:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
  56              		.loc 1 88 0
  57 0012 2046     		mov	r0, r4
  58 0014 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
  59              	.LVL5:
  60              	.L4:
  85:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
  61              		.loc 1 85 0
  62 0016 3946     		mov	r1, r7
  63 0018 3046     		mov	r0, r6
  64              	.LVL6:
  65 001a FFF7FEFF 		bl	flag_enable_hwpatch
  66              	.LVL7:
  87:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
  67              		.loc 1 87 0
  68 001e F8E7     		b	.L1
  69              		.cfi_endproc
  70              	.LFE8:
  72              		.section	.text.pack_wr_entire_blocks,"ax",%progbits
  73              		.align	1
  74              		.syntax unified
  75              		.thumb
  76              		.thumb_func
  77              		.fpu fpv4-sp-d16
  79              	pack_wr_entire_blocks:
  80              	.LFB11:
  89:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** int pack_wr_write_stored_data(pack_writer_s *writer)
  90:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
  91:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     int ret;
  92:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 4


  93:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** #if (PACK_COMBINE_TO_WRITE_LAST_BLOCK == PACK_YES)
  94:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if (writer->buffer_stored_len < writer->block_size)
  95:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
  96:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         ret = writer->hardware->read_software(writer->hardware,  writer->offset,
  97:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                     writer->buffer + writer->buffer_stored_len, writer->block_size - writer->buffer
  98:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (ret != PACK_OK)
  99:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 100:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             PACK_LOG("read_software fail offset %ld, size %ld ret %d", writer->offset,
 101:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                                 writer->block_size - writer->buffer_stored_len, ret);
 102:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             return ret;
 103:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 104:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 105:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         writer->buffer_stored_len = writer->block_size;
 106:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 107:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** #endif
 108:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 109:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     ret = pack_write_data(writer,  writer->offset, writer->buffer, writer->buffer_stored_len);
 110:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if(ret != PACK_OK)
 111:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 112:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         PACK_LOG("write_software err ret %d, offset %u, len %u", ret, writer->offset, writer->buffe
 113:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
 114:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 115:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 116:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->offset_flag = false;
 117:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     return PACK_OK;
 118:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 119:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 120:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 121:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 122:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** static int pack_wr_begin_not_aligned(pack_writer_s *writer, uint32_t block_begin_offset, uint32_t b
 123:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                                 uint32_t offset, const uint8_t *buff, uint16_t len , uint16_t *out_
 124:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
 125:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****        uint32_t block_left_len = (block_begin_offset + block_size) - offset;
 126:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****        uint32_t write_len = MIN(len, block_left_len);
 127:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****        int ret;
 128:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 129:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (writer->offset_flag && writer->buffer)
 130:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 131:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             memcpy(writer->buffer + writer->buffer_stored_len, buff, write_len);
 132:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->buffer_stored_len += write_len;
 133:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 134:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         else
 135:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 136:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             if (writer->buffer == NULL)
 137:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             {
 138:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 writer->buffer = PACK_MALLOC(block_size);
 139:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 if (writer->buffer == NULL)
 140:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 {
 141:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                     PACK_LOG("malloc null %d", block_size);
 142:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                     return PACK_ERR;
 143:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 }
 144:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 writer->block_size = block_size;
 145:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             }
 146:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 147:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->buffer_stored_len = (offset - block_begin_offset);
 148:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             ret = writer->hardware->read_software(writer->hardware, block_begin_offset, writer->buf
 149:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                     writer->buffer_stored_len);
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 5


 150:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             if (ret != PACK_OK)
 151:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             {
 152:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 PACK_LOG("read_software fail offset %ld, size %ld ret %d", block_begin_offset, writ
 153:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 return ret;
 154:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             }
 155:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             memcpy(writer->buffer + writer->buffer_stored_len, buff, write_len);
 156:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->offset_flag = true;
 157:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->offset = block_begin_offset;
 158:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->buffer_stored_len += write_len;
 159:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 160:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 161:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 162:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (writer->buffer_stored_len >= block_size)
 163:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 164:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             ret = pack_write_data(writer, writer->offset, writer->buffer, block_size);
 165:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             if (ret != PACK_OK)
 166:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             {
 167:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 PACK_LOG("pack_write_data fail,offset %ld, size %ld, ret %ld",
 168:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                         writer->offset, block_size, ret);
 169:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 return ret;
 170:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             }
 171:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->offset_flag = false;
 172:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 173:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 174:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         *out_len = (uint16_t)write_len;
 175:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 176:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_OK;
 177:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 178:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 179:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** static int pack_wr_entire_blocks(pack_writer_s *writer, uint32_t block_begin_offset,
 180:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                                     uint32_t block_size, const uint8_t *buff, uint16_t len, uint16_
 181:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
  81              		.loc 1 181 0
  82              		.cfi_startproc
  83              		@ args = 8, pretend = 0, frame = 0
  84              		@ frame_needed = 0, uses_anonymous_args = 0
  85              	.LVL8:
  86 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
  87              	.LCFI1:
  88              		.cfi_def_cfa_offset 32
  89              		.cfi_offset 4, -32
  90              		.cfi_offset 5, -28
  91              		.cfi_offset 6, -24
  92              		.cfi_offset 7, -20
  93              		.cfi_offset 8, -16
  94              		.cfi_offset 9, -12
  95              		.cfi_offset 10, -8
  96              		.cfi_offset 14, -4
  97 0004 82B0     		sub	sp, sp, #8
  98              	.LCFI2:
  99              		.cfi_def_cfa_offset 40
 100 0006 8146     		mov	r9, r0
 101 0008 0F46     		mov	r7, r1
 102 000a 1446     		mov	r4, r2
 103 000c 1E46     		mov	r6, r3
 104 000e BDF82850 		ldrh	r5, [sp, #40]
 105 0012 DDF82C80 		ldr	r8, [sp, #44]
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 6


 182:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     int ret;
 183:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 184:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     *out_len = 0;
 106              		.loc 1 184 0
 107 0016 0023     		movs	r3, #0
 108              	.LVL9:
 109 0018 A8F80030 		strh	r3, [r8]	@ movhi
 110              	.LVL10:
 111              	.L6:
 185:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 186:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     for (; len >= block_size; len -= block_size, block_begin_offset += block_size,
 112              		.loc 1 186 0
 113 001c A542     		cmp	r5, r4
 114 001e 20D3     		bcc	.L11
 187:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                                 buff += block_size, *out_len += block_size)
 188:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 189:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         ret = pack_write_data(writer, block_begin_offset, buff, block_size);
 115              		.loc 1 189 0
 116 0020 2346     		mov	r3, r4
 117 0022 3246     		mov	r2, r6
 118 0024 3946     		mov	r1, r7
 119 0026 4846     		mov	r0, r9
 120 0028 FFF7FEFF 		bl	pack_write_data
 121              	.LVL11:
 190:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (ret != PACK_OK)
 122              		.loc 1 190 0
 123 002c 8246     		mov	r10, r0
 124 002e 50B9     		cbnz	r0, .L12
 186:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                                 buff += block_size, *out_len += block_size)
 125              		.loc 1 186 0
 126 0030 A3B2     		uxth	r3, r4
 127 0032 ED1A     		subs	r5, r5, r3
 128              	.LVL12:
 129 0034 ADB2     		uxth	r5, r5
 130              	.LVL13:
 131 0036 2744     		add	r7, r7, r4
 132              	.LVL14:
 187:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                                 buff += block_size, *out_len += block_size)
 133              		.loc 1 187 0
 134 0038 2644     		add	r6, r6, r4
 135              	.LVL15:
 136 003a B8F80020 		ldrh	r2, [r8]
 137 003e 1344     		add	r3, r3, r2
 138 0040 A8F80030 		strh	r3, [r8]	@ movhi
 139 0044 EAE7     		b	.L6
 140              	.L12:
 141              	.LBB2:
 191:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 192:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             PACK_LOG("pack_write_data fail,offset %ld, size %ld, ret %ld",
 142              		.loc 1 192 0
 143 0046 FFF7FEFF 		bl	pack_get_params
 144              	.LVL16:
 145 004a C569     		ldr	r5, [r0, #28]
 146              	.LVL17:
 147 004c 5DB1     		cbz	r5, .L5
 148              		.loc 1 192 0 is_stmt 0 discriminator 1
 149 004e D9F80030 		ldr	r3, [r9]
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 7


 150 0052 CDF804A0 		str	r10, [sp, #4]
 151 0056 0094     		str	r4, [sp]
 152 0058 C122     		movs	r2, #193
 153 005a 0549     		ldr	r1, .L13
 154 005c 0548     		ldr	r0, .L13+4
 155              	.LVL18:
 156 005e A847     		blx	r5
 157              	.LVL19:
 158 0060 01E0     		b	.L5
 159              	.LVL20:
 160              	.L11:
 161              	.LBE2:
 193:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                     writer->offset, block_size, ret);
 194:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             return ret;
 195:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 196:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 197:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 198:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     return PACK_OK;
 162              		.loc 1 198 0 is_stmt 1
 163 0062 4FF0000A 		mov	r10, #0
 164              	.LVL21:
 165              	.L5:
 199:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 166              		.loc 1 199 0
 167 0066 5046     		mov	r0, r10
 168 0068 02B0     		add	sp, sp, #8
 169              	.LCFI3:
 170              		.cfi_def_cfa_offset 32
 171              		@ sp needed
 172 006a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 173              	.LVL22:
 174              	.L14:
 175 006e 00BF     		.align	2
 176              	.L13:
 177 0070 00000000 		.word	.LANCHOR0
 178 0074 00000000 		.word	.LC0
 179              		.cfi_endproc
 180              	.LFE11:
 182              		.section	.text.pack_wr_begin_not_aligned,"ax",%progbits
 183              		.align	1
 184              		.syntax unified
 185              		.thumb
 186              		.thumb_func
 187              		.fpu fpv4-sp-d16
 189              	pack_wr_begin_not_aligned:
 190              	.LFB10:
 124:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****        uint32_t block_left_len = (block_begin_offset + block_size) - offset;
 191              		.loc 1 124 0
 192              		.cfi_startproc
 193              		@ args = 12, pretend = 0, frame = 0
 194              		@ frame_needed = 0, uses_anonymous_args = 0
 195              	.LVL23:
 196 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 197              	.LCFI4:
 198              		.cfi_def_cfa_offset 24
 199              		.cfi_offset 4, -24
 200              		.cfi_offset 5, -20
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 8


 201              		.cfi_offset 6, -16
 202              		.cfi_offset 7, -12
 203              		.cfi_offset 8, -8
 204              		.cfi_offset 14, -4
 205 0004 82B0     		sub	sp, sp, #8
 206              	.LCFI5:
 207              		.cfi_def_cfa_offset 32
 208 0006 0446     		mov	r4, r0
 209 0008 0F46     		mov	r7, r1
 210 000a 9046     		mov	r8, r2
 211 000c 1D46     		mov	r5, r3
 125:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****        uint32_t write_len = MIN(len, block_left_len);
 212              		.loc 1 125 0
 213 000e 8E18     		adds	r6, r1, r2
 214 0010 F31A     		subs	r3, r6, r3
 215              	.LVL24:
 126:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****        int ret;
 216              		.loc 1 126 0
 217 0012 BDF82460 		ldrh	r6, [sp, #36]
 218 0016 9E42     		cmp	r6, r3
 219 0018 28BF     		it	cs
 220 001a 1E46     		movcs	r6, r3
 221              	.LVL25:
 129:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 222              		.loc 1 129 0
 223 001c 4368     		ldr	r3, [r0, #4]
 224              	.LVL26:
 225 001e 5BB1     		cbz	r3, .L16
 129:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 226              		.loc 1 129 0 is_stmt 0 discriminator 1
 227 0020 8368     		ldr	r3, [r0, #8]
 228 0022 4BB1     		cbz	r3, .L16
 131:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->buffer_stored_len += write_len;
 229              		.loc 1 131 0 is_stmt 1
 230 0024 C089     		ldrh	r0, [r0, #14]
 231              	.LVL27:
 232 0026 3246     		mov	r2, r6
 233              	.LVL28:
 234 0028 0899     		ldr	r1, [sp, #32]
 235              	.LVL29:
 236 002a 1844     		add	r0, r0, r3
 237 002c FFF7FEFF 		bl	memcpy
 238              	.LVL30:
 132:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 239              		.loc 1 132 0
 240 0030 E389     		ldrh	r3, [r4, #14]
 241 0032 3344     		add	r3, r3, r6
 242 0034 E381     		strh	r3, [r4, #14]	@ movhi
 243 0036 3AE0     		b	.L17
 244              	.LVL31:
 245              	.L16:
 136:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             {
 246              		.loc 1 136 0
 247 0038 A368     		ldr	r3, [r4, #8]
 248 003a BBB1     		cbz	r3, .L26
 249              	.LVL32:
 250              	.L18:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 9


 147:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             ret = writer->hardware->read_software(writer->hardware, block_begin_offset, writer->buf
 251              		.loc 1 147 0
 252 003c EB1B     		subs	r3, r5, r7
 253 003e 9BB2     		uxth	r3, r3
 254 0040 E381     		strh	r3, [r4, #14]	@ movhi
 148:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                     writer->buffer_stored_len);
 255              		.loc 1 148 0
 256 0042 2069     		ldr	r0, [r4, #16]
 257 0044 0568     		ldr	r5, [r0]
 258              	.LVL33:
 259 0046 A268     		ldr	r2, [r4, #8]
 260 0048 3946     		mov	r1, r7
 261 004a A847     		blx	r5
 262              	.LVL34:
 150:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             {
 263              		.loc 1 150 0
 264 004c 0546     		mov	r5, r0
 265 004e 08B3     		cbz	r0, .L21
 266              	.LBB3:
 152:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 return ret;
 267              		.loc 1 152 0
 268 0050 FFF7FEFF 		bl	pack_get_params
 269              	.LVL35:
 270 0054 C669     		ldr	r6, [r0, #28]
 271              	.LVL36:
 272 0056 002E     		cmp	r6, #0
 273 0058 2FD0     		beq	.L15
 152:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 return ret;
 274              		.loc 1 152 0 is_stmt 0 discriminator 1
 275 005a E389     		ldrh	r3, [r4, #14]
 276 005c 0195     		str	r5, [sp, #4]
 277 005e 0093     		str	r3, [sp]
 278 0060 3B46     		mov	r3, r7
 279 0062 9822     		movs	r2, #152
 280 0064 2449     		ldr	r1, .L30
 281 0066 2548     		ldr	r0, .L30+4
 282              	.LVL37:
 283 0068 B047     		blx	r6
 284              	.LVL38:
 285 006a 26E0     		b	.L15
 286              	.LVL39:
 287              	.L26:
 288              	.LBE3:
 138:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 if (writer->buffer == NULL)
 289              		.loc 1 138 0 is_stmt 1
 290 006c 4046     		mov	r0, r8
 291              	.LVL40:
 292 006e FFF7FEFF 		bl	pack_malloc
 293              	.LVL41:
 294 0072 A060     		str	r0, [r4, #8]
 139:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 {
 295              		.loc 1 139 0
 296 0074 10B1     		cbz	r0, .L27
 144:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             }
 297              		.loc 1 144 0
 298 0076 A4F80C80 		strh	r8, [r4, #12]	@ movhi
 299 007a DFE7     		b	.L18
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 10


 300              	.L27:
 301              	.LBB4:
 141:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                     return PACK_ERR;
 302              		.loc 1 141 0
 303 007c FFF7FEFF 		bl	pack_get_params
 304              	.LVL42:
 305 0080 C469     		ldr	r4, [r0, #28]
 306              	.LVL43:
 307 0082 002C     		cmp	r4, #0
 308 0084 36D0     		beq	.L24
 141:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                     return PACK_ERR;
 309              		.loc 1 141 0 is_stmt 0 discriminator 1
 310 0086 4346     		mov	r3, r8
 311 0088 8D22     		movs	r2, #141
 312 008a 1B49     		ldr	r1, .L30
 313 008c 1C48     		ldr	r0, .L30+8
 314              	.LVL44:
 315 008e A047     		blx	r4
 316              	.LVL45:
 317              	.LBE4:
 142:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 }
 318              		.loc 1 142 0 is_stmt 1 discriminator 1
 319 0090 0125     		movs	r5, #1
 320              	.LVL46:
 321 0092 12E0     		b	.L15
 322              	.LVL47:
 323              	.L21:
 155:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->offset_flag = true;
 324              		.loc 1 155 0
 325 0094 A068     		ldr	r0, [r4, #8]
 326              	.LVL48:
 327 0096 E389     		ldrh	r3, [r4, #14]
 328 0098 3246     		mov	r2, r6
 329 009a 0899     		ldr	r1, [sp, #32]
 330 009c 1844     		add	r0, r0, r3
 331 009e FFF7FEFF 		bl	memcpy
 332              	.LVL49:
 156:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->offset = block_begin_offset;
 333              		.loc 1 156 0
 334 00a2 0123     		movs	r3, #1
 335 00a4 6360     		str	r3, [r4, #4]
 157:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             writer->buffer_stored_len += write_len;
 336              		.loc 1 157 0
 337 00a6 2760     		str	r7, [r4]
 158:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 338              		.loc 1 158 0
 339 00a8 E389     		ldrh	r3, [r4, #14]
 340 00aa 3344     		add	r3, r3, r6
 341 00ac E381     		strh	r3, [r4, #14]	@ movhi
 342              	.LVL50:
 343              	.L17:
 162:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 344              		.loc 1 162 0
 345 00ae E389     		ldrh	r3, [r4, #14]
 346 00b0 4345     		cmp	r3, r8
 347 00b2 06D2     		bcs	.L28
 348              	.L22:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 11


 174:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 349              		.loc 1 174 0
 350 00b4 0A9B     		ldr	r3, [sp, #40]
 351 00b6 1E80     		strh	r6, [r3]	@ movhi
 176:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 352              		.loc 1 176 0
 353 00b8 0025     		movs	r5, #0
 354              	.LVL51:
 355              	.L15:
 177:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 356              		.loc 1 177 0
 357 00ba 2846     		mov	r0, r5
 358 00bc 02B0     		add	sp, sp, #8
 359              	.LCFI6:
 360              		.cfi_remember_state
 361              		.cfi_def_cfa_offset 24
 362              		@ sp needed
 363 00be BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 364              	.LVL52:
 365              	.L28:
 366              	.LCFI7:
 367              		.cfi_restore_state
 164:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             if (ret != PACK_OK)
 368              		.loc 1 164 0
 369 00c2 4346     		mov	r3, r8
 370 00c4 A268     		ldr	r2, [r4, #8]
 371 00c6 2168     		ldr	r1, [r4]
 372 00c8 2046     		mov	r0, r4
 373 00ca FFF7FEFF 		bl	pack_write_data
 374              	.LVL53:
 165:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             {
 375              		.loc 1 165 0
 376 00ce 0546     		mov	r5, r0
 377 00d0 10B9     		cbnz	r0, .L29
 171:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 378              		.loc 1 171 0
 379 00d2 0023     		movs	r3, #0
 380 00d4 6360     		str	r3, [r4, #4]
 381 00d6 EDE7     		b	.L22
 382              	.L29:
 383              	.LBB5:
 167:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                         writer->offset, block_size, ret);
 384              		.loc 1 167 0
 385 00d8 FFF7FEFF 		bl	pack_get_params
 386              	.LVL54:
 387 00dc C669     		ldr	r6, [r0, #28]
 388              	.LVL55:
 389 00de 002E     		cmp	r6, #0
 390 00e0 EBD0     		beq	.L15
 167:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                         writer->offset, block_size, ret);
 391              		.loc 1 167 0 is_stmt 0 discriminator 1
 392 00e2 2368     		ldr	r3, [r4]
 393 00e4 0195     		str	r5, [sp, #4]
 394 00e6 CDF80080 		str	r8, [sp]
 395 00ea A822     		movs	r2, #168
 396 00ec 0249     		ldr	r1, .L30
 397 00ee 0548     		ldr	r0, .L30+12
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 12


 398              	.LVL56:
 399 00f0 B047     		blx	r6
 400              	.LVL57:
 401 00f2 E2E7     		b	.L15
 402              	.LVL58:
 403              	.L24:
 404              	.LBE5:
 142:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                 }
 405              		.loc 1 142 0 is_stmt 1
 406 00f4 0125     		movs	r5, #1
 407              	.LVL59:
 408 00f6 E0E7     		b	.L15
 409              	.L31:
 410              		.align	2
 411              	.L30:
 412 00f8 00000000 		.word	.LANCHOR1
 413 00fc 18000000 		.word	.LC2
 414 0100 00000000 		.word	.LC1
 415 0104 00000000 		.word	.LC0
 416              		.cfi_endproc
 417              	.LFE10:
 419              		.section	.text.pack_wr_end_not_aligned_block,"ax",%progbits
 420              		.align	1
 421              		.syntax unified
 422              		.thumb
 423              		.thumb_func
 424              		.fpu fpv4-sp-d16
 426              	pack_wr_end_not_aligned_block:
 427              	.LFB12:
 200:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 201:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 202:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** static int pack_wr_end_not_aligned_block(pack_writer_s *writer, uint32_t block_begin_offset,
 203:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****                                             uint32_t block_size, const uint8_t *buff, uint16_t len)
 204:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
 428              		.loc 1 204 0
 429              		.cfi_startproc
 430              		@ args = 4, pretend = 0, frame = 0
 431              		@ frame_needed = 0, uses_anonymous_args = 0
 432              	.LVL60:
 433 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 434              	.LCFI8:
 435              		.cfi_def_cfa_offset 24
 436              		.cfi_offset 4, -24
 437              		.cfi_offset 5, -20
 438              		.cfi_offset 6, -16
 439              		.cfi_offset 7, -12
 440              		.cfi_offset 8, -8
 441              		.cfi_offset 14, -4
 442 0004 0446     		mov	r4, r0
 443 0006 0E46     		mov	r6, r1
 444 0008 1F46     		mov	r7, r3
 445 000a BDF81850 		ldrh	r5, [sp, #24]
 205:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if (writer->buffer == NULL)
 446              		.loc 1 205 0
 447 000e 8368     		ldr	r3, [r0, #8]
 448              	.LVL61:
 449 0010 5BB1     		cbz	r3, .L38
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 13


 450              	.LVL62:
 451              	.L33:
 206:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 207:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         writer->buffer = PACK_MALLOC(block_size);
 208:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (writer->buffer == NULL)
 209:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 210:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             PACK_LOG("malloc null %d", block_size);
 211:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             return PACK_ERR;
 212:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 213:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         writer->block_size = block_size;
 214:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 215:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 216:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     memcpy(writer->buffer, buff, len);
 452              		.loc 1 216 0
 453 0012 2A46     		mov	r2, r5
 454 0014 3946     		mov	r1, r7
 455 0016 A068     		ldr	r0, [r4, #8]
 456 0018 FFF7FEFF 		bl	memcpy
 457              	.LVL63:
 217:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->buffer_stored_len = len;
 458              		.loc 1 217 0
 459 001c E581     		strh	r5, [r4, #14]	@ movhi
 218:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->offset_flag = true;
 460              		.loc 1 218 0
 461 001e 0123     		movs	r3, #1
 462 0020 6360     		str	r3, [r4, #4]
 219:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->offset = block_begin_offset;
 463              		.loc 1 219 0
 464 0022 2660     		str	r6, [r4]
 220:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     return PACK_OK;
 465              		.loc 1 220 0
 466 0024 0020     		movs	r0, #0
 467              	.LVL64:
 468              	.L32:
 221:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 469              		.loc 1 221 0
 470 0026 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 471              	.LVL65:
 472              	.L38:
 473 002a 9046     		mov	r8, r2
 207:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (writer->buffer == NULL)
 474              		.loc 1 207 0
 475 002c 1046     		mov	r0, r2
 476              	.LVL66:
 477 002e FFF7FEFF 		bl	pack_malloc
 478              	.LVL67:
 479 0032 A060     		str	r0, [r4, #8]
 208:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 480              		.loc 1 208 0
 481 0034 10B1     		cbz	r0, .L39
 213:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 482              		.loc 1 213 0
 483 0036 A4F80C80 		strh	r8, [r4, #12]	@ movhi
 484 003a EAE7     		b	.L33
 485              	.L39:
 486              	.LBB6:
 210:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             return PACK_ERR;
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 14


 487              		.loc 1 210 0
 488 003c FFF7FEFF 		bl	pack_get_params
 489              	.LVL68:
 490 0040 C469     		ldr	r4, [r0, #28]
 491              	.LVL69:
 492 0042 34B1     		cbz	r4, .L36
 210:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             return PACK_ERR;
 493              		.loc 1 210 0 is_stmt 0 discriminator 1
 494 0044 4346     		mov	r3, r8
 495 0046 D222     		movs	r2, #210
 496 0048 0349     		ldr	r1, .L40
 497 004a 0448     		ldr	r0, .L40+4
 498              	.LVL70:
 499 004c A047     		blx	r4
 500              	.LVL71:
 501              	.LBE6:
 211:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 502              		.loc 1 211 0 is_stmt 1 discriminator 1
 503 004e 0120     		movs	r0, #1
 504 0050 E9E7     		b	.L32
 505              	.LVL72:
 506              	.L36:
 211:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 507              		.loc 1 211 0 is_stmt 0
 508 0052 0120     		movs	r0, #1
 509              	.LVL73:
 510 0054 E7E7     		b	.L32
 511              	.L41:
 512 0056 00BF     		.align	2
 513              	.L40:
 514 0058 00000000 		.word	.LANCHOR2
 515 005c 00000000 		.word	.LC1
 516              		.cfi_endproc
 517              	.LFE12:
 519              		.section	.text.pack_wr_init,"ax",%progbits
 520              		.align	1
 521              		.global	pack_wr_init
 522              		.syntax unified
 523              		.thumb
 524              		.thumb_func
 525              		.fpu fpv4-sp-d16
 527              	pack_wr_init:
 528              	.LFB3:
  41:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     (void)memset(writer, 0, sizeof(*writer));
 529              		.loc 1 41 0 is_stmt 1
 530              		.cfi_startproc
 531              		@ args = 0, pretend = 0, frame = 0
 532              		@ frame_needed = 0, uses_anonymous_args = 0
 533              		@ link register save eliminated.
 534              	.LVL74:
  42:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 535              		.loc 1 42 0
 536 0000 0023     		movs	r3, #0
 537 0002 0360     		str	r3, [r0]	@ unaligned
 538 0004 4360     		str	r3, [r0, #4]	@ unaligned
 539 0006 8360     		str	r3, [r0, #8]	@ unaligned
 540 0008 C360     		str	r3, [r0, #12]	@ unaligned
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 15


 541 000a 0361     		str	r3, [r0, #16]	@ unaligned
  43:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** void pack_wr_free_save_buffer(pack_writer_s *writer)
 542              		.loc 1 43 0
 543 000c 7047     		bx	lr
 544              		.cfi_endproc
 545              	.LFE3:
 547              		.section	.text.pack_wr_free_save_buffer,"ax",%progbits
 548              		.align	1
 549              		.global	pack_wr_free_save_buffer
 550              		.syntax unified
 551              		.thumb
 552              		.thumb_func
 553              		.fpu fpv4-sp-d16
 555              	pack_wr_free_save_buffer:
 556              	.LFB4:
  45:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if(writer->buffer)
 557              		.loc 1 45 0
 558              		.cfi_startproc
 559              		@ args = 0, pretend = 0, frame = 0
 560              		@ frame_needed = 0, uses_anonymous_args = 0
 561              	.LVL75:
 562 0000 10B5     		push	{r4, lr}
 563              	.LCFI9:
 564              		.cfi_def_cfa_offset 8
 565              		.cfi_offset 4, -8
 566              		.cfi_offset 14, -4
 567 0002 0446     		mov	r4, r0
  46:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 568              		.loc 1 46 0
 569 0004 8068     		ldr	r0, [r0, #8]
 570              	.LVL76:
 571 0006 18B1     		cbz	r0, .L44
  48:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         writer->buffer = NULL;
 572              		.loc 1 48 0
 573 0008 FFF7FEFF 		bl	pack_free
 574              	.LVL77:
  49:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 575              		.loc 1 49 0
 576 000c 0023     		movs	r3, #0
 577 000e A360     		str	r3, [r4, #8]
 578              	.L44:
  51:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->block_size = 0;
 579              		.loc 1 51 0
 580 0010 0023     		movs	r3, #0
 581 0012 E381     		strh	r3, [r4, #14]	@ movhi
  52:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 582              		.loc 1 52 0
 583 0014 A381     		strh	r3, [r4, #12]	@ movhi
  53:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 584              		.loc 1 53 0
 585 0016 10BD     		pop	{r4, pc}
 586              		.cfi_endproc
 587              	.LFE4:
 589              		.section	.text.pack_wr_destroy,"ax",%progbits
 590              		.align	1
 591              		.global	pack_wr_destroy
 592              		.syntax unified
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 16


 593              		.thumb
 594              		.thumb_func
 595              		.fpu fpv4-sp-d16
 597              	pack_wr_destroy:
 598              	.LFB5:
  56:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->offset_flag = false;
 599              		.loc 1 56 0
 600              		.cfi_startproc
 601              		@ args = 0, pretend = 0, frame = 0
 602              		@ frame_needed = 0, uses_anonymous_args = 0
 603              	.LVL78:
 604 0000 08B5     		push	{r3, lr}
 605              	.LCFI10:
 606              		.cfi_def_cfa_offset 8
 607              		.cfi_offset 3, -8
 608              		.cfi_offset 14, -4
  57:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     pack_wr_free_save_buffer(writer);
 609              		.loc 1 57 0
 610 0002 0022     		movs	r2, #0
 611 0004 4260     		str	r2, [r0, #4]
  58:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 612              		.loc 1 58 0
 613 0006 FFF7FEFF 		bl	pack_wr_free_save_buffer
 614              	.LVL79:
  60:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 615              		.loc 1 60 0
 616 000a 08BD     		pop	{r3, pc}
 617              		.cfi_endproc
 618              	.LFE5:
 620              		.section	.text.pack_wr_set_device,"ax",%progbits
 621              		.align	1
 622              		.global	pack_wr_set_device
 623              		.syntax unified
 624              		.thumb
 625              		.thumb_func
 626              		.fpu fpv4-sp-d16
 628              	pack_wr_set_device:
 629              	.LFB6:
  64:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     writer->hardware = hardware;
 630              		.loc 1 64 0
 631              		.cfi_startproc
 632              		@ args = 0, pretend = 0, frame = 0
 633              		@ frame_needed = 0, uses_anonymous_args = 0
 634              		@ link register save eliminated.
 635              	.LVL80:
  65:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 636              		.loc 1 65 0
 637 0000 0161     		str	r1, [r0, #16]
  66:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 638              		.loc 1 66 0
 639 0002 7047     		bx	lr
 640              		.cfi_endproc
 641              	.LFE6:
 643              		.section	.text.pack_wr_check,"ax",%progbits
 644              		.align	1
 645              		.global	pack_wr_check
 646              		.syntax unified
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 17


 647              		.thumb
 648              		.thumb_func
 649              		.fpu fpv4-sp-d16
 651              	pack_wr_check:
 652              	.LFB7:
  69:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if(NULL == writer->hardware)
 653              		.loc 1 69 0
 654              		.cfi_startproc
 655              		@ args = 0, pretend = 0, frame = 0
 656              		@ frame_needed = 0, uses_anonymous_args = 0
 657              	.LVL81:
 658 0000 08B5     		push	{r3, lr}
 659              	.LCFI11:
 660              		.cfi_def_cfa_offset 8
 661              		.cfi_offset 3, -8
 662              		.cfi_offset 14, -4
  70:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 663              		.loc 1 70 0
 664 0002 0369     		ldr	r3, [r0, #16]
 665 0004 0BB1     		cbz	r3, .L54
  75:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 666              		.loc 1 75 0
 667 0006 0020     		movs	r0, #0
 668              	.LVL82:
 669              	.L49:
  76:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 670              		.loc 1 76 0
 671 0008 08BD     		pop	{r3, pc}
 672              	.LVL83:
 673              	.L54:
 674              	.LBB7:
  72:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
 675              		.loc 1 72 0
 676 000a FFF7FEFF 		bl	pack_get_params
 677              	.LVL84:
 678 000e C369     		ldr	r3, [r0, #28]
 679 0010 2BB1     		cbz	r3, .L52
  72:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
 680              		.loc 1 72 0 is_stmt 0 discriminator 1
 681 0012 4822     		movs	r2, #72
 682 0014 0349     		ldr	r1, .L55
 683 0016 0448     		ldr	r0, .L55+4
 684              	.LVL85:
 685 0018 9847     		blx	r3
 686              	.LVL86:
 687              	.LBE7:
  73:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 688              		.loc 1 73 0 is_stmt 1 discriminator 1
 689 001a 0120     		movs	r0, #1
 690 001c F4E7     		b	.L49
 691              	.LVL87:
 692              	.L52:
  73:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 693              		.loc 1 73 0 is_stmt 0
 694 001e 0120     		movs	r0, #1
 695              	.LVL88:
 696 0020 F2E7     		b	.L49
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 18


 697              	.L56:
 698 0022 00BF     		.align	2
 699              	.L55:
 700 0024 00000000 		.word	.LANCHOR3
 701 0028 00000000 		.word	.LC3
 702              		.cfi_endproc
 703              	.LFE7:
 705              		.section	.text.pack_wr_write_stored_data,"ax",%progbits
 706              		.align	1
 707              		.global	pack_wr_write_stored_data
 708              		.syntax unified
 709              		.thumb
 710              		.thumb_func
 711              		.fpu fpv4-sp-d16
 713              	pack_wr_write_stored_data:
 714              	.LFB9:
  90:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     int ret;
 715              		.loc 1 90 0 is_stmt 1
 716              		.cfi_startproc
 717              		@ args = 0, pretend = 0, frame = 0
 718              		@ frame_needed = 0, uses_anonymous_args = 0
 719              	.LVL89:
 720 0000 70B5     		push	{r4, r5, r6, lr}
 721              	.LCFI12:
 722              		.cfi_def_cfa_offset 16
 723              		.cfi_offset 4, -16
 724              		.cfi_offset 5, -12
 725              		.cfi_offset 6, -8
 726              		.cfi_offset 14, -4
 727 0002 82B0     		sub	sp, sp, #8
 728              	.LCFI13:
 729              		.cfi_def_cfa_offset 24
 730 0004 0446     		mov	r4, r0
 109:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if(ret != PACK_OK)
 731              		.loc 1 109 0
 732 0006 C389     		ldrh	r3, [r0, #14]
 733 0008 8268     		ldr	r2, [r0, #8]
 734 000a 0168     		ldr	r1, [r0]
 735 000c FFF7FEFF 		bl	pack_write_data
 736              	.LVL90:
 110:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 737              		.loc 1 110 0
 738 0010 0546     		mov	r5, r0
 739 0012 20B9     		cbnz	r0, .L62
 116:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     return PACK_OK;
 740              		.loc 1 116 0
 741 0014 0023     		movs	r3, #0
 742 0016 6360     		str	r3, [r4, #4]
 743              	.LVL91:
 744              	.L57:
 118:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 745              		.loc 1 118 0
 746 0018 2846     		mov	r0, r5
 747 001a 02B0     		add	sp, sp, #8
 748              	.LCFI14:
 749              		.cfi_remember_state
 750              		.cfi_def_cfa_offset 16
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 19


 751              		@ sp needed
 752 001c 70BD     		pop	{r4, r5, r6, pc}
 753              	.LVL92:
 754              	.L62:
 755              	.LCFI15:
 756              		.cfi_restore_state
 757              	.LBB8:
 112:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
 758              		.loc 1 112 0
 759 001e FFF7FEFF 		bl	pack_get_params
 760              	.LVL93:
 761 0022 C669     		ldr	r6, [r0, #28]
 762 0024 56B1     		cbz	r6, .L60
 112:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
 763              		.loc 1 112 0 is_stmt 0 discriminator 1
 764 0026 2368     		ldr	r3, [r4]
 765 0028 E289     		ldrh	r2, [r4, #14]
 766 002a 0192     		str	r2, [sp, #4]
 767 002c 0093     		str	r3, [sp]
 768 002e 2B46     		mov	r3, r5
 769 0030 7022     		movs	r2, #112
 770 0032 0349     		ldr	r1, .L63
 771 0034 0348     		ldr	r0, .L63+4
 772              	.LVL94:
 773 0036 B047     		blx	r6
 774              	.LVL95:
 775              	.LBE8:
 113:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 776              		.loc 1 113 0 is_stmt 1 discriminator 1
 777 0038 0125     		movs	r5, #1
 778              	.LVL96:
 779 003a EDE7     		b	.L57
 780              	.LVL97:
 781              	.L60:
 113:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 782              		.loc 1 113 0 is_stmt 0
 783 003c 0125     		movs	r5, #1
 784              	.LVL98:
 785 003e EBE7     		b	.L57
 786              	.L64:
 787              		.align	2
 788              	.L63:
 789 0040 00000000 		.word	.LANCHOR4
 790 0044 00000000 		.word	.LC4
 791              		.cfi_endproc
 792              	.LFE9:
 794              		.section	.text.pack_wr_write,"ax",%progbits
 795              		.align	1
 796              		.global	pack_wr_write
 797              		.syntax unified
 798              		.thumb
 799              		.thumb_func
 800              		.fpu fpv4-sp-d16
 802              	pack_wr_write:
 803              	.LFB13:
 222:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 223:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** int pack_wr_write(pack_writer_s *writer, uint32_t offset, const uint8_t *buff, uint16_t len)
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 20


 224:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
 804              		.loc 1 224 0 is_stmt 1
 805              		.cfi_startproc
 806              		@ args = 0, pretend = 0, frame = 8
 807              		@ frame_needed = 0, uses_anonymous_args = 0
 808              	.LVL99:
 809 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 810              	.LCFI16:
 811              		.cfi_def_cfa_offset 28
 812              		.cfi_offset 4, -28
 813              		.cfi_offset 5, -24
 814              		.cfi_offset 6, -20
 815              		.cfi_offset 7, -16
 816              		.cfi_offset 8, -12
 817              		.cfi_offset 9, -8
 818              		.cfi_offset 14, -4
 819 0004 87B0     		sub	sp, sp, #28
 820              	.LCFI17:
 821              		.cfi_def_cfa_offset 56
 822 0006 0546     		mov	r5, r0
 823 0008 0E46     		mov	r6, r1
 824 000a 9146     		mov	r9, r2
 825 000c 1F46     		mov	r7, r3
 225:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     uint16_t write_len = 0;
 826              		.loc 1 225 0
 827 000e 0022     		movs	r2, #0
 828              	.LVL100:
 829 0010 ADF81620 		strh	r2, [sp, #22]	@ movhi
 226:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     int ret;
 227:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     uint32_t block_size;
 228:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 229:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if(pack_wr_check(writer) != PACK_OK)
 830              		.loc 1 229 0
 831 0014 FFF7FEFF 		bl	pack_wr_check
 832              	.LVL101:
 833 0018 0028     		cmp	r0, #0
 834 001a 5CD1     		bne	.L70
 835 001c 0446     		mov	r4, r0
 230:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 231:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
 232:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 233:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 234:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 235:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if(writer->offset_flag && (writer->offset + writer->buffer_stored_len != offset)
 836              		.loc 1 235 0
 837 001e 6B68     		ldr	r3, [r5, #4]
 838 0020 53BB     		cbnz	r3, .L75
 839              	.L67:
 236:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         && (writer->buffer_stored_len > 0))
 237:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 238:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 239:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         ret = pack_wr_write_stored_data(writer);
 240:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (ret != PACK_OK)
 241:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 242:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             return ret;
 243:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 244:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 21


 245:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 246:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     block_size = writer->hardware->get_block_size(writer->hardware);
 840              		.loc 1 246 0
 841 0022 2869     		ldr	r0, [r5, #16]
 842 0024 C368     		ldr	r3, [r0, #12]
 843 0026 9847     		blx	r3
 844              	.LVL102:
 247:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if (block_size == 0)
 845              		.loc 1 247 0
 846 0028 8046     		mov	r8, r0
 847 002a 0028     		cmp	r0, #0
 848 002c 32D0     		beq	.L76
 248:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 249:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         PACK_LOG("err block_size is 0");
 250:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
 251:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 252:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 253:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if (offset % block_size)
 849              		.loc 1 253 0
 850 002e B6FBF0F3 		udiv	r3, r6, r0
 851 0032 00FB1363 		mls	r3, r0, r3, r6
 852 0036 002B     		cmp	r3, #0
 853 0038 36D1     		bne	.L77
 854              	.LVL103:
 855              	.L69:
 254:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 255:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         uint32_t block_begin;
 256:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 257:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         block_begin = ((offset / block_size) * block_size);
 258:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         ret = pack_wr_begin_not_aligned(writer, block_begin, block_size, offset, buff, len, &write_
 259:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (ret != PACK_OK)
 260:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 261:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****             return ret;
 262:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 263:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 264:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         buff += write_len;
 265:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         len -= write_len;
 266:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         offset += write_len;
 267:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 268:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 269:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if (len <= 0)
 856              		.loc 1 269 0
 857 003a 002F     		cmp	r7, #0
 858 003c 4CD0     		beq	.L65
 270:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 271:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_OK;
 272:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 273:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 274:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     ret = pack_wr_entire_blocks(writer, offset, block_size, buff, len, &write_len);
 859              		.loc 1 274 0
 860 003e 0DF11603 		add	r3, sp, #22
 861 0042 0193     		str	r3, [sp, #4]
 862 0044 0097     		str	r7, [sp]
 863 0046 4B46     		mov	r3, r9
 864 0048 4246     		mov	r2, r8
 865 004a 3146     		mov	r1, r6
 866 004c 2846     		mov	r0, r5
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 22


 867 004e FFF7FEFF 		bl	pack_wr_entire_blocks
 868              	.LVL104:
 275:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if (ret != PACK_OK)
 869              		.loc 1 275 0
 870 0052 0446     		mov	r4, r0
 871 0054 0028     		cmp	r0, #0
 872 0056 3FD1     		bne	.L65
 276:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 277:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return ret;
 278:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 279:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 280:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     buff += write_len;
 873              		.loc 1 280 0
 874 0058 BDF81610 		ldrh	r1, [sp, #22]
 875 005c 09EB0103 		add	r3, r9, r1
 876              	.LVL105:
 281:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     len -= write_len;
 877              		.loc 1 281 0
 878 0060 7F1A     		subs	r7, r7, r1
 879              	.LVL106:
 880 0062 BFB2     		uxth	r7, r7
 881              	.LVL107:
 282:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     offset += write_len;
 882              		.loc 1 282 0
 883 0064 3144     		add	r1, r1, r6
 884              	.LVL108:
 283:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 284:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if (len <= 0)
 885              		.loc 1 284 0
 886 0066 002F     		cmp	r7, #0
 887 0068 36D0     		beq	.L65
 285:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 286:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_OK;
 287:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 288:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 289:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     return pack_wr_end_not_aligned_block(writer, offset, block_size, buff, len);
 888              		.loc 1 289 0
 889 006a 0097     		str	r7, [sp]
 890 006c 4246     		mov	r2, r8
 891 006e 2846     		mov	r0, r5
 892              	.LVL109:
 893 0070 FFF7FEFF 		bl	pack_wr_end_not_aligned_block
 894              	.LVL110:
 895 0074 0446     		mov	r4, r0
 896              	.LVL111:
 897 0076 2FE0     		b	.L65
 898              	.LVL112:
 899              	.L75:
 235:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         && (writer->buffer_stored_len > 0))
 900              		.loc 1 235 0 discriminator 1
 901 0078 2B68     		ldr	r3, [r5]
 902 007a EA89     		ldrh	r2, [r5, #14]
 903 007c 1344     		add	r3, r3, r2
 904 007e B342     		cmp	r3, r6
 905 0080 CFD0     		beq	.L67
 236:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 906              		.loc 1 236 0
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 23


 907 0082 002A     		cmp	r2, #0
 908 0084 CDD0     		beq	.L67
 239:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (ret != PACK_OK)
 909              		.loc 1 239 0
 910 0086 2846     		mov	r0, r5
 911 0088 FFF7FEFF 		bl	pack_wr_write_stored_data
 912              	.LVL113:
 240:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 913              		.loc 1 240 0
 914 008c 0028     		cmp	r0, #0
 915 008e C8D0     		beq	.L67
 242:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 916              		.loc 1 242 0
 917 0090 0446     		mov	r4, r0
 918 0092 21E0     		b	.L65
 919              	.LVL114:
 920              	.L76:
 921              	.LBB9:
 249:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
 922              		.loc 1 249 0
 923 0094 FFF7FEFF 		bl	pack_get_params
 924              	.LVL115:
 925 0098 C369     		ldr	r3, [r0, #28]
 926 009a 0BB3     		cbz	r3, .L72
 249:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_ERR;
 927              		.loc 1 249 0 is_stmt 0 discriminator 1
 928 009c F922     		movs	r2, #249
 929 009e 1249     		ldr	r1, .L78
 930 00a0 1248     		ldr	r0, .L78+4
 931              	.LVL116:
 932 00a2 9847     		blx	r3
 933              	.LVL117:
 934              	.LBE9:
 250:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 935              		.loc 1 250 0 is_stmt 1 discriminator 1
 936 00a4 0124     		movs	r4, #1
 937 00a6 17E0     		b	.L65
 938              	.LVL118:
 939              	.L77:
 940              	.LBB10:
 257:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         ret = pack_wr_begin_not_aligned(writer, block_begin, block_size, offset, buff, len, &write_
 941              		.loc 1 257 0
 942 00a8 B6FBF0F1 		udiv	r1, r6, r0
 943              	.LVL119:
 258:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         if (ret != PACK_OK)
 944              		.loc 1 258 0
 945 00ac 0DF11603 		add	r3, sp, #22
 946 00b0 0293     		str	r3, [sp, #8]
 947 00b2 0197     		str	r7, [sp, #4]
 948 00b4 CDF80090 		str	r9, [sp]
 949 00b8 3346     		mov	r3, r6
 950 00ba 0246     		mov	r2, r0
 951 00bc 00FB01F1 		mul	r1, r0, r1
 952 00c0 2846     		mov	r0, r5
 953              	.LVL120:
 954 00c2 FFF7FEFF 		bl	pack_wr_begin_not_aligned
 955              	.LVL121:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 24


 259:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         {
 956              		.loc 1 259 0
 957 00c6 68B9     		cbnz	r0, .L73
 264:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         len -= write_len;
 958              		.loc 1 264 0
 959 00c8 BDF81630 		ldrh	r3, [sp, #22]
 960 00cc 9944     		add	r9, r9, r3
 961              	.LVL122:
 265:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         offset += write_len;
 962              		.loc 1 265 0
 963 00ce FF1A     		subs	r7, r7, r3
 964 00d0 BFB2     		uxth	r7, r7
 965              	.LVL123:
 266:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 966              		.loc 1 266 0
 967 00d2 1E44     		add	r6, r6, r3
 968              	.LVL124:
 969 00d4 B1E7     		b	.L69
 970              	.LVL125:
 971              	.L70:
 972              	.LBE10:
 231:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 973              		.loc 1 231 0
 974 00d6 0124     		movs	r4, #1
 975              	.LVL126:
 976              	.L65:
 290:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 291:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 977              		.loc 1 291 0
 978 00d8 2046     		mov	r0, r4
 979 00da 07B0     		add	sp, sp, #28
 980              	.LCFI18:
 981              		.cfi_remember_state
 982              		.cfi_def_cfa_offset 28
 983              		@ sp needed
 984 00dc BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 985              	.LVL127:
 986              	.L72:
 987              	.LCFI19:
 988              		.cfi_restore_state
 250:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 989              		.loc 1 250 0
 990 00e0 0124     		movs	r4, #1
 991 00e2 F9E7     		b	.L65
 992              	.LVL128:
 993              	.L73:
 994              	.LBB11:
 261:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         }
 995              		.loc 1 261 0
 996 00e4 0446     		mov	r4, r0
 997 00e6 F7E7     		b	.L65
 998              	.L79:
 999              		.align	2
 1000              	.L78:
 1001 00e8 00000000 		.word	.LANCHOR5
 1002 00ec 00000000 		.word	.LC5
 1003              	.LBE11:
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 25


 1004              		.cfi_endproc
 1005              	.LFE13:
 1007              		.section	.text.pack_wr_write_end,"ax",%progbits
 1008              		.align	1
 1009              		.global	pack_wr_write_end
 1010              		.syntax unified
 1011              		.thumb
 1012              		.thumb_func
 1013              		.fpu fpv4-sp-d16
 1015              	pack_wr_write_end:
 1016              	.LFB14:
 292:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 293:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** int pack_wr_write_end(pack_writer_s *writer)
 294:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** {
 1017              		.loc 1 294 0
 1018              		.cfi_startproc
 1019              		@ args = 0, pretend = 0, frame = 0
 1020              		@ frame_needed = 0, uses_anonymous_args = 0
 1021              	.LVL129:
 1022 0000 08B5     		push	{r3, lr}
 1023              	.LCFI20:
 1024              		.cfi_def_cfa_offset 8
 1025              		.cfi_offset 3, -8
 1026              		.cfi_offset 14, -4
 295:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     if(0 == writer->buffer_stored_len)
 1027              		.loc 1 295 0
 1028 0002 C389     		ldrh	r3, [r0, #14]
 1029 0004 0BB9     		cbnz	r3, .L84
 296:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     {
 297:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****         return PACK_OK;
 1030              		.loc 1 297 0
 1031 0006 0020     		movs	r0, #0
 1032              	.LVL130:
 1033              	.L80:
 298:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     }
 299:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** 
 300:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c ****     return pack_wr_write_stored_data(writer);
 301:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 1034              		.loc 1 301 0
 1035 0008 08BD     		pop	{r3, pc}
 1036              	.LVL131:
 1037              	.L84:
 300:C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package\package_writer.c **** }
 1038              		.loc 1 300 0
 1039 000a FFF7FEFF 		bl	pack_wr_write_stored_data
 1040              	.LVL132:
 1041 000e FBE7     		b	.L80
 1042              		.cfi_endproc
 1043              	.LFE14:
 1045              		.section	.rodata.__FUNCTION__.7292,"a",%progbits
 1046              		.align	2
 1047              		.set	.LANCHOR3,. + 0
 1050              	__FUNCTION__.7292:
 1051 0000 7061636B 		.ascii	"pack_wr_check\000"
 1051      5F77725F 
 1051      63686563 
 1051      6B00
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 26


 1052              		.section	.rodata.__FUNCTION__.7305,"a",%progbits
 1053              		.align	2
 1054              		.set	.LANCHOR4,. + 0
 1057              	__FUNCTION__.7305:
 1058 0000 7061636B 		.ascii	"pack_wr_write_stored_data\000"
 1058      5F77725F 
 1058      77726974 
 1058      655F7374 
 1058      6F726564 
 1059              		.section	.rodata.__FUNCTION__.7319,"a",%progbits
 1060              		.align	2
 1061              		.set	.LANCHOR1,. + 0
 1064              	__FUNCTION__.7319:
 1065 0000 7061636B 		.ascii	"pack_wr_begin_not_aligned\000"
 1065      5F77725F 
 1065      62656769 
 1065      6E5F6E6F 
 1065      745F616C 
 1066              		.section	.rodata.__FUNCTION__.7332,"a",%progbits
 1067              		.align	2
 1068              		.set	.LANCHOR0,. + 0
 1071              	__FUNCTION__.7332:
 1072 0000 7061636B 		.ascii	"pack_wr_entire_blocks\000"
 1072      5F77725F 
 1072      656E7469 
 1072      72655F62 
 1072      6C6F636B 
 1073              		.section	.rodata.__FUNCTION__.7344,"a",%progbits
 1074              		.align	2
 1075              		.set	.LANCHOR2,. + 0
 1078              	__FUNCTION__.7344:
 1079 0000 7061636B 		.ascii	"pack_wr_end_not_aligned_block\000"
 1079      5F77725F 
 1079      656E645F 
 1079      6E6F745F 
 1079      616C6967 
 1080              		.section	.rodata.__FUNCTION__.7355,"a",%progbits
 1081              		.align	2
 1082              		.set	.LANCHOR5,. + 0
 1085              	__FUNCTION__.7355:
 1086 0000 7061636B 		.ascii	"pack_wr_write\000"
 1086      5F77725F 
 1086      77726974 
 1086      6500
 1087              		.section	.rodata.pack_wr_begin_not_aligned.str1.4,"aMS",%progbits,1
 1088              		.align	2
 1089              	.LC1:
 1090 0000 5B25733A 		.ascii	"[%s:%d]malloc null %d\015\012\000"
 1090      25645D6D 
 1090      616C6C6F 
 1090      63206E75 
 1090      6C6C2025 
 1091              	.LC2:
 1092 0018 5B25733A 		.ascii	"[%s:%d]read_software fail offset %ld, size %ld ret "
 1092      25645D72 
 1092      6561645F 
 1092      736F6674 
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 27


 1092      77617265 
 1093 004b 25640D0A 		.ascii	"%d\015\012\000"
 1093      00
 1094              		.section	.rodata.pack_wr_check.str1.4,"aMS",%progbits,1
 1095              		.align	2
 1096              	.LC3:
 1097 0000 5B25733A 		.ascii	"[%s:%d]null poiter\015\012\000"
 1097      25645D6E 
 1097      756C6C20 
 1097      706F6974 
 1097      65720D0A 
 1098              		.section	.rodata.pack_wr_entire_blocks.str1.4,"aMS",%progbits,1
 1099              		.align	2
 1100              	.LC0:
 1101 0000 5B25733A 		.ascii	"[%s:%d]pack_write_data fail,offset %ld, size %ld, r"
 1101      25645D70 
 1101      61636B5F 
 1101      77726974 
 1101      655F6461 
 1102 0033 65742025 		.ascii	"et %ld\015\012\000"
 1102      6C640D0A 
 1102      00
 1103              		.section	.rodata.pack_wr_write.str1.4,"aMS",%progbits,1
 1104              		.align	2
 1105              	.LC5:
 1106 0000 5B25733A 		.ascii	"[%s:%d]err block_size is 0\015\012\000"
 1106      25645D65 
 1106      72722062 
 1106      6C6F636B 
 1106      5F73697A 
 1107              		.section	.rodata.pack_wr_write_stored_data.str1.4,"aMS",%progbits,1
 1108              		.align	2
 1109              	.LC4:
 1110 0000 5B25733A 		.ascii	"[%s:%d]write_software err ret %d, offset %u, len %u"
 1110      25645D77 
 1110      72697465 
 1110      5F736F66 
 1110      74776172 
 1111 0033 0D0A00   		.ascii	"\015\012\000"
 1112              		.text
 1113              	.Letext0:
 1114              		.file 2 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 1115              		.file 3 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 1116              		.file 4 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/include/ota/ota_api.h"
 1117              		.file 5 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\lib\\gcc\\arm-none-eabi
 1118              		.file 6 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 1119              		.file 7 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 1120              		.file 8 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include\
 1121              		.file 9 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/include/ota/package.h"
 1122              		.file 10 "c:\\program files (x86)\\liteos studio\\resources\\arm-none-eabi\\arm-none-eabi\\include
 1123              		.file 11 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package/package_che
 1124              		.file 12 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package/package_hea
 1125              		.file 13 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/package/package_wri
 1126              		.file 14 "C:/Users/lenovo/Desktop/liteos/Project2/BearPi_LiteOS/components/ota/flag_operate/upgrad
 1127              		.file 15 "<built-in>"
ARM GAS  c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s 			page 28


DEFINED SYMBOLS
                            *ABS*:00000000 package_writer.c
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:18     .text.pack_write_data:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:24     .text.pack_write_data:00000000 pack_write_data
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:73     .text.pack_wr_entire_blocks:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:79     .text.pack_wr_entire_blocks:00000000 pack_wr_entire_blocks
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:177    .text.pack_wr_entire_blocks:00000070 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:183    .text.pack_wr_begin_not_aligned:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:189    .text.pack_wr_begin_not_aligned:00000000 pack_wr_begin_not_aligned
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:412    .text.pack_wr_begin_not_aligned:000000f8 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:420    .text.pack_wr_end_not_aligned_block:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:426    .text.pack_wr_end_not_aligned_block:00000000 pack_wr_end_not_aligned_block
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:514    .text.pack_wr_end_not_aligned_block:00000058 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:520    .text.pack_wr_init:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:527    .text.pack_wr_init:00000000 pack_wr_init
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:548    .text.pack_wr_free_save_buffer:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:555    .text.pack_wr_free_save_buffer:00000000 pack_wr_free_save_buffer
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:590    .text.pack_wr_destroy:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:597    .text.pack_wr_destroy:00000000 pack_wr_destroy
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:621    .text.pack_wr_set_device:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:628    .text.pack_wr_set_device:00000000 pack_wr_set_device
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:644    .text.pack_wr_check:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:651    .text.pack_wr_check:00000000 pack_wr_check
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:700    .text.pack_wr_check:00000024 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:706    .text.pack_wr_write_stored_data:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:713    .text.pack_wr_write_stored_data:00000000 pack_wr_write_stored_data
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:789    .text.pack_wr_write_stored_data:00000040 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:795    .text.pack_wr_write:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:802    .text.pack_wr_write:00000000 pack_wr_write
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1001   .text.pack_wr_write:000000e8 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1008   .text.pack_wr_write_end:00000000 $t
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1015   .text.pack_wr_write_end:00000000 pack_wr_write_end
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1046   .rodata.__FUNCTION__.7292:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1050   .rodata.__FUNCTION__.7292:00000000 __FUNCTION__.7292
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1053   .rodata.__FUNCTION__.7305:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1057   .rodata.__FUNCTION__.7305:00000000 __FUNCTION__.7305
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1060   .rodata.__FUNCTION__.7319:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1064   .rodata.__FUNCTION__.7319:00000000 __FUNCTION__.7319
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1067   .rodata.__FUNCTION__.7332:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1071   .rodata.__FUNCTION__.7332:00000000 __FUNCTION__.7332
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1074   .rodata.__FUNCTION__.7344:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1078   .rodata.__FUNCTION__.7344:00000000 __FUNCTION__.7344
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1081   .rodata.__FUNCTION__.7355:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1085   .rodata.__FUNCTION__.7355:00000000 __FUNCTION__.7355
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1088   .rodata.pack_wr_begin_not_aligned.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1095   .rodata.pack_wr_check.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1099   .rodata.pack_wr_entire_blocks.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1104   .rodata.pack_wr_write.str1.4:00000000 $d
c:\Users\lenovo\AppData\Local\Temp\ccGcADyy.s:1108   .rodata.pack_wr_write_stored_data.str1.4:00000000 $d

UNDEFINED SYMBOLS
flag_enable_hwpatch
pack_get_params
memcpy
pack_malloc
pack_free
